TESTSUITENAME,W_MAIN AIM ORDER WITH AUTO-LINK REQUEST PHASE 2 where PO has W origin and MO is CUSTOMER,
PRINTOUTPUTHEADING,
STARTPOINT,

COMMENT,Connect to the ITG Linkage Router (RMI Server) 
CONNECTTOITGLINKAGEROUTER,TRUE,TRUE,Connects to ITG Linkage Router(RMI Server),

COMMENT,Log in HD User and Perform Test Requirements,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Log in the HD User,
SELECTREPORTINGCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,$HYBRIDCLASSLIST,TRUE,TRUE,Select Reporting Class,

COMMENT,Create CMI users,
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,

COMMENT,Log in initial CMI test users & perform system verifications,
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM2,$MM2,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM3,$MM3,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM4,$MM4,$CASANDPORT,TRUE,TRUE,Logging in,

COMMENT,Set up Subscriptions for the Class,
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBERECAP,$MM1,$SESSION1,$CLASS1PRODUCT1,TRUE,TRUE,Subscribe for Last Sale (recap),
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,4,TRUE,TRUE,Subscribe Auction for complex orders,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,-8,TRUE,TRUE,Subscribe Auction for complex orders,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,1,TRUE,TRUE,Subscribe Auction for complex orders,

COMMENT,Step 3: Set/Verify Product States,
CLEARALLCALLBACKS,$SA1,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Set Product State to close,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Set Product State to pre open,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Set Product State to opening rotation,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Set Product State to open,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Verify product is open,

COMMENT,Remove Routing Properties for Class1,
REMOVEALLFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Firm Volume Limit
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,SIMPLE,TRUE,TRUE,Remove All Volume check deviation,
REMOVEALLFIRMCORRBRANCHOMT,$SA1,$MM1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,-,-,TRUE,TRUE,Remove Firm Corr Branch OMT 
REMOVEALLBOOTHDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Booth Default Destination
REMOVEALLBOOTHDIRECTROUTING,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,TRUE,TRUE,Remove Booth Direct Routing
REMOVEALLPARDIRECTROUTING,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,TRUE,TRUE,Remove Par Direct Routingn
REMOVEALLFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Firmn Volume Limit
REMOVEALLHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Help Desk Default Destination
REMOVEALLSESSIONCLASSPARROUTING,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,Remove Session Class Par Routing Parameters
REMOVEREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Set Reasonability Edit

COMMENT,PRE TEST CONDITIONS (RP's) for Class1,
SETALLOWINCOMINGISOORDERS,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Allow Incoming ISO Orders,
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Set Firm Volume Limit
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Set Firm Volume Limit
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Verify Helpdesk Default Destination
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Set Volume check deviation,
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Verify Volume check deviation,
SETDISABLELINKAGEONPAR,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Remove Session Class Par Routing Parameters
SETREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,Default,TRUE,TRUE,Set Reasonability Edit


COMMENT,Set Linkage Property ,
SETLINKAGEROUTERVENDORASSIGNMENT,$SA1,$SESSION1,Default,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$LINKAGEROUTERVENDORNAME,TRUE,TRUE,SET LINKAGE ROUTER VENDOR ASSIGNMENT,
SETDEFAULTLINKAGEROUTERSTATUS,$SA1,$SESSION1,$LINKAGEROUTERVENDORNAME,TRUE,TRUE,TRUE,SET DEFAULT LINKAGE ROUTER STATUS,
LINKAGEENABLE,$SA1,$SESSION1,$CLASS1SYM,TRUE,TRUE,Linkage Enable...,
MODIFYAUTOLINKEXPIRATIONTIMER,$SA1,$CLASS1,60000,TRUE,TRUE,Modify the Auto Link Expiration Timer

COMMENT,Set Trading Property for Option,
SETALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,0=2;4;20 2=1;4;32 5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Set Allocation Strategies,
VERIFYALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,0=2;4;20 2=1;4;32 5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Verify Allocation Strategies,
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,1:TRUE;4:TRUE;-8:TRUE,TRUE,TRUE,Set Auction Enabled
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,1:TRUE;4:TRUE;-8:TRUE,TRUE,TRUE,Set Auction Enabled
SETALLOWMARKETORDER,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Set Allow Market Order,
SETAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASS1,4:0;1:0;-8:0,TRUE,TRUE,Set Price Increment
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
SETAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASS1,1:0;-8:0;4:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
VERIFYAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASS1,1:0;-8:0;4:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASS1,4:1-99999;-8:1-99999;1:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASS1,4:1-99999;-8:1-99999;1:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
SETALLOWEDHALORIGINCODES,$SA1,$SESSION1,$CLASS1,3:0;6:0;13:0,TRUE,TRUE,Set Allowed HAL orign Types,
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASS1,4:1;1:1;-8:1,TRUE,TRUE,Set Auction Receiver Type
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASS1,4:1;1:1;-8:1,TRUE,TRUE,Verify Auction Receiver Type
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,4:10000-15000;-8:10000-15000;1:10000-10000,TRUE,TRUE,Set Auction time To live 11 - 11 sec's
SETALLOWEDHALARRAY,$SA1,$SESSION1,$CLASS1,1:2:3,TRUE,TRUE,Set Allowed HAL Types,
SETEXCHANGEPRESCRIBEDWIDTH,$SA1,$SESSION1,$CLASS1,0.0-3.0:0.50;3.0-10.0:1.00;10.0-99999:2.00,TRUE,TRUE,Set Exchange Prescribed Width for Regular Option Class,
SETAUTOLINKPREFERREDTIEEXCHANGES,$SA1,$SESSION1,$CLASS1,2:1;6:2;5:3;1:4;4:5;3:6,TRUE,TRUE, Set Auto Link Preferred Tie Exchanges
SETAUTOLINKDISQUALIFIEDEXCHANGES,$SA1,$SESSION1,$CLASS1,1:0;2:0;3:0;4:0;5:0;6:0,TRUE,TRUE,Set Auto Link Disqualified Exchanges
SETAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASS1,500,TRUE,TRUE,Set UMA Split Rate
SETINTERNALIZATIONGUARANTEEDPERCENTAGE,$SA1,$SESSION1,$CLASS1,1:0-1:1.00;1:1-2:0.50;1:2-99999:0.40,TRUE,TRUE,Set Internalization Guaranteed Percentage,
SETUMASPLITRATE,$SA1,$SESSION1,$CLASS1,0.5,TRUE,TRUE,Set UMA Split Rate




COMMENT,SCENARIO 52.Verify for the inbound AIM Order with Auto-Link request:  if MO is at MKT price then irrespective of PO price (LMT or MKT) AIM Order MUST NOT SWEEP & LINK AWAY.Verify also that AIM Order must start at price BETTER than PO price that is ONE TICK BETTER than the NBBO on the opposite side of PO.  PO and MO trades immediately with each other,
COMMENT,CONDITION (1):  PO & MO = MKT price,
COMMENT,CONDITION (2):  TP ‘Auction Minimum Quoters’ = 3,

COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,

COMMENT,PART 2:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,080,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
QUOTE,$MM3,2,1,00,200,2,1,50,200,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth


INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,081,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,082,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,

RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,400,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,081,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,082,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,083,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,084,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,M,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,500,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,083,ABC,*,0,0,3,500,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,084,ABC,*,0,0,3,500,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,080,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,





COMMENT,AIM Order with Auto-Link request & MO at MKT PRICE,
COMMENT,SCENARIO 53.Verify for the inbound AIM Order with Auto-Link request:  if MO is at MKT price then irrespective of PO price (LMT or MKT) AIM Order MUST NOT SWEEP & LINK AWAY.Verify also that if AIM Order triggers AIM auction must start at price BETTER than PO price that is ONCE TICK BETTER than the NBBO on the opposite side of PO,
COMMENT,CONDITION (1): PO = LMT PRICE & PO is BETTER priced than quote and first resting order (second resting order is not tradable with PO),
COMMENT,CONDITION (2):  MO = MKT PRICE,
COMMENT,CONDITION (3):  AIM Auction starting price = NBBO on MO side + PENNY,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,

COMMENT,PART 1:
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,085,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,086,ABC,*,$MM3EXCHANGE,$MM3,200,$CLASS1PRODUCT1,S,2,1,50,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth


INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,087,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,2,1,40,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,088,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,

ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,087,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,400,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,088,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,400,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,089,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,B,2,1,40,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,090,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,M,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,089,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,500,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,090,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,500,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,085,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
ORDERCANCEL,$MM3,$MM2EXCHANGE,$MM2EXECFIRM,NIT,086,ABC,*,200,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,



COMMENT,PART 2:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,091,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,092,ABC,*,$MM3EXCHANGE,$MM3,200,$CLASS1PRODUCT1,S,2,1,50,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth


INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,093,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,2,1,40,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,094,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,

RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,400,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,093,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,094,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,095,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,2,1,40,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,096,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,F,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,400,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,095,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,096,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,091,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
ORDERCANCEL,$MM3,$MM2EXCHANGE,$MM2EXECFIRM,NIT,092,ABC,*,200,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,SCENARIO 52 PART2 53 PART1 AND PART2 WITH SEPARATED AIM,


COMMENT,SCENARIO 52.Verify for the inbound AIM Order with Auto-Link request:  if MO is at MKT price then irrespective of PO price (LMT or MKT) AIM Order MUST NOT SWEEP & LINK AWAY.Verify also that AIM Order must start at price BETTER than PO price that is ONE TICK BETTER than the NBBO on the opposite side of PO.  PO and MO trades immediately with each other,
COMMENT,CONDITION (1):  PO & MO = MKT price,
COMMENT,CONDITION (2):  TP ‘Auction Minimum Quoters’ = 3,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,

COMMENT,PART 2:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,333,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
QUOTE,$MM3,2,1,00,200,2,1,50,200,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth


ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,111,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,TRUE,TRUE,Enter Order
MATCHORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,222,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:RE:$MM4EXECFIRM:RIC:111;,-,$SESSION1,TRUE,TRUE,Enter Order

RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,400,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,111,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,222,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,103,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,B,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:AIS;,-,$SESSION1,TRUE,TRUE,Enter Order
MATCHORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,104,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,S,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,C,1,A:RE:$MM4EXECFIRM:RIC:103;,-,$SESSION1,TRUE,TRUE,Enter Order
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,500,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,103,ABC,*,0,0,3,500,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,104,ABC,*,0,0,3,500,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,333,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,



COMMENT,AIM Order with Auto-Link request & MO at MKT PRICE,
COMMENT,SCENARIO 53.Verify for the inbound AIM Order with Auto-Link request:  if MO is at MKT price then irrespective of PO price (LMT or MKT) AIM Order MUST NOT SWEEP & LINK AWAY.Verify also that if AIM Order triggers AIM auction must start at price BETTER than PO price that is ONCE TICK BETTER than the NBBO on the opposite side of PO,
COMMENT,CONDITION (1): PO = LMT PRICE & PO is BETTER priced than quote and first resting order (second resting order is not tradable with PO),
COMMENT,CONDITION (2):  MO = MKT PRICE,
COMMENT,CONDITION (3):  AIM Auction starting price = NBBO on MO side + PENNY,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,
COMMENT,PART 1:
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,444,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,888,ABC,*,$MM3EXCHANGE,$MM3,200,$CLASS1PRODUCT1,S,2,1,50,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth


ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,105,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,2,1,40,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,TRUE,TRUE,Enter Order
MATCHORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,106,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:RE:$MM4EXECFIRM:RIC:105;,-,$SESSION1,TRUE,TRUE,Enter Order

ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,105,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,400,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,106,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,400,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,107,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,B,2,1,40,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:AIS;,-,$SESSION1,TRUE,TRUE,Enter Order
MATCHORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,108,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,S,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,C,1,A:RE:$MM4EXECFIRM:RIC:107;,-,$SESSION1,TRUE,TRUE,Enter Order
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,107,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,500,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,108,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,500,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,444,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
ORDERCANCEL,$MM3,$MM2EXCHANGE,$MM2EXECFIRM,NIT,888,ABC,*,200,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,



COMMENT,PART 2:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,666,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,555,ABC,*,$MM3EXCHANGE,$MM3,200,$CLASS1PRODUCT1,S,2,1,50,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth


ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,109,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,2,1,40,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,TRUE,TRUE,Enter Order
MATCHORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,110,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:RE:$MM4EXECFIRM:RIC:109;,-,$SESSION1,TRUE,TRUE,Enter Order

RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,400,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,109,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,110,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,151,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,2,1,40,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,A:AIS;,-,$SESSION1,TRUE,TRUE,Enter Order
MATCHORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,112,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,F,C,1,A:RE:$MM4EXECFIRM:RIC:151;,-,$SESSION1,TRUE,TRUE,Enter Order
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,400,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,151,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RIC,112,ABC,*,0,0,3,400,1,2,1,09,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,666,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
ORDERCANCEL,$MM3,$MM2EXCHANGE,$MM2EXECFIRM,NIT,555,ABC,*,200,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,

COMMENT,Test complete - Log off users,
TRADERLOGOUT,$MM1,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM2,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM3,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM4,TRUE,TRUE,Valid Logout,
SALOGOUT,$SA1,TRUE,TRUE,Valid Logout,
ENDPOINT,
PRINTOUTPUTSUMMARY,
TERMINATE,

