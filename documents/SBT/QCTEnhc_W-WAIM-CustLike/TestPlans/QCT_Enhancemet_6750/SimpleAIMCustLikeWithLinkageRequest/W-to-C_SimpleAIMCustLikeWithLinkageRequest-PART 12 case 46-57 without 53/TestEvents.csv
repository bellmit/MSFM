TESTSUITENAME,W_MAIN AIM ORDER WITH AUTO-LINK REQUEST PHASE 2 where PO have W origin and MO is CUSTOMER,
PRINTOUTPUTHEADING,
STARTPOINT,

COMMENT,Connect to the ITG Linkage Router (RMI Server) 
CONNECTTOITGLINKAGEROUTER,TRUE,TRUE,Connects to ITG Linkage Router(RMI Server),

COMMENT,Log in HD User and Perform Test Requirements,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Log in the HD User,
SELECTREPORTINGCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,$HYBRIDCLASSLIST,TRUE,TRUE,Select Reporting Class,

COMMENT,Create CMI users,
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,

COMMENT,Log in initial CMI test users & perform system verifications,
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM2,$MM2,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM3,$MM3,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM4,$MM4,$CASANDPORT,TRUE,TRUE,Logging in,

COMMENT,Set up Subscriptions for the Class,
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBERECAP,$MM1,$SESSION1,$CLASS1PRODUCT1,TRUE,TRUE,Subscribe for Last Sale (recap),
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,4,TRUE,TRUE,Subscribe Auction for complex orders,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,-8,TRUE,TRUE,Subscribe Auction for complex orders,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,1,TRUE,TRUE,Subscribe Auction for complex orders,

COMMENT,Step 3: Set/Verify Product States,
CLEARALLCALLBACKS,$SA1,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Set Product State to close,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Set Product State to pre open,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Set Product State to opening rotation,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Set Product State to open,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Verify product is open,


COMMENT,Remove Routing Properties for Class1,
REMOVEALLFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Firm Volume Limit
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,SIMPLE,TRUE,TRUE,Remove All Volume check deviation,
REMOVEALLFIRMCORRBRANCHOMT,$SA1,$MM1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,-,-,TRUE,TRUE,Remove Firm Corr Branch OMT 
REMOVEALLBOOTHDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Booth Default Destination
REMOVEALLBOOTHDIRECTROUTING,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,TRUE,TRUE,Remove Booth Direct Routing
REMOVEALLPARDIRECTROUTING,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,TRUE,TRUE,Remove Par Direct Routingn
REMOVEALLFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Firmn Volume Limit
REMOVEALLHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Help Desk Default Destination
REMOVEALLSESSIONCLASSPARROUTING,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,Remove Session Class Par Routing Parameters
REMOVEREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Set Reasonability Edit


COMMENT,PRE TEST CONDITIONS (RP's) for Class1,
SETALLOWINCOMINGISOORDERS,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Allow Incoming ISO Orders,
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Set Firm Volume Limit
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Set Firm Volume Limit
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Verify Helpdesk Default Destination
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Set Volume check deviation,
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Verify Volume check deviation,
SETDISABLELINKAGEONPAR,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Remove Session Class Par Routing Parameters
SETREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,Default,TRUE,TRUE,Set Reasonability Edit



COMMENT,Set Linkage Property ,

SETLINKAGEROUTERVENDORASSIGNMENT,$SA1,$SESSION1,Default,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$LINKAGEROUTERVENDORNAME,TRUE,TRUE,SET LINKAGE ROUTER VENDOR ASSIGNMENT,
SETDEFAULTLINKAGEROUTERSTATUS,$SA1,$SESSION1,$LINKAGEROUTERVENDORNAME,TRUE,TRUE,TRUE,SET DEFAULT LINKAGE ROUTER STATUS,
LINKAGEENABLE,$SA1,$SESSION1,$CLASS1SYM,TRUE,TRUE,Linkage Enable...,
MODIFYAUTOLINKEXPIRATIONTIMER,$SA1,$CLASS1,60000,TRUE,TRUE,Modify the Auto Link Expiration Timer

COMMENT,Set Trading Property for Option,
SETALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,0=2;4;20 2=1;4;32 5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Set Allocation Strategies,
VERIFYALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,0=2;4;20 2=1;4;32 5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Verify Allocation Strategies,
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,1:TRUE;4:TRUE;-8:TRUE,TRUE,TRUE,Set Auction Enabled
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,1:TRUE;4:TRUE;-8:TRUE,TRUE,TRUE,Set Auction Enabled
SETALLOWMARKETORDER,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Set Allow Market Order,
SETAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASS1,4:0;1:0;-8:0,TRUE,TRUE,Set Price Increment
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
SETAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASS1,1:0;-8:0;4:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
VERIFYAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASS1,1:0;-8:0;4:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASS1,4:1-99999;-8:1-99999;1:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASS1,4:1-99999;-8:1-99999;1:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
SETALLOWEDHALORIGINCODES,$SA1,$SESSION1,$CLASS1,3:0;6:0;13:0,TRUE,TRUE,Set Allowed HAL orign Types,
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASS1,4:1;1:1;-8:1,TRUE,TRUE,Set Auction Receiver Type
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASS1,4:1;1:1;-8:1,TRUE,TRUE,Verify Auction Receiver Type
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,4:15000-15000;-8:15000-15000;1:15000-15000,TRUE,TRUE,Set Auction time To live 11 - 11 sec's
SETALLOWEDHALARRAY,$SA1,$SESSION1,$CLASS1,1:2:3,TRUE,TRUE,Set Allowed HAL Types,
SETEXCHANGEPRESCRIBEDWIDTH,$SA1,$SESSION1,$CLASS1,0.0-3.0:0.50;3.0-10.0:1.00;10.0-99999:2.00,TRUE,TRUE,Set Exchange Prescribed Width for Regular Option Class,
SETAUTOLINKPREFERREDTIEEXCHANGES,$SA1,$SESSION1,$CLASS1,1:2;2:6;3:5;4:1;5:4;6:3,TRUE,TRUE, Set Auto Link Preferred Tie Exchanges
SETAUTOLINKDISQUALIFIEDEXCHANGES,$SA1,$SESSION1,$CLASS1,1:0;2:0;3:0;4:0;5:0;6:0,TRUE,TRUE,Set Auto Link Disqualified Exchanges
SETAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASS1,500,TRUE,TRUE,Set UMA Split Rate
SETINTERNALIZATIONGUARANTEEDPERCENTAGE,$SA1,$SESSION1,$CLASS1,1:0-1:1.00;1:1-2:0.50;1:2-99999:0.40,TRUE,TRUE,Set Internalization Guaranteed Percentage,
SETUMASPLITRATE,$SA1,$SESSION1,$CLASS1,0.5,TRUE,TRUE,Set UMA Split Rate


COMMENT,REGULAR AIM WITH AUTO-LINK REQUEST,
COMMENT,TRADING RULES & AIM ORDER WITH PO & MO AS CUSTOMERS,
COMMENT,PO & MO TRADING RULE #1: 
COMMENT,RULE:MO can be priced WORSE than CBOE market but NOT WORSE than PO,






COMMENT,SCENARIO 46.Verify for the inbound AIM Order with Auto-Link request: if PO is at LIMIT price, then MO must be allowed to be priced WORSE than the CBOE market, but NOT worse than PO’s Limit price,
COMMENT,CONDITION (1):  PO = LMT price,
COMMENT,CONDITION (2):  MO price is EQUAL to PO & MO is WORSE than CBOE market

COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,-8:10000-10000;4:10000-10000;1:10000-10000,TRUE,TRUE,Set Auction Time To Live 13 - 15 seconds,
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N;AMEX:B:1.00:50:BOTR:N:A:1.10:50:BOTR:N A;ISE:B:1.00:20:BOTR:N A:A:1.30:20:BOTR:N A I,TRUE,TRUE,Set Buy BOTR,

TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
QUOTE,$MM2,2,1,00,100,2,1,50,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,2,100,2,1,20,100,2,1,50,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,2,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,$MM3EXCHANGE,$MM3,230,$CLASS1PRODUCT1,B,2,1,50,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,060,ABC,*,$MM3EXCHANGE,$MM3,230,$CLASS1PRODUCT1,S,2,1,50,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,0,130,1,100,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id,TRUE,TRUE,Quote Q2,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,0,80,1,50,1,2,1,50,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,060,ABC,*,0,180,1,50,1,2,1,50,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,$MM3EXCHANGE,$MM3EXCHANGE,10,$CLASS1PRODUCT1,B,2,1,10,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM3,$MM3,O,FALSE,C,C,2,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM3 enters an order from CMI,
LINKAGEORDERFILLV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,10,10,0,0,1,1,B,2,1,10,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,C,NYSE,TRUE,TRUE,Linkage Order Fill Report for c1,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,0,70,1,10,1,2,1,10,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,$MM3EXCHANGE,$MM3EXCHANGE,50,$CLASS1PRODUCT1,B,2,1,10,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,AMEX,$MM3,$MM3,O,FALSE,C,C,2,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM3 enters an order from CMI,
LINKAGECANCELREPORTV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,50,0,0,50,1,B,2,1,10,O,C,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,AMEX,FALSE,TRUE,TRUE,Linkage Cancel Report,
LINKAGEORDERVERIFICATIONV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,$MM3EXCHANGE,$MM3EXCHANGE,20,$CLASS1PRODUCT1,B,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,ISE,$MM3,$MM3,O,FALSE,C,C,2,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM3 enters an order from CMI,
LINKAGEORDERFILLV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,15,15,0,0,1,1,B,2,1,30,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,C,ISE,TRUE,TRUE,Linkage Order Fill Report for c1,
LINKAGECANCELREPORTV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,5,0,0,5,1,B,2,1,30,O,C,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,ISE,FALSE,TRUE,TRUE,Linkage Cancel Report,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,0,55,1,15,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,059,ABC,*,0,0,3,55,1,2,1,50,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,060,ABC,*,0,125,1,55,1,2,1,50,TRUE,TRUE,Order Fill Verification M3 ,
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,060,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,125,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,50,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,1,100,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM2,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,





COMMENT,SCENARIO 47.Verify for the inbound AIM Order with Auto-Link request: if PO is at LIMIT price, then MO must be allowed to be priced WORSE than the CBOE market, but NOT worse than PO’s Limit price.,
COMMENT,CONDITION (1):  PO = LMT price,
COMMENT,CONDITION (2):  MO price is EQUAL to PO & MO is EQUAL to CBOE market on the same side,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,-8:10000-10000;4:10000-10000;1:10000-10000,TRUE,TRUE,Set Auction Time To Live 13 - 15 seconds,
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:60:BOTR:N:A:1.10:60:BOTR:N;AMEX:B:1.00:50:BOTR:N:A:1.30:50:BOTR:N;ISE:B:1.00:20:BOTR:N A:A:1.40:20:BOTR:N A I,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,061,ABC,*,$MM2EXCHANGE,$MM2,200,$CLASS1PRODUCT1,B,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,NIT,062,ABC,*,$MM2EXCHANGE,$MM2,200,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,061,ABC,*,0,60,1,140,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,062,ABC,*,0,60,1,140,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,061,ABC,*,$MM2EXCHANGE,$MM2EXCHANGE,60,$CLASS1PRODUCT1,B,2,1,10,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM2,$MM2,O,FALSE,C,C,2,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM2 enters an order from CMI,
LINKAGECANCELREPORTV2,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,061,ABC,*,60,0,0,60,1,B,2,1,10,O,C,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,NYSE,FALSE,TRUE,TRUE,Linkage Cancel Report,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,061,ABC,*,0,0,3,60,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,062,ABC,*,0,0,3,60,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,







COMMENT,SCENARIO 48.Verify for the inbound AIM Order with Auto-Link request: if PO is at LIMIT price, then MO must be allowed to be priced WORSE than CBOE market, but NOT worse than PO’s Limit price. Verify also that PO is Link-ed Away only if Away Exchange is at least PENNY better than MO,
COMMENT,CONDITION (1):  PO = LMT price,
COMMENT,CONDITION (2):  MO price is EQUAL to PO & MO is BETTER than CBOE market,
COMMENT,CONDITION (3):  NBBO is at least PENNY BETTER than MO,
COMMENT,CONDITION (4):  Away Exchange is at least PENNY better than MO,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.14:10:BOTR:N;AMEX:B:1.00:50:BOTR:N:A:1.30:50:BOTR:N;ISE:B:1.00:20:BOTR:N:A:1.40:20:BOTR:N A I,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
QUOTE,$MM2,2,1,00,100,2,1,50,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,2,100,2,1,20,100,2,1,50,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,2,$MM3EXCHANGE,$MM3EXECFIRM,NIT,063,ABC,*,$MM3EXCHANGE,$MM3,150,$CLASS1PRODUCT1,B,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,064,ABC,*,$MM3EXCHANGE,$MM3,150,$CLASS1PRODUCT1,S,2,1,15,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,063,ABC,*,0,10,1,140,1,2,1,15,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,064,ABC,*,0,10,1,140,1,2,1,15,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,063,ABC,*,$MM3EXCHANGE,$MM3EXCHANGE,10,$CLASS1PRODUCT1,B,2,1,14,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM3,$MM3,O,FALSE,C,C,2,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM3 enters an order from CMI,
LINKAGEORDERFILLV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,063,ABC,*,10,10,0,0,1,1,B,2,1,14,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,C,AMEX,TRUE,TRUE,Linkage Order Fill Report for c1,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,063,ABC,*,0,0,3,10,1,2,1,14,TRUE,TRUE,Order Fill Verification M3 ,
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,064,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,10,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM2,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,PO & MO TRADING RULE #2:
COMMENT,RULE:  MO can be priced WORSE than CBOE market without ANY limits,
COMMENT,CONDITION: PO = MKT,

COMMENT,SCENARIO 49.Verify that the inbound AIM Order with Auto-Link request is ACCEPTED & PROCESSED when PO is at MKT price and MO is WORSE than CBOE market WITHOUT ANY LIMITS,
COMMENT,CONDITION (1):  PO = MKT price,
COMMENT,CONDITION (2):  MO price is WORSE than PO  & WORSE than CBOE market,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.15:10:BOTR:N;AMEX:B:1.00:50:BOTR:N:A:1.25:50:BOTR:N;ISE:B:1.00:20:BOTR:N:A:1.35:20:BOTR:N A I,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
QUOTE,$MM2,2,1,00,100,2,1,50,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,2,100,2,1,20,100,2,1,50,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,2,$MM3EXCHANGE,$MM3EXECFIRM,NIT,065,ABC,*,$MM3EXCHANGE,$MM3,300,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,066,ABC,*,$MM3EXCHANGE,$MM3,300,$CLASS1PRODUCT1,S,2,1,25,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,065,ABC,*,0,200,1,100,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id,TRUE,TRUE,Quote Q2,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,065,ABC,*,0,10,1,190,1,2,1,25,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,066,ABC,*,0,110,1,190,1,2,1,25,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,065,ABC,*,$MM3EXCHANGE,$MM3EXCHANGE,10,$CLASS1PRODUCT1,B,2,1,15,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM3,$MM3,O,FALSE,C,C,2,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM3 enters an order from CMI,
LINKAGECANCELREPORTV2,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,065,ABC,*,10,0,0,10,1,B,2,1,15,O,C,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,NYSE,FALSE,TRUE,TRUE,Linkage Cancel Report,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,065,ABC,*,0,0,3,10,1,2,1,25,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,066,ABC,*,0,100,1,10,1,2,1,25,TRUE,TRUE,Order Fill Verification M3 ,
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,066,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,50,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,1,100,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM2,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,AIM Order with Auto-Link request & PO at MKT PRICE,

COMMENT,SCENARIO 50.Verify for the inbound AIM Order with Auto-Link request:  if PO is at MKT price and MO is at LMT price, then the PO must SWEEP & LINK AWAY up to a PENNY BETTER than MO price.Verify also that PO must NOT trade through the MO all the way until the market is not available,
COMMENT,CONDITION (1):  PO = MKT PRICE,
COMMENT,CONDITION (2):  MO = LMT price,
COMMENT,CONDITION (3):  After SWEEP & LINK AWAY, the TOB of CBOE is still not EMPTY,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,071,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter PO Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
QUOTE,$MM3,2,1,00,100,2,1,40,200,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,200,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,40,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM4,2,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,073,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,2,1,40,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,0,300,1,100,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id,TRUE,TRUE,Quote Q2,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,0,200,1,100,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,071,ABC,*,0,0,3,100,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,0,10,1,190,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,073,ABC,*,0,210,1,190,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,$MM4EXCHANGE,$MM4EXCHANGE,10,$CLASS1PRODUCT1,B,2,1,10,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM4,$MM4,O,FALSE,C,C,1,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM4 enters an order from CMI,
LINKAGEORDERFILLV2,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,10,5,0,0,1,1,B,2,1,10,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,C,NYSE,TRUE,TRUE,Linkage Order Fill Report for c1,
LINKAGECANCELREPORTV2,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,10,0,0,5,1,B,2,1,10,O,C,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,NYSE,FALSE,TRUE,TRUE,Linkage Cancel Report,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,0,5,1,5,1,2,1,10,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,072,ABC,*,0,0,3,5,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,073,ABC,*,0,205,1,5,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,073,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,205,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,40,200,200,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,200,2,1,00,1,200,2,1,40,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,SCENARIO 51.Verify for the inbound AIM Order with Auto-Link request:  if PO is at MKT price and MO is at LMT price, then the PO must SWEEP & LINK AWAY up to a PENNY BETTER than MO price.  PO trades with CBOE market and CBOE market becomes EMPTY on MO side.  PO trades with MO. Remainder of MO are CX-ed.,
COMMENT,CONDITION (1):  PO = MKT PRICE,
COMMENT,CONDITION (2):  MO = LMT price,
COMMENT,CONDITION (3):  After SWEEP & LINK AWAY, the TOB of CBOE becomes EMPTY,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth

ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,074,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter PO Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM4,2,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,076,ABC,*,$MM4EXCHANGE,$MM4,500,$CLASS1PRODUCT1,S,2,1,40,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,0,400,1,100,1,2,1,20,TRUE,TRUE,Order Fill Verification M3 ,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id,TRUE,TRUE,Quote Q2,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,0,300,1,100,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,074,ABC,*,0,0,3,100,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,0,10,1,290,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,076,ABC,*,0,210,1,290,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
LINKAGEORDERVERIFICATIONV2,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,$MM4EXCHANGE,$MM4EXCHANGE,10,$CLASS1PRODUCT1,B,2,1,10,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM4,$MM4,O,FALSE,C,C,1,A:AIS;,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM4 enters an order from CMI,
LINKAGECANCELREPORTV2,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,10,0,0,10,1,B,2,1,10,O,C,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,NYSE,FALSE,TRUE,TRUE,Linkage Cancel Report,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,075,ABC,*,0,0,3,10,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,076,ABC,*,0,200,1,10,1,2,1,40,TRUE,TRUE,Order Fill Verification M3 ,
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,076,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,200,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,1,0,00,100,0,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,0,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,AIM Order with Auto-Link request & PO and MO are at MKT PRICE,
COMMENT,SCENARIO 52.Verify for the inbound AIM Order with Auto-Link request:  if MO is at MKT price then irrespective of PO price (LMT or MKT) AIM Order MUST NOT SWEEP & LINK AWAY.Verify also that AIM Order must start at price BETTER than PO price that is ONE TICK BETTER than the NBBO on the opposite side of PO.  PO and MO trades immediately with each other,
COMMENT,CONDITION (1):  PO & MO = MKT price,
COMMENT,CONDITION (2):  TP ‘Auction Minimum Quoters’ = 3,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.00:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,
COMMENT,PART 1:
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,20,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,077,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter PO Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,100,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,2,100,2,1,20,100,2,1,30,TRUE,TRUE,Verify Book Depth
QUOTE,$MM3,2,1,00,200,2,1,50,200,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM4,3,$MM4EXCHANGE,$MM4EXECFIRM,NIT,078,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM4EXCHANGE,$MM4EXECFIRM,NIT,079,ABC,*,$MM4EXCHANGE,$MM4,400,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM4,$MM4,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,

ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,078,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,400,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,NIT,079,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,400,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,20,300,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,300,2,1,00,3,100,2,1,20,100,2,1,30,200,2,1,50,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
QUOTECANCEL,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,077,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,PO & MO TRADING RULE #5:
COMMENT,NBBO CHECK,
COMMENT,WHEN PO & MO (both with CUSTOMER origins) are at LMT price, then NBBO MUST BE CHECKED on both sides,
COMMENT,WHEN MO = MKT, then NBBO MUST BE CHECKED on OPPOSIDE side of PO,

COMMENT,SCENARIO 54.Verify for the inbound AIM Order with Auto-Link request: if there is a resting CUSTOMER order on PO side at the top of CBOE and MO price crosses CBOE quote on PO side then PO trades with MO at price EQUAL to NBBO on PO side. Verify also that the TP ‘Auction Minimum Quoters’ is NOT checked for Customer origin AIM with MO at LMT price,
COMMENT,CONDITION (1):  resting CUSTOMER order on PO side at the top of CBOE,
COMMENT,CONDITION (2):  MO price crosses CBOE quote on PO side
COMMENT,CONDITION (3):  PO = MKT & MO = LMT
COMMENT,CONDITION (4):  PO is EQUAL to CBOE market on MO side
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:5;4:5;1:5,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.05:10:BOTR:N:A:1.10:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,15,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,097,ABC,*,$MM2EXCHANGE,$MM2,55,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,2,$MM3EXCHANGE,$MM3EXECFIRM,NIT,098,ABC,*,$MM3EXCHANGE,$MM3,500,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,099,ABC,*,$MM3EXCHANGE,$MM3,500,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,098,ABC,*,0,0,3,500,1,2,1,05,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,099,ABC,*,0,0,3,500,1,2,1,05,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,097,ABC,*,55,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,







COMMENT,SCENARIO 55.Verify for the inbound AIM Order with Auto-Link request: if there is a resting CUSTOMER order on PO side at the top of CBOE and MO price crosses CBOE quote on PO side and validation for TP ‘Auction Min Quoters’ FAILS then PO & MO are immediately CANCELLED.
COMMENT,CONDITION (1):  resting CUSTOMER order on PO side at the top of CBOE 
COMMENT,CONDITION (2):  MO price crosses CBOE quote on PO side
COMMENT,CONDITION (3):  PO = MKT & MO = LMT
COMMENT,CONDITION (4):  PO is EQUAL to CBOE market on MO side
COMMENT,CONDITION (5):  input for TP ‘Auction Minimum Quoters’ is NOT valid to start AIM
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.05:100:BOTR:N:A:1.10:100:BOTR:N,TRUE,TRUE,Set Buy BOTR,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,15,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,100,ABC,*,$MM2EXCHANGE,$MM2,55,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,101,ABC,*,$MM3EXCHANGE,$MM3,500,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,102,ABC,*,$MM3EXCHANGE,$MM3,500,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,101,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,500,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,102,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,500,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,100,ABC,*,55,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,






COMMENT,SCENARIO 56.Verify for the inbound AIM Order with Auto-Link request: if there is a resting CUSTOMER order on PO side at the top of CBOE and MO price crosses CBOE quote on PO side and MO is at MKT price then PO triggers AIM auction. AIM ends and PO trades with MO at MO price.
COMMENT,CONDITION (1):  resting CUSTOMER order on PO side at the top of CBOE, 
COMMENT,CONDITION (2):  MO price crosses CBOE quote on PO side,
COMMENT,CONDITION (3):  MO price is EQUAL to CBOE quote on PO side,
COMMENT,CONDITION (4):  PO = LMT  & MO = MKT,
COMMENT,CONDITION (5):  PO is worse than NBBO on the SAME side,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:2;4:2;1:2,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.05:100:BOTR:N:A:1.10:100:BOTR:N,TRUE,TRUE,Set Buy BOTR,
COMMENT,PART 1:
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,15,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,103,ABC,*,$MM2EXCHANGE,$MM2,55,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,104,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,04,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,105,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,104,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,105,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,103,ABC,*,55,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,


COMMENT,PART 2:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:1;4:1;1:1,TRUE,TRUE,Set Auction Minimum Quoters
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
CLEARALLCALLBACKS,$MM3,
CLEARALLCALLBACKS,$MM4,
CLEARALLCALLBACKS,$SA1,
QUOTE,$MM1,2,1,00,100,2,1,15,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,100,100,TRUE,TRUE,Current Market Query,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,100,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,106,ABC,*,$MM2EXCHANGE,$MM2,55,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth

INTERNALIZEDORDER,$MM3,3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,107,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,04,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM3EXCHANGE,$MM3EXECFIRM,NIT,108,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM3,$MM3,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,TRUE,TRUE,RFP Query,
PAUSE,10000,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,107,ABC,*,0,0,3,100,1,2,1,04,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,NIT,108,ABC,*,0,0,3,100,1,2,1,04,TRUE,TRUE,Order Fill Verification M3 ,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,15,155,100,TRUE,TRUE,Current Market Query,
PAUSE,2000,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,1,155,2,1,00,1,100,2,1,15,TRUE,TRUE,Verify Book Depth
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,106,ABC,*,55,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,





COMMENT,AIM Order with Auto-Link request during LOCKED & INVERTED MARKET, 
COMMENT,PART 1:INVERTED MARKET & resting NON-CUSTOMER order at CBOE TOP on PO side,
COMMENT,PRE-SETTING:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:0.00:0:BOTR:N:A:0.00:0:BOTR:N,TRUE,TRUE,Set Buy BOTR,
QUOTE,$MM1,2,1,00,100,2,1,25,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,25,100,100,TRUE,TRUE,Current Market Query,
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,109,ABC,*,$MM2EXCHANGE,$MM2,150,$CLASS1PRODUCT1,B,2,1,20,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,M,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,20,2,1,25,150,100,TRUE,TRUE,Current Market Query,
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.10:10:BOTR:N:A:1.15:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,

COMMENT,SCENARIO 57.Verify for the behavior for the inbound AIM Order with Auto-Link request during INVERTED market where both PO & MO is CUSTOMER orders,
COMMENT,CONDITION (1):  resting NON-CUSTOMER order on PO side at the top of CBOE, 
COMMENT,CONDITION (2):  PO price is BETTER than CBOE market,
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters

INTERNALIZEDORDER,$MM1,2,$MM1EXCHANGE,$MM1EXECFIRM,NIT,110,ABC,*,$MM1EXCHANGE,$MM1,150,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM1,$MM1,C,FALSE,W,C,1,A:AIS;,-,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,111,ABC,*,$MM1EXCHANGE,$MM1,150,$CLASS1PRODUCT1,S,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Internalized Order,
PAUSE,2000,
LINKAGEORDERVERIFICATIONV2,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,110,ABC,*,$MM1EXCHANGE,$MM1EXCHANGE,10,$CLASS1PRODUCT1,B,2,1,15,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,NYSE,$MM1,$MM1,O,FALSE,C,C,2,-,-,$SESSION1,$SA1,$CLASS1,TRUE,TRUE,MM1 enters an order from CMI,
PAUSE,5000,
LINKAGEORDERFILLV2,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,110,ABC,*,10,10,0,0,1,1,B,2,1,15,$SESSION1,$SA1,$CLASS1,$CLASS1PRODUCT1,C,AMEX,TRUE,TRUE,Linkage Order Fill Report for c1,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,110,ABC,*,0,50,1,100,1,2,1,25,TRUE,TRUE,Order Fill Verification M3 ,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,25,User Assigned Id,TRUE,TRUE,Quote Q2,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,110,ABC,*,0,10,1,40,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,111,ABC,*,0,110,1,40,1,2,1,30,TRUE,TRUE,Order Fill Verification M3 ,
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NIT,111,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,110,TRUE,TRUE,Comment
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,20,1,0,00,150,0,TRUE,TRUE,Current Market Query,
QUOTE,$MM1,2,1,00,100,2,1,25,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open W_STOCK product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,20,2,1,25,150,100,TRUE,TRUE,Current Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Cancel the quotes,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,109,ABC,*,150,$SESSION1,1,TRUE,TRUE,Cancel Order from CMI,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,

COMMENT,CONTINUE CASE BELOW – PART 2:
COMMENT,PART 2:INVERTED MARKET & resting CUSTOMER order at CBOE TOP on PO side,
COMMENT,PRE-SETTING FROM PART 1:
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,-8:3;4:3;1:3,TRUE,TRUE,Set Auction Minimum Quoters
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:0.00:0:BOTR:N:A:0.00:0:BOTR:N,TRUE,TRUE,Set Buy BOTR,
QUOTE,$MM1,2,1,00,100,2,1,25,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open class1 product,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,00,2,1,25,100,100,TRUE,TRUE,Current Market Query,
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,NIT,115,ABC,*,$MM2EXCHANGE,$MM2,150,$CLASS1PRODUCT1,B,2,1,20,D,01/01/2004 6:00:00.0,1,2,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,M,C,1,-,-,$SESSION1,TRUE,TRUE,Enter Order,
CURRENTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,2,1,20,2,1,25,150,100,TRUE,TRUE,Current Market Query,
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:1.10:10:BOTR:N:A:1.15:10:BOTR:N,TRUE,TRUE,Set Buy BOTR,

COMMENT,Test complete - Log off users,
TRADERLOGOUT,$MM1,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM2,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM3,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM4,TRUE,TRUE,Valid Logout,
SALOGOUT,$SA1,TRUE,TRUE,Valid Logout,
ENDPOINT,
PRINTOUTPUTSUMMARY,
TERMINATE,



