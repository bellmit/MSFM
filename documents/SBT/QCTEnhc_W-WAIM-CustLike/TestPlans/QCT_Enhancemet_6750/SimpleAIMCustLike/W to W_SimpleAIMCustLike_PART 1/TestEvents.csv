
TESTSUITENAME,AIM SIMPLE part 1 W ORIGINS for PO and MO,
PRINTOUTPUTHEADING,
STARTPOINT,


COMMENT,Log in HD User and Perform Test Requirements,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Log in the HD User,
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,2,PRODUCT,$HYBRIDCLASSLIST,TRUE,TRUE,Select Reporting Class,
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASSAS,2,PRODUCT,$HYBRIDCLASSLIST2,TRUE,TRUE,Select Reporting Class,
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASSAT,2,PRODUCT,$HYBRIDCLASSLIST4,TRUE,TRUE,Select Reporting Class,
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Verify Session is Open,
VERIFYUMAEQUALDISTRIBUTIONWEIGHTFORDPM,$SA1,$SESSION1,$CLASS1,1,TRUE,TRUE,Verify UMA equal distribution weight for DPM: IF THIS ATOM FAILS YOU CANNOT RESET IT UNTIL THE NEXT BUSINESS DAY,
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API MM User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,M,1,Automated API BD User,FALSE,TRUE,TRUE,Comment,
CREATEUSER,$SA1,$HOMT1,$HOMT1EXCHANGE,$HOMT1EXECFIRM,H,1,Automated API BD User,FALSE,TRUE,TRUE,Comment,

VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment...,
VERIFYUSEREXISTENCE,$SA1,$MM2EXCHANGE,$MM2,M,TRUE,TRUE,TRUE,Comment...,
VERIFYUSEREXISTENCE,$SA1,$HOMT1EXCHANGE,$HOMT1,H,TRUE,TRUE,TRUE,Comment...,


COMMENT,Log in Trader Users,
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Logging in,
TRADERLOGIN,$MM2,$MM2,$CASANDPORT,TRUE,TRUE,Logging in,
OMTLOGIN,$HOMT1,$HOMT1,$CASANDPORT,TRUE,TRUE,Logging in,


COMMENT,Set/Verify Needed Routing Properties

COMMENT, REMOVE ROUTING PROPERTIES FOR SIMPLE AND COMPLEX ORDER PRIOR OF SETTING THEM TO AVOID OVERRIDING,

REMOVEALLRESTRICTEDSERIESCLASS,$SA1,$SESSION1,TRUE,TRUE,Comment...,
REMOVEALLELIGIBLEPDPM,$SA1,$SESSION1,TRUE,TRUE,Comment...,
REMOVEALLCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,TRUE,TRUE,Remove COA Eligible
NREMOVEALLCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$POSTSTATIONCLASS1,TRUE,TRUE,Remove COA Eligible
REMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove Reasonability Edit
REMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,TRUE,TRUE,Remove Reasonability Edit
NREMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$POSTSTATIONCLASS1,TRUE,TRUE,Verify Reasonability Edit
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,SIMPLE,TRUE,TRUE,Remove All Volume check deviation,
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,COMPLEX,TRUE,TRUE,Remove All Volume check deviation,
NREMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$POSTSTATIONCLASS1,SIMPLE,TRUE,TRUE,Remove All Volume check deviation,
NREMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$POSTSTATIONCLASS1,COMPLEX,TRUE,TRUE,Remove All Volume check deviation,
REMOVEHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,TRUE,TRUE,Remove HelpDesk Default Destination
REMOVEHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,TRUE,TRUE,Remove HelpDesk Default Destination

REMOVEALLRESTRICTEDSERIESCLASS,$SA1,$SESSION1,TRUE,TRUE,Comment...,
REMOVEALLELIGIBLEPDPM,$SA1,$SESSION1,TRUE,TRUE,Comment...,
REMOVEALLCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,TRUE,TRUE,Remove COA Eligible
REMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,TRUE,TRUE,Remove Reasonability Edit
REMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,TRUE,TRUE,Remove Reasonability Edit
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,SIMPLE,TRUE,TRUE,Remove All Volume check deviation,
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,COMPLEX,TRUE,TRUE,Remove All Volume check deviation,
REMOVEHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,TRUE,TRUE,Remove HelpDesk Default Destination
REMOVEHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,TRUE,TRUE,Remove HelpDesk Default Destination

REMOVEALLRESTRICTEDSERIESCLASS,$SA1,$SESSION1,TRUE,TRUE,Comment...,
REMOVEALLELIGIBLEPDPM,$SA1,$SESSION1,TRUE,TRUE,Comment...,
REMOVEALLCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,TRUE,TRUE,Remove COA Eligible
REMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,TRUE,TRUE,Remove Reasonability Edit
REMOVEALLREASONABILITYEDIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,TRUE,TRUE,Remove Reasonability Edit
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,SIMPLE,TRUE,TRUE,Remove All Volume check deviation,
REMOVEALLVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,COMPLEX,TRUE,TRUE,Remove All Volume check deviation,
REMOVEHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,TRUE,TRUE,Remove HelpDesk Default Destination
REMOVEHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,TRUE,TRUE,Remove HelpDesk Default Destination

REMOVEFIRMCORRCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$DEFAULT,$CLASS1,TRUE,TRUE,Remove Firm Volume Limit
REMOVEFIRMCORRCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$DEFAULT,$STRATEGYCLASS1,TRUE,TRUE,Remove Firm Volume Limit


COMMENT,Step 2: Class is OHS Enabled; 
OHSENABLE,$SA1,$CLASS1SYM,TRUE,TRUE,Verify Class is OHS enabled,
OHSENABLE,$SA1,$CLASSAS1SYM,TRUE,TRUE,Verify Class is OHS enabled,
OHSENABLE,$SA1,$CLASSAT1SYM,TRUE,TRUE,Verify Class is OHS enabled,


COMMENT,Set Help Desk Default Destination,
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,$HOMT1,TRUE,TRUE,Set Helpdesk Default Destination

COMMENT,FIRM VOLUME LIMIT FOR SIMPLE ORDERS,
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,4999,TRUE,TRUE,Set Firm Volume Limit
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,4999,TRUE,TRUE,Set Firm Volume Limit
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,4999,TRUE,TRUE,Set Firm Volume Limit


COMMENT,FIRM VOLUME LIMIT FOR STRATEGY ORDERS,
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,4999,TRUE,TRUE,Set Firm Volume Limit
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,4999,TRUE,TRUE,Set Firm Volume Limit
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,4999,TRUE,TRUE,Set Firm Volume Limit


COMMENT,FIRM CLASS PAR DEFAULT DESTINATION FOR SIMPLE ORDERS,
SETFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination
SETFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination
SETFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination


COMMENT,FIRM CLASS PAR DEFAULT DESTINATION FOR STRATEGY ORDERS,
SETFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination
SETFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination
SETFIRMCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination

COMMENT, VOLUME DEVIATION PROPERTY FOR SIMPLE ORDER,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Set Volume check deviation,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAS1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Set Volume check deviation,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASSAT1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Set Volume check deviation,


COMMENT, VOLUME DEVIATION PROPERTY FOR COMPLEX ORDER,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,4999,All,$TE,COMPLEX,TRUE,TRUE,Set Volume check deviation,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,*,1,4999,All,$TE,COMPLEX,TRUE,TRUE,Set Volume check deviation,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,*,1,4999,All,$TE,COMPLEX,TRUE,TRUE,Set Volume check deviation,


COMMENT, VOLUME DEVIATION PROPERTY FOR COMPLEX ORDER,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,4999,All,$TE,DN,TRUE,TRUE,Set Volume check deviation,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAS1,*,1,4999,All,$TE,DN,TRUE,TRUE,Set Volume check deviation,
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASSAT1,*,1,4999,All,$TE,DN,TRUE,TRUE,Set Volume check deviation,


COMMENT,SESSION CLASS PAR ROUTING PROPERTY,  
SETSESSIONCLASSPARROUTING,$SA1,$SESSION1,$CLASS1,$WORKSTATION1,TRUE,TRUE,Set Session Class Par Routing Parameters,
SETSESSIONCLASSPARROUTING,$SA1,$SESSION1,$CLASSAS1,$WORKSTATION1,TRUE,TRUE,Set Session Class Par Routing Parameters,
SETSESSIONCLASSPARROUTING,$SA1,$SESSION1,$CLASSAT1,$WORKSTATION1,TRUE,TRUE,Set Session Class Par Routing Parameters,

RESETMOCTESTINGFLAGFORCLASS,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,Reset MOC Flag For A Class
SETFIRMCORRCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$DEFAULT,$CLASS1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination
SETFIRMCORRCLASSPARDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$DEFAULT,$STRATEGYCLASS1,$WORKSTATION1,TRUE,TRUE,Set Par Default Destination

SETDISABLELINKAGEONPAR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Remove Session Class Par Routing Parameters
SETDISABLELINKAGEONPAR,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Remove Session Class Par Routing Parameters


COMMENT,Put the products into the proper state FOR W_MAIN,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Set Product to CLOSE,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Set Product to PER-OPEN,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Set Product to OPENINGROTATION,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Verify test product is in OpeningRotation,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASSAS1PRODUCT1,$CLASSAS1,1,TRUE,TRUE,Set Product to CLOSE,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASSAS1PRODUCT1,$CLASSAS1,2,TRUE,TRUE,Set Product to PER-OPEN,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASSAS1PRODUCT1,$CLASSAS1,3,TRUE,TRUE,Set Product to OPENINGROTATION,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASSAS1PRODUCT1,3,TRUE,TRUE,Verify test product is in OpeningRotation,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASSAT1PRODUCT1,$CLASSAT1,1,TRUE,TRUE,Set Product to CLOSE,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASSAT1PRODUCT1,$CLASSAT1,2,TRUE,TRUE,Set Product to PER-OPEN,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASSAT1PRODUCT1,$CLASSAT1,3,TRUE,TRUE,Set Product to OPENINGROTATION,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASSAT1PRODUCT1,3,TRUE,TRUE,Verify test product is in OpeningRotation,


COMMENT,Set Verify Trading Properties CLASS1,
SETALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Set Allocation Strategies,
VERIFYALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Verify Allocation Strategies,
SETALLOWMARKETORDER,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Set Allow Market Order,
VERIFYALLOWMARKETORDER,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Verify Allow Market Order,
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,1:TRUE;4:TRUE;-4:TRUE;5:TRUE;-8:TRUE,TRUE,TRUE,Enable Auction,
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,1:TRUE;4:TRUE;-4:TRUE;5:TRUE;-8:TRUE,TRUE,TRUE,Verify Auction Enablement,
SETAUCTIONMINORDERSIZEFORTICKSABOVENBBO,$SA1,$SESSION1,$CLASS1,1:50-1,TRUE,TRUE,Set Ticks Above NBBO
VERIFYAUCTIONMINORDERSIZEFORTICKSABOVENBBO,$SA1,$SESSION1,$CLASS1,1:50-1,TRUE,TRUE,Verify Ticks Above NBBO
SETAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASS1,1:1,TRUE,TRUE,Set Price Increment
VERIFYAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASS1,1:1,TRUE,TRUE,Verify Price Increment
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,1:1;4:1;5:1;2:0,TRUE,TRUE,Set Auction Min Quoters,
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASS1,1:1;4:1;5:1;2:0,TRUE,TRUE,Verify Auction Min Quoters,
SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASS1,1:1-99999;4:1-99999;5:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASS1,1:1-99999;4:1-99999;5:1-99999,TRUE,TRUE,Verify Auction Min Max OrderSize,
SETAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASS1,1:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
VERIFYAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASS1,1:0,TRUE,TRUE,Verify Auction Order Ticks Away from NBBO,
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASS1,1:1,TRUE,TRUE,Set Auction Receiver Types,
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASS1,1:1,TRUE,TRUE,Verify Auction Receiver Types,
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,1:15000-15000;4:15000-15000;5:15000-15000,TRUE,TRUE,Set Auction Time To Live 13 - 15 seconds,
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,1:15000-15000;4:15000-15000;5:15000-15000,TRUE,TRUE,Verify Auction Time To Live 13 - 15 seconds,
SETUMASPLITRATE,$SA1,$SESSION1,$CLASS1,.5,TRUE,TRUE,Set UMA Split Rate,
VERIFYUMASPLITRATE,$SA1,$SESSION1,$CLASS1,.5,TRUE,TRUE,Verify UMA Split Rate,
SETINTERNALIZATIONGUARANTEEDPERCENTAGE,$SA1,$SESSION1,$CLASS1,1:0-1:1.00;1:1-2:0.50;1:2-99999:0.40,TRUE,TRUE,Set Internalization Guaranteed Percentage,
VERIFYINTERNALIZATIONGUARANTEEDPERCENTAGE,$SA1,$SESSION1,$CLASS1,1:0-1:1.00;1:1-2:0.50;1:2-99999:0.40,TRUE,TRUE,Verify Internalization Guaranteed Percentage,
SETAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASS1,500,TRUE,TRUE,Set AON Solicitation Minimum quantity,
VERIFYAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASS1,500,TRUE,TRUE,Verify AON Solicitation Minimum quantity,
SETSTRATEGYEPW,$SA1,$SESSION1,$CLASS1,0.0-100.0:100.0,TRUE,TRUE,Comment...,
SETSTRATEGYEPW,$SA1,$SESSION1,$STRATEGYCLASS1,0.0-100.0:100.0,TRUE,TRUE,Comment...,


COMMENT,Set Verify Trading Properties for CLASSAS1,
SETALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASSAS1,5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Set Allocation Strategies,
VERIFYALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASSAS1,5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Verify Allocation Strategies,
SETALLOWMARKETORDER,$SA1,$SESSION1,$CLASSAS1,TRUE,TRUE,TRUE,Set Allow Market Order,
VERIFYALLOWMARKETORDER,$SA1,$SESSION1,$CLASSAS1,TRUE,TRUE,TRUE,Verify Allow Market Order,
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASSAS1,1:TRUE;-4:TRUE;-8:TRUE,TRUE,TRUE,Enable Auction,
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASSAS1,1:TRUE;-4:TRUE;-8:TRUE,TRUE,TRUE,Verify Auction Enablement,
SETAUCTIONMINORDERSIZEFORTICKSABOVENBBO,$SA1,$SESSION1,$CLASSAS1,1:50-1,TRUE,TRUE,Set Ticks Above NBBO
VERIFYAUCTIONMINORDERSIZEFORTICKSABOVENBBO,$SA1,$SESSION1,$CLASSAS1,1:50-1,TRUE,TRUE,Verify Ticks Above NBBO
SETAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASSAS1,1:5,TRUE,TRUE,Set Price Increment
VERIFYAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASSAS1,1:5,TRUE,TRUE,Verify Price Increment

SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASSAS1,1:0;5:1,TRUE,TRUE,Set Auction Min Quoters,
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASSAS1,1:0;5:1,TRUE,TRUE,Verify Auction Min Quoters,


SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASSAS1,1:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASSAS1,1:1-99999,TRUE,TRUE,Verify Auction Min Max OrderSize,
SETAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASSAS1,1:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
VERIFYAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASSAS1,1:0,TRUE,TRUE,Verify Auction Order Ticks Away from NBBO,
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASSAS1,1:1,TRUE,TRUE,Set Auction Receiver Types,
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASSAS1,1:1,TRUE,TRUE,Verify Auction Receiver Types,
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASSAS1,1:15000-15000,TRUE,TRUE,Set Auction Time To Live 13 - 15 seconds,
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASSAS1,1:15000-15000,TRUE,TRUE,Verify Auction Time To Live 13 - 15 seconds,
SETUMASPLITRATE,$SA1,$SESSION1,$CLASSAS1,.5,TRUE,TRUE,Set UMA Split Rate,
VERIFYUMASPLITRATE,$SA1,$SESSION1,$CLASSAS1,.5,TRUE,TRUE,Verify UMA Split Rate,
SETAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASS1,500,TRUE,TRUE,Set AON Solicitation Minimum quantity,
VERIFYAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASS1,500,TRUE,TRUE,Verify AON Solicitation Minimum quantity,



COMMENT,Set Verify Trading Properties CLASSAT1,
SETALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASSAT1,5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Set Allocation Strategies,
VERIFYALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASSAT1,5=1;4;30;31;32 6=1;4;31;32,TRUE,TRUE,Verify Allocation Strategies,
SETALLOWMARKETORDER,$SA1,$SESSION1,$CLASSAT1,TRUE,TRUE,TRUE,Set Allow Market Order,
VERIFYALLOWMARKETORDER,$SA1,$SESSION1,$CLASSAT1,TRUE,TRUE,TRUE,Verify Allow Market Order,
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASSAT1,1:TRUE;4:TRUE;-4:TRUE;5:TRUE;-8:TRUE,TRUE,TRUE,Enable Auction,
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASSAT1,1:TRUE;4:TRUE;-4:TRUE;5:TRUE;-8:TRUE,TRUE,TRUE,Verify Auction Enablement,
SETAUCTIONMINORDERSIZEFORTICKSABOVENBBO,$SA1,$SESSION1,$CLASSAT1,1:50-1,TRUE,TRUE,Set Ticks Above NBBO
VERIFYAUCTIONMINORDERSIZEFORTICKSABOVENBBO,$SA1,$SESSION1,$CLASSAT1,1:50-1,TRUE,TRUE,Verify Ticks Above NBBO
SETAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASSAT1,1:1,TRUE,TRUE,Set Price Increment
VERIFYAUCTIONMINPRICEINCREMENT,$SA1,$SESSION1,$CLASSAT1,1:1,TRUE,TRUE,Verify Price Increment
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASSAT1,1:1;4:1;5:1;2:0,TRUE,TRUE,Set Auction Min Quoters,
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$CLASSAT1,1:1;4:1;5:1;2:0,TRUE,TRUE,Verify Auction Min Quoters,
SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASSAT1,1:1-99999;4:1-99999;5:1-99999,TRUE,TRUE,Set Auction Min Max OrderSize,
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$CLASSAT1,1:1-99999;4:1-99999;5:1-99999,TRUE,TRUE,Verify Auction Min Max OrderSize,
SETAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASSAT1,1:0,TRUE,TRUE,Set Auction Order Ticks Away from NBBO,
VERIFYAUCTIONORDERTICKSAWAYFROMNBBO,$SA1,$SESSION1,$CLASSAT1,1:0,TRUE,TRUE,Verify Auction Order Ticks Away from NBBO,
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASSAT1,1:1,TRUE,TRUE,Set Auction Receiver Types,
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$CLASSAT1,1:1,TRUE,TRUE,Verify Auction Receiver Types,
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASSAT1,1:15000-15000;4:15000-15000;5:15000-15000,TRUE,TRUE,Set Auction Time To Live 13 - 15 seconds,
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASSAT1,1:15000-15000;4:15000-15000;5:15000-15000,TRUE,TRUE,Verify Auction Time To Live 13 - 15 seconds,
SETUMASPLITRATE,$SA1,$SESSION1,$CLASSAT1,.5,TRUE,TRUE,Set UMA Split Rate,
VERIFYUMASPLITRATE,$SA1,$SESSION1,$CLASSAT1,.5,TRUE,TRUE,Verify UMA Split Rate,
SETINTERNALIZATIONGUARANTEEDPERCENTAGE,$SA1,$SESSION1,$CLASSAT1,1:0-1:1.00;1:1-2:0.50;1:2-99999:0.40,TRUE,TRUE,Set Internalization Guaranteed Percentage,
VERIFYINTERNALIZATIONGUARANTEEDPERCENTAGE,$SA1,$SESSION1,$CLASSAT1,1:0-1:1.00;1:1-2:0.50;1:2-99999:0.40,TRUE,TRUE,Verify Internalization Guaranteed Percentage,
SETAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASSAT1,500,TRUE,TRUE,Set AON Solicitation Minimum quantity,
VERIFYAONSOLICITATIONMINIMUMQUANTITY,$SA1,$SESSION1,$CLASSAT1,500,TRUE,TRUE,Verify AON Solicitation Minimum quantity,



COMMENT,Set up Subscriptions for the Class in W_MAIN:
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASSAS1,$CLASSAS1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASSAT1,$CLASSAT1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBECURRENTMARKET,$MM2,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBECURRENTMARKET,$MM2,$SESSION1,$CLASSAS1,$CLASSAS1PRODUCT1,TRUE,TRUE,Subscribe for CurrentMarket,
SUBSCRIBERECAP,$MM1,$SESSION1,$CLASS1PRODUCT1,TRUE,TRUE,Event Comment...,
SUBSCRIBERECAP,$MM1,$SESSION1,$CLASSAS1PRODUCT1,TRUE,TRUE,Event Comment...,
SUBSCRIBERECAP,$MM1,$SESSION1,$CLASSAT1PRODUCT1,TRUE,TRUE,Event Comment...,
SUBSCRIBERECAP,$MM2,$SESSION1,$CLASS1PRODUCT1,TRUE,TRUE,Event Comment...,
SUBSCRIBERECAP,$MM2,$SESSION1,$CLASSAS1PRODUCT1,TRUE,TRUE,Event Comment...,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,1,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM2,$SESSION1,$CLASS1,1,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,5,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,4,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASSAS1,1,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM2,$SESSION1,$CLASSAS1,1,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASSAS1,4,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASSAS1,5,TRUE,TRUE,Subscribe Auction
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASSAT1,1,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM2,$SESSION1,$CLASSAT1,1,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASSAT1,4,TRUE,TRUE,Subscribe Auction,
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASSAT1,5,TRUE,TRUE,Subscribe Auction,


COMMENT,Enter Quote to open the product,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open the 1st test product,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open the 2nd test product,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASSAS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Quote to open the 2nd test product,
WAITFORPRODUCTSTATECHANGE,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,90000,TRUE,TRUE,WAIT FOR PRODUCT STATE CHANGE,
WAITFORPRODUCTSTATECHANGE,$SA1,$SESSION1,$CLASSAS1PRODUCT1,$CLASSAS1,4,90000,TRUE,TRUE,WAIT FOR PRODUCT STATE CHANGE,
WAITFORPRODUCTSTATECHANGE,$SA1,$SESSION1,$CLASSAT1PRODUCT1,$CLASSAT1,4,90000,TRUE,TRUE,WAIT FOR PRODUCT STATE CHANGE,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Verify product is open,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASSAS1PRODUCT1,4,TRUE,TRUE,Verify product is open,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASSAT1PRODUCT1,4,TRUE,TRUE,Verify product is open,
QUOTECANCEL,$MM1,$SESSION1,$CLASSAT1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
QUOTECANCEL,$MM1,$SESSION1,$CLASSAS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,


 
COMMENT,2 AIM AUCTION: SCENARIOS WHERE CBOE IS NBBO ON BOTH SIDES,
UPDATEBOTR,$SA1,$SESSION1,$CLASSAS1,$CLASSAS1PRODUCT1,B,0.90,ISE=100,TRUE,TRUE,Set Buy BOTR, 
UPDATEBOTR,$SA1,$SESSION1,$CLASSAS1,$CLASSAS1PRODUCT1,S,1.30,ISE=100,TRUE,TRUE,Set Sell BOTR,
  
 
COMMENT,2.1 If the MO price is WITHIN/INSIDE the NBBO then PO trades with MO at the MO price,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0001,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0002,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,15,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,

RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,U,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0001,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0002,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,MM1'S Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,2.2 If the MO price is AT the NBBO on the OPPOSITE side of PO and there is no resting Customer Order on the OPPOSITE side of PO then PO trades with MO at the MO price,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0003,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0004,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,U,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0003,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0004,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,



COMMENT,2.3 If the MO price is AT the NBBO on the OPPOSITE side of PO and there is a resting Customer Order on the OPPOSITE side of PO then the AIM Order is handled as follows,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
COMMENT,2.3.1 If A:AIM then both PO and MO are CANCELLED,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0005,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0005,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,200,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0006,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0007,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,U,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0006,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0007,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0005,ABC,*,100,$SESSION1,1,TRUE,TRUE,Event Comment...,





COMMENT,2.3.2 If A:AIR then MO is CANCELLED and PO comes back to the system as a normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,25,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0008,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0008,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0009,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,A:AIR;REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0010,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,

RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,U,100,1,0,00,FALSE,TRUE,RFP Query,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,2,1,20,FALSE,TRUE,RFP Query,

ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0010,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
PAUSE,1500
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0009,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MM2'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0008,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,


TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,25,TRUE,TRUE,Current Market V3 Best Market Query,

QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,2.4 If the MO price is OUTSIDE the NBBO on the OPPOSITE side of PO then the AIM Order is handled as follows
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
COMMENT,2.4.1 If A:AIM then both PO and MO are CANCELLED,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0011,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0012,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,U,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0011,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0012,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,2.4.2 If A:AIR then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0013,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIR;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0014,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,U,100,1,0,00,FALSE,TRUE,RFP Query,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,2,1,20,FALSE,TRUE,RFP Query,

ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0014,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
PAUSE,15000,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0013,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MM2'S Order FILL Verification,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id,TRUE,TRUE,MM1'S QUOTE FILL VERIFICATION...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,0,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,2.5 If MO price is MKT  (i.e. Auto Match) and if the TRADE price is AT the NBBO on the OPPOSITE side of PO and there is a resting Customer Order on the OPPOSITE side of PO then AIM auction starts and PO trades with MO and the responses based on End of Auction Allocation Specifications,
COMMENT,2.5.1 If PO has a Limit Price,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0017,ABC,*,$MM1EXCHANGE,$MM1,50,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0017,ABC,*,$MM1EXCHANGE,$MM1,50,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,50,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,150,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,3,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0018,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0019,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,3,0,0,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,TRUE,TRUE,RFP Query,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
PAUSE,20000,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,75,25,1,2,1,20,User Assigned Id,TRUE,TRUE,MM2'S QUOTE FILL VERIFICATION...,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0019,ABC,*,0,75,1,25,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0018,ABC,*,0,0,3,100,3,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0017,ABC,*,0,0,3,50,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,75,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,2.5.2 If PO is at Market Price then ASP is at OPPOSITE side NBBO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0020,ABC,*,$MM1EXCHANGE,$MM1,50,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0020,ABC,*,$MM1EXCHANGE,$MM1,50,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,50,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,150,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,3,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0021,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0022,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,TRUE,TRUE,RFP Query,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
PAUSE,20000,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0021,ABC,*,0,0,3,100,3,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0020,ABC,*,0,0,3,50,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0022,ABC,*,0,75,1,25,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,75,25,1,2,1,20,User Assigned Id,TRUE,TRUE,MM2'S QUOTE FILL VERIFICATION...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,75,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,




COMMENT,2.6 If the MO price is AT the NBBO on the SAME side of PO (i.e. Crosses / Locks) and there is no resting Customer Order on the SAME side of PO then PO trades with MO at the SAME side market price,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0023,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,1,20,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0024,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0023,ABC,*,0,0,3,100,1,2,1,0,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0024,ABC,*,0,0,3,100,1,2,1,0,TRUE,TRUE,MM1'S Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,





COMMENT,2.7 If the MO price is AT the NBBO on the SAME side of PO (i.e. Crosses / Locks) and there is a resting Customer Order on the SAME side of PO then PO trades with MO at ONE AUCTION TICK BETTER than the SAME side market price,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0030,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0030,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0031,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0032,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0031,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM1EXCHANGE,$MM2EXECFIRM,AMP,0032,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
PAUSE,5000,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0030,ABC,*,100,$SESSION1,1,TRUE,TRUE,Event Comment...,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,





COMMENT,2.8 If the MO price is AT the NBBO on the SAME side of PO (i.e. Crosses / Locks) and there is a resting Customer Order on the SAME side of PO then PO attempts to trade with MO at ONE AUCTION TICK BETTER than the SAME side market price and if there is a resting Customer Order on the OPPOSITE side of PO at that ONE AUCTION TICK BETTER price then the AIM Order is handled as follows.
COMMENT,Note: For this Test Case only, in the SA GUI's 'Product Definition' window the 'Product Description' of the class being tested must be set to either 'EQUITY D PENNIES ALL' OR 'EQUITY D PENNIES TO 3.00' such that pricing in pennies is allowed,
COMMENT,2.8.1 
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0040,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0040,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0041,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0041,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
PAUSE,15000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,01,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0043,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0044,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,S,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASSAT1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0043,ABC,*,$SESSION1,$CLASSAT1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED If this test is failing here then use A class if in iqod the order is getting filled,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0044,ABC,*,$SESSION1,$CLASSAT1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED If this test is failing here then use A class if in iqod the order is getting filled,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0040,ABC,*,100,$SESSION1,1,TRUE,TRUE,Event Comment...,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0041,ABC,*,100,$SESSION1,1,TRUE,TRUE,Event Comment...,
QUOTECANCEL,$MM1,$SESSION1,$CLASSAT1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
 



COMMENT,2.8.2 If A:AIR then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0050,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0050,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0051,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0051,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
PAUSE,15000,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,01,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0052,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,B,2,1,01,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,A:AIR;REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0053,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,S,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASSAT1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0053,ABC,*,$SESSION1,$CLASSAT1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
ORDERFILLVERIFICATION,$MM2,$MM1EXCHANGE,$MM2EXECFIRM,AMP,0052,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0051,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0050,ABC,*,100,$SESSION1,1,TRUE,TRUE,Event Comment...,
QUOTECANCEL,$MM1,$SESSION1,$CLASSAT1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,




COMMENT,2.9 If the MO price is OUTSIDE the NBBO on the SAME side of PO (i.e. Crosses / Locks) and there is no resting Customer Order on the SAME side of PO then PO trades with MO at the SAME side market price,
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0060,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0061,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM1EXCHANGE,$MM2EXECFIRM,AMP,0060,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM1EXCHANGE,$MM2EXECFIRM,AMP,0061,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,MM1'S Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,2.10 If the MO price is OUTSIDE the NBBO on the SAME side of PO (i.e. Crosses / Locks) and there is a resting Customer Order on the SAME side of PO then PO trades with MO at ONE AUCTION TICK BETTER than the SAME side market price
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,	
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,MM User Enters a Quote,
QUOTEQUERY,$MM1,2,1,00,100,2,1,2,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Verify MM User Enters a Quote,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0070,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0070,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0071,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,2,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0072,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,1,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM1EXCHANGE,$MM2EXECFIRM,AMP,0071,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,AMP,0072,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMP,0070,ABC,*,100,$SESSION1,1,TRUE,TRUE,Event Comment...,






COMMENT,Scenario 2.11 If the MO price is OUTSIDE the NBBO on the SAME side of PO (i.e. Crosses / Locks) and there is a resting Customer Order on the SAME side of PO then PO attempts to trade with MO at ONE AUCTION TICK BETTER than the SAME side market price and if there is a resting Customer Order on the OPPOSITE side of PO at that ONE AUCTION TICK BETTER price then the AIM Order is handled as follows
COMMENT,Scenario 2.11.1 If A:AIM then both PO and MO are CANCELLED
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0001,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0001,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0002,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0002,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
PAUSE,15000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,01,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0003,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0004,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASSAT1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0003,ABC,*,$SESSION1,$CLASSAT1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0004,ABC,*,$SESSION1,$CLASSAT1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
QUOTECANCEL,$MM1,$SESSION1,$CLASSAT1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0001,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0002,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel sell side order,





COMMENT,Scenario 2.11.2 If A:AIR then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASSAT1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASSAT1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0005,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0005,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0006,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0006,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASSAT1PRODUCT1,S,2,1,01,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
PAUSE,15000,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,01,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0007,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,B,2,1,01,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIR;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0008,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASSAT1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASSAT1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
COMMENT,MO is cancelled & PO order is filled
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0008,ABC,*,$SESSION1,$CLASSAT1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0007,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0006,ABC,*,0,0,3,100,1,2,1,01,TRUE,TRUE,MM1'S Order FILL Verification,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASSAT1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASSAT1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0005,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,






COMMENT,Scenario 2.12 If the PO price is WITHIN/INSIDE the NBBO and the MO price is BETTER than NBBO on the OPPOSITE side of PO then PO trades with MO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0009,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,15,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0010,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,15,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
COMMENT,MO is filled with PO order 
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0009,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0010,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,MO's Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.13 If the PO price is AT the NBBO on the OPPOSITE side of PO and the MO price is BETTER than NBBO on the OPPOSITE side of PO then PO trades with MO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0011,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0012,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,15,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0011,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0012,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,MO's Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.14 If the PO price is OUTSIDE the NBBO on the OPPOSITE side of PO and the MO price is BETTER than NBBO on the OPPOSITE side of PO then PO trades with MO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0013,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0014,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,15,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,2,1,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0013,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0014,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,MO's Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.15 If the PO price is OUTSIDE the NBBO on the OPPOSITE side of PO and the MO price is AT the NBBO on the OPPOSITE side of PO and there is no resting Customer Order on the OPPOSITE side of PO then PO trades with MO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0015,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0016,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0015,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0016,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MO's Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,Scenario 2.16 If the PO price is OUTSIDE the NBBO on the OPPOSITE side of PO and the MO price is AT the NBBO on the OPPOSITE side of PO and there is a resting Customer Order on the OPPOSITE side of PO then the AIM Order is handled as follows
COMMENT,Scenario 2.16.1 If A:AIM then both PO and MO are CANCELLED
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0017,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0017,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,200,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0018,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0019,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0018,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0019,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0017,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,






COMMENT,Scenario 2.16.2 If A:AIR then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,25,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0020,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0020,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,1021,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIR;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,1022,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,2,1,20,FALSE,TRUE,RFP Query,

ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,1022,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
PAUSE,15000
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,1021,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,PO'S Order FILL Verification,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0020,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,MM1'S Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,25,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.17 If the PO and MO prices are OUTSIDE the NBBO on the OPPOSITE side of PO then the AIM Order is handled as follows
COMMENT,Scenario 2.17.1 If A:AIM then both PO and MO are CANCELLED
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0023,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0024,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0023,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0024,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.17.2 If A:AIR then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0025,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIR;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0026,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,30,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,2,1,20,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0026,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
PAUSE,15000,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0025,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,PO'S Order FILL Verification,
QUOTEFILLVERIFICATION,$MM1,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id,TRUE,TRUE,MM2'S QUOTE FILL VERIFICATION...,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,0,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.18 If the PO price is AT the NBBO on the SAME side of PO and there is no resting Customer Order on the SAME side of PO then PO trades with MO at the SAME side market price while the MO price is as follows
COMMENT,Scenario 2.18.1 MO price is AT the NBBO on the SAME side of PO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0027,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0028,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0027,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0028,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,MO's Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.18.2 MO price is OUTSIDE the NBBO on the SAME side of PO
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0029,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0030,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,1,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0029,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0030,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,MO's Order FILL Verification,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,






COMMENT,Scenario 2.19 If the PO price is AT the NBBO on the SAME side of PO and there is a resting Customer Order on the SAME side of PO then the AIM Order is either CANCELLED or routed to TPF while the MO price is as follows
COMMENT,Scenario 2.19.1 If A:AIM and MO price is AT the NBBO on the SAME side of PO then both PO and MO are CANCELLED
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0031,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0031,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0032,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0033,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0032,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0033,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0031,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,Scenario 2.19.2 If A:AIR and MO price is OUTSIDE the NBBO on the SAME side of PO then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0035,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0035,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,200,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0036,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIR;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0037,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0037,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,0035,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0036,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel PO,





COMMENT,Scenario 2.20 If the PO and MO prices are OUTSIDE the NBBO on the SAME side of PO then the AIM Order is handled as follows
COMMENT,Scenario 2.20.1 If A:AIM then both PO and MO are CANCELLED
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0038,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0039,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIM;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0038,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,PO1 is CANCELLED,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0039,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,





COMMENT,Scenario 2.20.2 If A:AIR then MO is CANCELLED and PO comes back to the system as normal order
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0040,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,A:AIR;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,0041,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,0,95,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERCANCELVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0041,ABC,*,$SESSION1,$CLASS1PRODUCT1,3,100,TRUE,TRUE,MO1 is CANCELLED,
BOOKDEPTHVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,100,2,1,00,100,2,0,95,1,100,2,1,20,TRUE,TRUE,Verify Book Depth,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
ORDERCANCEL,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,0040,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel PO,





COMMENT,Scenario 2.21.2	Scenario 1: If there is a resting Customer Order on the OPPOSITE side of PO also at that ONE AUCTION TICK BETTER price than the SAME side market price then both PO and MO are CANCELLED
CLEARALLCALLBACKS,$MM1,
CLEARALLCALLBACKS,$MM2,
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Verify Book is Empty,
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,TRUE,TRUE,Event Comment...,
QUOTEQUERY,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id,7,TRUE,TRUE,Event Comment...,
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Current Market V3 Best Market Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,1104,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,1104,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,1105,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,01/01/2004 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,TRUE,TRUE,Enter Order,
ORDERQUERY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,1105,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,01/01/2004 6:00:00.0,1,1,00,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,2,-,-,$SESSION1,0,100,1,0,TRUE,TRUE,Order Query,

INTERNALIZEDORDER,$MM2,2,$MM2EXCHANGE,$MM2EXECFIRM,LML,1106,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,3,0,00,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,LML,1107,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,05,D,01/12/2008 11:00:00.0,1,2,0,0,0,-,-,-,$MM2,$MM2,C,FALSE,W,C,2,REMAINDER=3;,-,$SESSION1,TRUE,TRUE,Enter Internalised Order,
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION1,B,100,1,0,00,FALSE,TRUE,RFP Query,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,1106,ABC,*,0,0,3,100,1,2,1,06,TRUE,TRUE,PO's Order FILL Verification,
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,LML,1107,ABC,*,0,0,3,100,1,2,1,06,TRUE,TRUE,MO's Order FILL Verification,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,1104,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LML,1105,ABC,*,100,$SESSION1,3,TRUE,TRUE,Cancel Buy side order,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,


COMMENT,Test complete - Log off users,
TRADERLOGOUT,$MM1,TRUE,TRUE,Valid Logout,
TRADERLOGOUT,$MM2,TRUE,TRUE,Valid Logout,
SALOGOUT,$SA1,TRUE,TRUE,Valid Logout,
ENDPOINT,
PRINTOUTPUTSUMMARY,
