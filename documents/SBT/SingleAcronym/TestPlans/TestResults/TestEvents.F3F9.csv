TESTSUITENAME,QPE-Feature 3:Receive BOTR from TIPS and calcalate NBBO Feature 9: mark CBOE trade through NBBO
PRINTOUTPUTHEADING,
STARTPOINT,
COMMENT,Log in HD User and Perform Test Requirements Checkout,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Log in the HD User,
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,BBY,TRUE,TRUE,Comment...,
#CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Mr. Wayne,FALSE,TRUE,TRUE,Comment,
#CREATEUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,M,1,Mr. Daniel,FALSE,TRUE,TRUE,Comment,
MAKEUSERDPMFORCLASS,$SA1,$MM1,$MM1EXCHANGE,$CLASS1,TRUE,TRUE,Comment,
MAKEUSERDPMFORCLASS,$SA1,$MM2,$MM1EXCHANGE,$CLASS1,TRUE,TRUE,Comment,
COMMENT, Test Set User Enablements,
#SETUSERENABLEMENTS,$SA1,$SESSION1,$MM1,$MM1EXCHANGE,DEFAULT,-,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION2,$MM1,$MM1EXCHANGE,DEFAULT,-,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION3,$MM1,$MM1EXCHANGE,DEFAULT,-,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION1,$MM1,$MM1EXCHANGE,$CLASS1,ALL,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION1,$MM1,$MM1EXCHANGE,$CLASS1,1;2;3;4;5;6;7;8,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION1,$MM1,$MM1EXCHANGE,DEFAULT,ALL,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION2,$MM1,$MM1EXCHANGE,DEFAULT,ALL,TRUE,TRUE,Comment...,,
#SETUSERENABLEMENTS,$SA1,$SESSION3,$MM1,$MM1EXCHANGE,DEFAULT,ALL,TRUE,TRUE,Comment...,,,,,,,
#SETOPENINGREQUIREMENT,$SA1,$SESSION1,$CLASS1,0,FALSE,FALSE,Not work in W_MAIN,,,,,,,,,
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment...,,,,,,,,
COMMENT,Put the products into the proper state,,,,,,,,,,,,,,,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Close products,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,PreOpen products,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Put products into OpeningRotation,
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Put products into Open,
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,FALSE,Verify test product is in OpeningRotation,,,,,,,,,
COMMENT,Log in initial test users,,
TRADERLOGIN,$MM1,$MM1,$MMCASANDPORT,TRUE,TRUE,Logging in,
#COMMENT,User enters a quote to open the product,
#TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,,
#QUOTEV3,$MM1,2,9,90,100,2,10,30,100,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,Quote to open the test product
#QUOTEV3,$MM1,2,10,0,100,2,10,10,100,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,Quote to open the test product
#WAITFORPRODUCTSTATECHANGE,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,35000,TRUE,TRUE,Wait for the test product to open,,,,,,,
#PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Verify product is open,
#QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 301: Away exchanges quote better on both bid and ask side,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.10,PSE=200,TRUE,TRUE,Publish BOTR,
PAUSE,500,
TRADE,TRUE,TRUE, No trade,
QUOTEV3,$MM1,2,9,90,500,2,10,20,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,Quote to open the test product,,,,,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FALSE,2,10,0,200@PSE;,2,10,10,200@PSE;,TRUE,21@PSE;23@ISE;,TRUE,TRUE,PSE is NBBO at the moment.
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 304: Away exchanges quote worse on both bid and ask side,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=500,TRUE,TRUE,Publish BOTR,,,,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,PSE=500,TRUE,TRUE,Publish BOTR,,,,
PAUSE,500,
TRADE,TRUE,TRUE, No trade,
QUOTEV3,$MM1,2,10,10,100,2,10,40,100,0,$CLASS1PRODUCT1,$SESSION1,-,TRUE,TRUE,DPM quote,
#QUOTEV3,$MM1,2,10,0,500,2,10,50,500,0,$CLASS1PRODUCT1,$SESSION1,-,TRUE,TRUE,DPM re-quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FALSE,2,10,10,100@CBOE;,2,10,40,100@CBOE;,TRUE,21@PSE;23@ISE;,TRUE,TRUE,CBOE is NBBO at the moment.
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 305: Away exchanges quote the same on both bid and ask side,
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,50,200@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,PSE=200,TRUE,TRUE,Publish BOTR,
PAUSE,500,
TRADE,TRUE,TRUE, No trade,
QUOTEV3,$MM1,2,10,0,500,2,10,50,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#QUOTEV3,$MM1,2,10,10,100,2,10,40,100,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM re-quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FALSE,2,10,0,200@PSE;500@CBOE;,2,10,50,200@PSE;500@CBOE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE, verify NBBO,
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 306: Away exchanges quote better on both bid and ask side, trade thru in Ask side
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,40,200@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=200,TRUE,TRUE,Publish BOTR,
PAUSE,100,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,50,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,Quote to open the test product,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCA,161,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,10,50,D,01/01/2004 6:00:00.0,1,2,0,0,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,0,-,-,$SESSION1,TRUE,TRUE,Event Comment...,
TRADERESULTS,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCA,161,ABC,*,0,0,3,100,1,2,10,50,TRUE,TRUE,Trade thru NBBO,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,TRUE,FALSE,2,10,0,200@PSE;,2,10,40,200@PSE;,TRUE,21@PSE;23@ISE;,TRUE,TRUE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 307: Away exchanges quote better on both bid and ask side, trade thru in Bid side
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,40,200@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=200,TRUE,TRUE,Publish BOTR,
PAUSE,100,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,50,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,Quote to open the test product,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCS,162,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,9,90,D,01/01/2004 6:00:00.0,1,2,0,0,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,0,-,-,$SESSION1,TRUE,TRUE,Event Comment...,
TRADERESULTS,
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCS,162,ABC,*,0,0,3,100,1,2,9,90,TRUE,TRUE,Trade thru NBBO,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,TRUE,FALSE,2,10,0,200@PSE;,2,10,40,200@PSE;,TRUE,21@PSE;23@ISE;,TRUE,TRUE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel the opening quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 310: Away exchanges quote the same on both bid and ask side
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,50,200@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,PSE=200,TRUE,TRUE,Publish BOTR,
PAUSE,100,
TRADE,TRUE,FALSE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCA,171,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,10,0,D,01/01/2004 6:00:00.0,1,2,0,0,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,0,-,-,$SESSION1,TRUE,TRUE,Customer order BUY,
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCA,172,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,10,50,D,01/01/2004 6:00:00.0,1,2,0,0,0,-,-,-,$MM1,$MM1,C,FALSE,C,C,0,-,-,$SESSION1,TRUE,TRUE,Customer order SELL,
QUOTEV3,$MM1,2,10,0,500,2,10,50,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,0,200@PSE;600@CBOE;,2,10,50,200@PSE;600@CBOE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCA,171,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel BUY order,
ORDERCANCEL,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ZCA,172,ABC,*,100,$SESSION1,1,TRUE,TRUE,Cancel SELL order,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 350: NBBO w/o no CBOE current market - single 
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,50,200@PSE;,TRUE,FALSE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,FALSE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,PSE=200,TRUE,FALSE,Publish BOTR,
PAUSE,500,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,0,200@PSE;,2,10,50,200@PSE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 351: NBBO w/o no CBOE current market - double
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,50,200@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,PSE=200,TRUE,TRUE,Publish BOTR,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,200@ISE;,2,10,40,200@ISE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,ISE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,ISE=200,TRUE,TRUE,Publish BOTR,
PAUSE,500,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,10,200@ISE;,2,10,40,200@ISE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 352: NBBO w/o no CBOE current market - double
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,200@PSE;,2,10,40,200@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,PSE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=200,TRUE,TRUE,Publish BOTR,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@ISE;,2,10,50,200@ISE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,ISE=200,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,ISE=200,TRUE,TRUE,Publish BOTR,
PAUSE,300,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,0,200@ISE;,2,10,50,200@ISE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 353: CBOE current market update w/o BOTR feed
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,0,0,0@PSE;,1,0,0,0@PSE;,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.0,PSE=0,TRUE,TRUE,Publish BOTR,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,0.0,PSE=0,TRUE,TRUE,Publish BOTR,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
PAUSE,1000,
QUOTEV3,$MM1,2,10,0,1000,2,10,50,1000,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,0,1000@CBOE;,2,10,50,1000@CBOE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 330: Multiple BOTR feeds - BOTR1 better than current market, BOTR2 better than BOTR1, 
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@PSE;,2,10,50,200@PSE;,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,PSE=200,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,PSE=200,TRUE,TRUE,Publish BOTR1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,200@ISE;,2,10,40,200@ISE;,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,ISE=200,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,ISE=200,TRUE,TRUE,Publish BOTR2,
PAUSE,300,
QUOTEV3,$MM1,2,10,0,1000,2,10,50,1000,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,10,200@ISE;,2,10,40,200@ISE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 331: Multiple BOTR feeds - BOTR1 better than current market, BOTR2 equal to BOTR1 with volume increase
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,200@PSE;,2,10,40,200@PSE;,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,PSE=200,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=200,TRUE,TRUE,Publish BOTR1,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,100@PSE;500@ISE;,2,10,40,100@PSE;500@ISE;,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,PSE=100 ISE=500,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=100 ISE=500,TRUE,TRUE,Publish BOTR2,
PAUSE,300,
QUOTEV3,$MM1,2,10,0,1000,2,10,50,1000,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,10,100@PSE;500@ISE;,2,10,40,100@PSE;500@ISE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#------------------------------------------------------------------------------------------------------
COMMENT,Test Case 332: Multiple BOTR feeds - BOTR1 better than current market, BOTR2 equal to BOTR1 with volume decrease
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,9,90,500,2,10,60,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,100@PSE;500@ISE;,2,10,40,100@PSE;500@ISE;,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,PSE=100 ISE=500,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=100 ISE=500,TRUE,TRUE,Publish BOTR1,
QUOTEV3,$MM1,2,9,90,100,2,10,60,100,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,200@PSE;,2,10,40,200@PSE;,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,PSE=200,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=200,TRUE,TRUE,Publish BOTR2,
PAUSE,300,
QUOTEV3,$MM1,2,10,0,1000,2,10,50,1000,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
TRADERESULTS,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,10,200@PSE;,2,10,40,200@PSE;,TRUE,21@PSE;23@ISE;,TRUE,FALSE,NBBO/exchange indicators verification
TRADEEND,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#-----------------------------------------------------------------------------------------------------
COMMENT,Test Case 333: Multiple BOTR feeds - BOTR1 equal to current market, BOTR2 worse than current market
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,0,0,1,0,0,TRUE,TRUE,Verify Book is Empty,
CLEARALLCALLBACKS,$MM1,
TRADE,TRUE,TRUE, Order trades thru NBBO price with CBOE quote,
QUOTEV3,$MM1,2,10,10,500,2,10,40,500,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,10,100@PSE;,2,10,40,100@PSE;,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.10,PSE=100,TRUE,TRUE,Publish BOTR1,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.40,PSE=100,TRUE,TRUE,Publish BOTR1,
PAUSE,300,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
#PUBLISHBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,2,10,0,200@ISE;,2,10,50,200@ISE;,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,10.00,ISE=200,TRUE,TRUE,Publish BOTR2,
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,10.50,ISE=200,TRUE,TRUE,Publish BOTR2,
PAUSE,300,
QUOTEV3,$MM1,2,10,0,1000,2,10,50,1000,0,$CLASS1PRODUCT1,$SESSION1,ZHU,TRUE,TRUE,DPM quote,
#QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Now cancel DPM quote,
TRADERESULTS,
PAUSE,300,
VERIFYNBBOANDINDICATORSBYMDH,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1RPTCLASS,$CLASS1PRODUCT1,7,1,FALSE,FASLE,2,10,0,1000@CBOE;200@ISE;,2,10,50,1000@CBOE;200@ISE;,TRUE,21@PSE;23@ISE;,TRUE,TRUE,NBBO/exchange indicators verification
TRADEEND,
#-----------------------------------------------------------------------------------------------------
TRADERLOGOUT,$MM1,TRUE,TRUE,Valid Logout,,,,,,,,,,,,,,,,,
SALOGOUT,$SA1,TRUE,TRUE,Valid Logout,,,,,,,,,,,,,,,,,
ENDPOINT,,,,,,,,,,,,,,,,,,,,,
PRINTOUTPUTSUMMARY,,,,,,,,,,,,,,,,,,,,,
