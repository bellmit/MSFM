TESTSUITENAME,Tips Adapter Elimination Test Plan_Future
PRINTOUTPUTHEADING,
STARTPOINT,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Comment


COMMENT, Test Cases:12

COMMENT, Test Environment Setup
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,2,PRODUCT,$HYBRIDCLASSLIST1,TRUE,TRUE,Comment
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION2,4,1,CLASS1,2,PRODUCT,$ONE_MAINCLASSLIST,TRUE,TRUE,Comment
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION3,4,1,CLASS2,2,PRODUCT,$CFE_MAINCLASSLIST,TRUE,TRUE,Comment
aSELECTCLASSESANDPRODUCTS,$SA1,$SESSION5,4,1,CLASS3,2,PRODUCT,$COF_MAINCLASSLIST,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION2,2,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION3,2,TRUE,TRUE,Comment
aVERIFYSESSIONSTATE,$SA1,$SESSION5,2,TRUE,TRUE,Comment

COMMENT, User Setup
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API $MM1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Comment

STRATEGYCREATE,$MM1,$SESSION1,$CLASS1,$STRATEGY1,2,$CLASS1PRODUCT1,1,B,$CLASS1PRODUCT2,1,S,TRUE,TRUE,Comment
STRATEGYCREATE,$MM1,$SESSION2,$CLASS11,$STRATEGY2,2,$CLASS11PRODUCT1,1,B,$CLASS11PRODUCT2,1,S,TRUE,TRUE,Comment
STRATEGYCREATE,$MM1,$SESSION3,$CLASS21,$STRATEGY3,2,$CLASS21PRODUCT1,1,B,$CLASS21PRODUCT2,1,S,TRUE,TRUE,Comment
aSTRATEGYCREATE,$MM1,$SESSION5,$CLASS31,$STRATEGY4,2,$CLASS31PRODUCT1,1,B,$CLASS31PRODUCT2,1,S,TRUE,TRUE,Comment

COMMENT, Trading Property Setup

COMMENT, Routing Property Setup

COMMENT, Pre-Test Settings
SUBSCRIBETICKER,$MM1,$SESSION1,$CLASS1PRODUCT1,TRUE,TRUE,Comment
SUBSCRIBERECAP,$MM1,$SESSION1,$CLASS1PRODUCT1,TRUE,TRUE,Comment

COMMENT, Test Case 1:Set Underlying Recap Last Sale and verify that recap is published for the derivative ONE-MAIN Future product
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION2,$CLASS11PRODUCT1,$CLASS11,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION2,$CLASS11PRODUCT1,$CLASS11,2,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION2,$CLASS11PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,1.50,0.05,30,150,-,-,4,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.03,1.19,0,0,+,+,1,TRUE,TRUE,Comment
PAUSE,5000
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$CLASS11,3,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,100,+,-,5,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,3,TRUE,TRUE,Comment

COMMENT, Test Case 2:Set Underlying Recap Quote and verify that recap is published for the derivative ONE_MAIN Future product
TOPOFBOOKVERIFICATION,$MM1,$SESSION2,$CLASS11PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,1.00,1.20,150,150,-,true,4,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,3,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.13,0.00,850,1500,+,false,5,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,3,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.13,0.01,0,0,-,false,1,TRUE,TRUE,Comment
PAUSE,5000

COMMENT, Test Case 3:SetVerify the ONE-MAIN FUTURE derivative class is set to Pre-Open state. Verify that incoming underlying Recap Last Sale and quote with OPEN product state does not change the derivative product state to Opening Rotation
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$CLASS11,5,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$CLASS11,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$STRATEGYCLASS11,5,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$STRATEGYCLASS11,2,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION2,$STRATEGY2,2,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,true,4,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,-,4,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION2,$STRATEGY2,2,TRUE,TRUE,Comment

COMMENT, Test Case 4:SetVerify the ONE-MAIN FUTURE derivative class is set to Open Rotation state. Verify that incoming underlying Recap Last Sale and quote with HALTED product state does not change the derivative product state to HALTED
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$CLASS11,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION2,$STRATEGYCLASS11,3,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION2,$STRATEGY2,3,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,true,4,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,-,4,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION2,$CLASS11PRODUCT1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION2,$STRATEGY2,3,TRUE,TRUE,Comment

COMMENT, Test Case 5:Set Underlying Recap Last Sale and verify that recap is published for the derivative CFE-MAIN Future product
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION3,$CLASS21PRODUCT1,$CLASS21,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION3,$CLASS21PRODUCT1,$CLASS21,2,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION3,$CLASS21PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,1.50,0.05,30,150,-,-,4,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION3,$CLASS21PRODUCT1,2,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.03,1.19,0,0,+,+,1,TRUE,TRUE,Comment
PAUSE,5000
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,100,+,-,5,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION3,$CLASS21PRODUCT1,3,TRUE,TRUE,Comment

COMMENT, Test Case 6:Set Underlying Recap Quote and verify that recap is published for the derivative CFE_MAIN Future product
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION3,$CLASS21PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,1.00,1.20,150,150,-,true,4,TRUE,TRUE,Comment
PAUSE,2000
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.13,0.00,850,1500,+,false,1,TRUE,TRUE,Comment
PAUSE,5000
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.13,0.01,0,0,-,false,5,TRUE,TRUE,Comment
PAUSE,5000

COMMENT, Test Case 7:SetVerify the CFE-MAIN FUTURE derivative class is set to Pre-Open state. Verify that incoming underlying Recap Last Sale and quote with OPEN product state does not change the derivaite product state to Opening Rotation
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION3,$CLASS21,5,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION3,$CLASS21,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION3,$STRATEGYCLASS21,5,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION3,$STRATEGYCLASS21,2,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION3,$CLASS21PRODUCT1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION3,$STRATEGY3,2,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,true,4,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,-,4,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION3,$CLASS21PRODUCT1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION3,$STRATEGY3,2,TRUE,TRUE,Comment

COMMENT, Test Case 8:SetVerify the CFE-MAIN FUTURE derivative class is set to Open Rotation state. Verify that incoming underlying Recap Last Sale and quote with HALTED product state does not change the derivative product state to HALTED
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION3,$CLASS21,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION3,$STRATEGYCLASS21,3,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION3,$CLASS21PRODUCT1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION3,$STRATEGY3,3,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,true,5,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,-,5,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION3,$CLASS21PRODUCT1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION3,$STRATEGY3,3,TRUE,TRUE,Comment

TERMINATE,
COMMENT, Test Case 9:Set Underlying Recap Last Sale and verify that recap is published for the derivative COF-MAIN Future product
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION5,$CLASS31PRODUCT1,$CLASS31,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION5,$CLASS31PRODUCT1,$CLASS31,2,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION5,$CLASS31PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,1.50,0.05,30,150,-,-,4,TRUE,TRUE,Comment
PAUSE,2000
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.03,1.19,0,0,+,+,1,TRUE,TRUE,Comment
PAUSE,5000
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,100,+,-,5,TRUE,TRUE,Comment
PAUSE,5000

COMMENT, Test Case 10:Set Underlying Recap Quote and verify that recap is published for the derivative COF_MAIN Future product
TOPOFBOOKVERIFICATION,$MM1,$SESSION5,$CLASS31PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,1.00,1.20,150,150,-,true,4,TRUE,TRUE,Comment
PAUSE,2000
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.13,0.00,850,1500,+,false,1,TRUE,TRUE,Comment
PAUSE,5000
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.13,0.01,0,0,-,false,5,TRUE,TRUE,Comment
PAUSE,5000

COMMENT, Test Case 11:SetVerify the COF-MAIN FUTURE derivative class is set to Pre-Open state. Verify that incoming underlying Recap Last Sale and quote with OPEN product state does not change the derivative product state to Openining Rotation
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION5,$CLASS31,5,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION5,$CLASS31,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION5,$STRATEGYCLASS31,5,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION5,$STRATEGYCLASS31,2,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION5,$CLASS31PRODUCT1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION5,$STRATEGY4,2,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,true,4,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,-,4,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION5,$CLASS31PRODUCT1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION5,$STRATEGY4,2,TRUE,TRUE,Comment

COMMENT, Test Case 12:SetVerify the COF-MAIN FUTURE derivative class is set to Open Rotation state. Verify that incoming underlying Recap Last Sale and quote with HALTED product state does not change the derivative product state to HALTED
CLEARUNDERLYINGCACHEDATA,$SA1,$CLASS1,*,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION5,$CLASS31,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYCLASS,$SA1,$SESSION5,$STRATEGYCLASS31,3,TRUE,TRUE,Comment
PAUSE,2000
PRODUCTSTATEQUERY,$SA1,$SESSION5,$CLASS31PRODUCT1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION5,$STRATEGY4,3,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPQUOTE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,-,true,5,TRUE,TRUE,Comment
UPDATEUNDERLYINGRECAPLASTSALE,$SA1,$CLASS1,$UNDERLYINGCLASS1PRODUCT1,*,0.00,0.00,0,0,+,+,5,TRUE,TRUE,Comment
PAUSE,5000
PRODUCTSTATEQUERY,$SA1,$SESSION5,$CLASS31PRODUCT1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION5,$STRATEGY4,3,TRUE,TRUE,Comment


COMMENT, Test Case:Cleaning Up Task
TRADERLOGOUT,$MM1,TRUE,TRUE,Comment

SALOGOUT,$SA1,TRUE,TRUE,Comment
ENDPOINT,
PRINTOUTPUTSUMMARY,