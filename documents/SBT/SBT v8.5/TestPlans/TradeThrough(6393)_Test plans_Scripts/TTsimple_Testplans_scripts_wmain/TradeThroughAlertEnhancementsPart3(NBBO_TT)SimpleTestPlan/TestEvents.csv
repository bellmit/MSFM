TESTSUITENAME,Trade Through Alert Enhancements Part 3(NBBO_TT) Simple Test Plan
PRINTOUTPUTHEADING,
STARTPOINT,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Comment


COMMENT, Test Cases:22

COMMENT, Test Environment Setup
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,$HYBRIDCLASSLIST1,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Comment

COMMENT, User Setup
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API $MM1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,X,1,Automated API $CUST1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$CUST1EXCHANGE,$CUST1,X,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$HOMT1,$HOMT1EXCHANGE,$HOMT1EXECFIRM,A,1,Automated API $HOMT1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$HOMT1EXCHANGE,$HOMT1,A,TRUE,TRUE,TRUE,Comment
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$CUST1,$CUST1,$CASANDPORT,TRUE,TRUE,Comment
OMTLOGIN,$HOMT1,$HOMT1,$CASANDPORT,TRUE,TRUE,Comment


COMMENT, Trading Property Setup
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,-8:30000-30000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,-8:30000-30000,TRUE,TRUE,Comment
SETINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment

COMMENT, Routing Property Setup
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Comment

COMMENT, Pre-Test Settings
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Comment
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,4,TRUE,TRUE,Comment

COMMENT, Test Case 1:Trade price worse than the same side CBOE Market- NBBO TT

COMMENT, Test Scenario A:worst than Cboe and away market
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PARLOGIN,$PAR1,$PAR_PWD1,$WORKSTATION1,$PARCONN1,TRUE,TRUE,Comment

CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCA,4561,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BCA,4561,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BCA,4561,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCA,4561,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCA,4561,ABC,*,100,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCA,4561,ABC,*,100,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCA,4561,ABC,*,100,0.90,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCA,4561,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:worst price than away market but better than cboe quote- Origin C
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.00,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBL,3756,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BBL,3756,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BBL,3756,*,100,1.15,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.00,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBL,3756,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBL,3756,ABC,*,100,1.15,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBL,3756,ABC,*,100,1.15,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBL,3756,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
PAUSE,2000
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:par order equal Customer order at the tob but price is still worst than NBBO-Origin X
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,4258,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XXC,2202,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,X,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XXC,2202,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,XXC,2202,*,100,1.05,1,ABH,671,100,0.00,0,1.05,100,*,1,N,100,1,-,CO,1.05,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XXC,2202,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XXC,2202,ABC,*,100,1.05,12,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XXC,2202,ABC,*,100,1.05,11,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XXC,2202,ABC,*,100,1.05,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XXC,2202,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,4258,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,4258,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario D:worst price than CBOE top of book Customer order at the top of book but it still worst price than away market BUY SIDE-Origin Y
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DCL,4798,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,Y,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,TOU,3114,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,TOU,3114,*,100,0.90,1,ABH,671,100,0.00,0,1.05,100,*,1,N,100,1,-,CO,1.05,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,100,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,100,0.90,11,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,100,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,100,0.90,6,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TOU,3114,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DCL,4798,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DCL,4798,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 2:Partial trade will be consider trade through since trade price is worse than the same side cboe market

COMMENT, Test Scenario A:BUY SIDE-Origin F worst price
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TCT,2859,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OQA,6468,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PPM,6367,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,I,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,RWL,4988,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,RWL,4988,*,50,0.90,1,ABH,671,100,0.00,0,1.05,100,*,1,N,100,1,-,CO,1.05,1.20,1.10,1.15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,300,2,1,05,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,0,50,1,50,1,2,0,90,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,50,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,50,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,50,0.90,11,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,50,0.90,6,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RWL,4988,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TCT,2859,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TCT,2859,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OQA,6468,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OQA,6468,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PPM,6367,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PPM,6367,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:Origin N equal price
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVF,1861,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HKH,1866,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AYK,1623,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,I,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VHG,2908,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,N,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VHG,2908,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,VHG,2908,*,50,1.15,1,ABH,671,100,0.00,0,1.15,100,*,1,N,100,1,-,CO,1.00,1.15,1.05,1.10,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,300,2,1,15,TRUE,TRUE,Comment
PAUSE,1000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VHG,2908,ABC,*,0,50,1,50,1,2,1,15,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VHG,2908,ABC,*,50,1.15,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VHG,2908,ABC,*,50,1.15,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VHG,2908,ABC,*,50,1.15,11,TRUE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VHG,2908,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVF,1861,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVF,1861,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HKH,1866,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HKH,1866,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AYK,1623,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AYK,1623,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:Origin Y better than cboe but worse than away market price
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AWF,2974,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OET,1704,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIF,4618,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,I,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YFT,8979,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,Y,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,YFT,8979,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,YFT,8979,*,50,1.15,1,ABH,671,100,0.00,0,1.20,100,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,400,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YFT,8979,ABC,*,0,50,1,50,1,2,1,15,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YFT,8979,ABC,*,50,1.15,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YFT,8979,ABC,*,50,1.15,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YFT,8979,ABC,*,50,1.15,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YFT,8979,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AWF,2974,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AWF,2974,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OET,1704,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OET,1704,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIF,4618,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIF,4618,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 3:Trade price better than the same side of NBBO market- NEGATIVE CASE

COMMENT, Test Scenario A:Trading price better than away market -NO TT
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIR,7405,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,X,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BIR,7405,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BIR,7405,*,100,1.10,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIR,7405,ABC,*,0,0,3,100,1,2,1,10,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIR,7405,ABC,*,100,1.10,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIR,7405,ABC,*,100,1.10,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIR,7405,ABC,*,100,1.10,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BIR,7405,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 4:Trade price equals the same side of away market NBBO- NEGATIVE CASE

COMMENT, Test Scenario A:Trading price equals away market NBBO- NO_TT
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HLE,9755,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,HLE,9755,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,HLE,9755,*,100,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HLE,9755,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HLE,9755,ABC,*,100,1.10,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HLE,9755,ABC,*,100,1.10,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HLE,9755,ABC,*,100,1.10,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HLE,9755,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 5:Partial trades with worst price better price and equal price (Positve and negative case)

COMMENT, Test Scenario A:1st trade worst price second better price third equal price
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XTD,9408,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,XTD,9408,*,30,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,0,70,1,30,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,30,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,30,0.90,13,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,XTD,9408,*,30,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,0,40,1,30,1,2,1,05,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,30,1.05,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,XTD,9408,*,40,1.00,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,0,0,3,40,1,2,1,00,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,40,1.00,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,40,1.00,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTD,9408,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:1st trade equal second better price third worse price
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NQP,4432,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,NQP,4432,*,30,1.00,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,0,70,1,30,1,2,1,00,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,30,1.00,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,NQP,4432,*,30,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,0,40,1,30,1,2,1,05,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,30,1.05,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,NQP,4432,*,40,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,0,0,3,40,1,2,0,90,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,40,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,40,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,40,0.90,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQP,4432,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:3 partial trades all at worst price all should have a trade through alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,HIJ,7695,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,HIJ,7695,*,30,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,0,70,1,30,1,2,1,05,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,30,1.05,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,HIJ,7695,*,30,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,0,40,1,30,1,2,0,90,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,30,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,30,0.90,13,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,HIJ,7695,*,40,1.00,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,0,0,3,40,1,2,1,00,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,40,1.00,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,40,1.00,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HIJ,7695,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 6:Trade price worse than the same side NBBO Opening Rotation (Negative case)

COMMENT, Test Scenario A:State in opening rotation
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.65,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,70,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,70,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VDS,2464,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YKZ,1673,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,75,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VDS,2464,*,100,B,1,Y,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,YKZ,1673,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,VDS,2464,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.70,1.10,1.65,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VDS,2464,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,70,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VDS,2464,ABC,*,100,0.90,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VDS,2464,ABC,*,100,0.90,13,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,YKZ,1673,*,100,1.75,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.70,1.10,1.65,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YKZ,1673,ABC,*,0,0,3,100,1,2,1,75,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,70,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YKZ,1673,ABC,*,100,1.75,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YKZ,1673,ABC,*,100,1.75,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VDS,2464,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YKZ,1673,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 7:Trade price worse than the same side NBBO- Fast State (Negative case)

COMMENT, Test Scenario A:State in Fast
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,6,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,6,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XVH,9722,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XVH,9722,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,XVH,9722,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XVH,9722,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XVH,9722,ABC,*,100,0.90,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XVH,9722,ABC,*,100,0.90,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XVH,9722,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 8:NBBO trade through- only for origins B C F N X and Y are Checked for trade through Alert- Negative case

COMMENT, Test Scenario A:BUY SIDE-Origin M
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HBJ,5385,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,HBJ,5385,*,100,B,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,HBJ,5385,*,100,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HBJ,5385,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HBJ,5385,ABC,*,100,1.05,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HBJ,5385,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 9:NBBO changes so trade price is better- No trade through alert(TODO) and worse two cases

COMMENT, Test Scenario A:quote changed so par trade price is better no trade though alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SHD,3208,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,SHD,3208,*,100,B,1,Y,TRUE,TRUE,Comment
QUOTE,$MM1,2,0,85,100,2,1,10,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,85,100,2,1,10,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.85,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,SHD,3208,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.85,1.10,0.85,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SHD,3208,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,85,100,2,1,10,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SHD,3208,ABC,*,100,0.90,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SHD,3208,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 10:- Quote is wider than EPW

COMMENT, Test Scenario A:even when Market is too wide TT alert will still be reproduced
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.00,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.70,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,0,90,100,2,1,80,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,90,100,2,1,80,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCL,8663,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,95,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMI,9221,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,75,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BCL,8663,*,100,B,1,Y,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,AMI,9221,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BCL,8663,*,100,0.95,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.90,1.80,1.00,1.70,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCL,8663,ABC,*,0,0,3,100,1,2,0,95,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,90,100,2,1,80,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCL,8663,ABC,*,100,0.95,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,AMI,9221,*,100,1.75,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.90,1.80,1.00,1.70,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMI,9221,ABC,*,0,0,3,100,1,2,1,75,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,90,100,2,1,80,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMI,9221,ABC,*,100,1.75,12,TRUE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BCL,8663,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AMI,9221,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 11:One sided NBBO at the top of the book(buy and sell) no quote at the TOB. (buy side nbbo offer side not NBBO)

COMMENT, Test Scenario A:one side quote on the buy side
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,0.00,NYSE=0,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UOJ,9489,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,5000
ORDERFILLVERIFICATIONBYTRADESIDE,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UOJ,9489,ABC,*,0,0,3,100,1,2,1,20,B,F,TRUE,TRUE,Comment
PAUSE,4000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,00,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NCH,3647,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BYX,2471,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,25,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NCH,3647,*,100,B,1,Y,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BYX,2471,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,NCH,3647,*,100,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,0.00,1.10,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NCH,3647,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,00,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NCH,3647,ABC,*,100,1.05,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BYX,2471,*,100,1.25,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,0.00,1.10,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BYX,2471,ABC,*,0,0,3,100,1,2,1,25,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,00,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BYX,2471,ABC,*,100,1.25,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NCH,3647,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BYX,2471,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:one side quote on theSell side
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.00,NYSE=0,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DIB,5464,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AXM,803,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,CTU,7132,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,AXM,803,*,100,B,1,Y,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,CTU,7132,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,AXM,803,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,1.20,0.00,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AXM,803,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AXM,803,ABC,*,100,0.90,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,CTU,7132,*,100,1.15,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,1.20,0.00,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,CTU,7132,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,CTU,7132,ABC,*,100,1.15,12,TRUE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AXM,803,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,CTU,7132,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:no Market. no TT alert should be produced
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.00,NYSE=0,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,0.00,NYSE=0,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LWO,1607,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BDP,7973,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,25,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,LWO,1607,*,100,B,1,Y,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BDP,7973,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,LWO,1607,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,0.00,0.00,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LWO,1607,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LWO,1607,ABC,*,100,0.90,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BDP,7973,*,100,1.25,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,0.00,0.00,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BDP,7973,ABC,*,0,0,3,100,1,2,1,25,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BDP,7973,ABC,*,100,1.25,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LWO,1607,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BDP,7973,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 12:On-going Auction should t affect Trade through

COMMENT, Test Scenario A:Hal auction begins then incoming par order that trade through alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:true,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:true,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RDG,7017,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,1000
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION119,S,100,2,1,10,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KAB,9190,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KAB,9190,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,KAB,9190,*,100,1.20,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KAB,9190,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KAB,9190,ABC,*,100,1.20,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KAB,9190,ABC,*,100,1.20,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KAB,9190,ABC,*,100,1.20,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KAB,9190,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
PAUSE,30000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,10,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RDG,7017,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RDG,7017,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment

COMMENT, Test Scenario B:Hal auction begins then incoming par order that won t trade through alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QMQ,5913,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,1000
RFPQUERY,$MM2,$SESSION1,$CLASS1PRODUCT1,$AUCTION119,S,100,2,1,10,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IZM,1653,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,IZM,1653,*,100,S,1,Y,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,IZM,1653,*,100,1.15,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IZM,1653,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IZM,1653,ABC,*,100,1.15,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IZM,1653,ABC,*,100,1.15,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IZM,1653,ABC,*,100,1.15,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IZM,1653,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
PAUSE,30000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,10,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment

COMMENT, Test Case:Cleaning Up Task
TRADERLOGOUT,$MM1,TRUE,TRUE,Comment
OMTLOGOUT,$HOMT1,TRUE,TRUE,Comment
TRADERLOGOUT,$CUST1,TRUE,TRUE,Comment

SALOGOUT,$SA1,TRUE,TRUE,Comment
ENDPOINT,
PRINTOUTPUTSUMMARY,