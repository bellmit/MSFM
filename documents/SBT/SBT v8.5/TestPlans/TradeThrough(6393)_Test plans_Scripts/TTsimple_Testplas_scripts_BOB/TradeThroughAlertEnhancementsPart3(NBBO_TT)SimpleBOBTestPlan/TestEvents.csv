TESTSUITENAME,Trade Through Alert Enhancements Part 3(NBBO_TT) Simple BOB Test Plan
PRINTOUTPUTHEADING,
STARTPOINT,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Comment


COMMENT, Test Cases:22

COMMENT, Test Environment Setup
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,$HYBRIDCLASSLIST1,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Comment

COMMENT, User Setup
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API $MM1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,X,1,Automated API $CUST1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$CUST1EXCHANGE,$CUST1,X,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$HOMT1,$HOMT1EXCHANGE,$HOMT1EXECFIRM,A,1,Automated API $HOMT1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$HOMT1EXCHANGE,$HOMT1,A,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,N,1,Automated API $MM2 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$MM2EXCHANGE,$MM2,N,TRUE,TRUE,TRUE,Comment
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$CUST1,$CUST1,$CASANDPORT,TRUE,TRUE,Comment
OMTLOGIN,$HOMT1,$HOMT1,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$MM2,$MM2,$CASANDPORT,TRUE,TRUE,Comment


COMMENT, Trading Property Setup
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,-8:30000-30000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$CLASS1,-8:30000-30000,TRUE,TRUE,Comment
SETINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,TRUE,Comment
SETMANUALQUOTECANCELTIMERFORPAR,$SA1,$SESSION1,$CLASS1,180000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYMANUALQUOTECANCELTIMERFORPAR,$SA1,$SESSION1,$CLASS1,180000,TRUE,TRUE,Comment

COMMENT, Routing Property Setup
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,$CLASS1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM2EXCHANGE,$MM2EXECFIRM,$CLASS1,*,1,4999,All,$TE,SIMPLE,TRUE,TRUE,Comment

COMMENT, Pre-Test Settings
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Comment
SUBSCRIBEAUCTION,$MM1,$SESSION1,$CLASS1,4,TRUE,TRUE,Comment

COMMENT, Test Case 1:Trade price worse than the same side CBOE Market- NBBO TT

COMMENT, Test Scenario A:worst than Cboe and away market
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PARLOGIN,$PAR1,$PAR_PWD1,$WORKSTATION1,$PARCONN1,TRUE,TRUE,Comment

CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
MANUALQUOTE,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,B,100,1.00,$SA1,TRUE,TRUE,Comment
MANUALQUOTE,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,S,100,1.20,$SA1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PON,4589,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,PON,4589,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,PON,4589,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PON,4589,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PON,4589,ABC,*,100,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PON,4589,ABC,*,100,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PON,4589,ABC,*,100,0.90,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PON,4589,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
MANUALQUOTECANCEL,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,B,100,1.00,$SA1,TRUE,TRUE,Comment
MANUALQUOTECANCEL,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,S,100,1.20,$SA1,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:worst price than away market but better than cboe quote- Origin C
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.00,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBM,6453,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BBM,6453,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BBM,6453,*,100,1.15,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.00,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBM,6453,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBM,6453,ABC,*,100,1.15,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBM,6453,ABC,*,100,1.15,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BBM,6453,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
PAUSE,2000
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:par order equal Customer order at the tob but price is still worst than NBBO-Origin X
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIH,32,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EQX,7101,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,X,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,EQX,7101,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,EQX,7101,*,100,1.05,1,ABH,671,100,0.00,0,1.05,100,*,1,N,100,1,-,CO,1.05,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EQX,7101,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EQX,7101,ABC,*,100,1.05,12,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EQX,7101,ABC,*,100,1.05,11,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EQX,7101,ABC,*,100,1.05,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EQX,7101,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIH,32,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIH,32,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario D:worst price than CBOE top of book Customer order at the top of book but it still worst price than away market BUY SIDE-Origin Y
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BJL,3783,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,Y,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,SOI,8871,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,SOI,8871,*,100,0.90,1,ABH,671,100,0.00,0,1.05,100,*,1,N,100,1,-,CO,1.05,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,05,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,100,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,100,0.90,11,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,100,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,100,0.90,6,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOI,8871,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BJL,3783,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BJL,3783,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 2:Partial trade will be consider trade through since trade price is worse than the same side cboe market

COMMENT, Test Scenario A:BUY SIDE-Origin F worst price
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
MANUALQUOTE,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,B,100,1.00,$SA1,TRUE,TRUE,Comment
MANUALQUOTE,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,S,100,1.20,$SA1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VTL,4799,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FPI,9532,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,E,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DRI,2937,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,E,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VCY,1687,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,VCY,1687,*,50,0.90,1,ABH,671,100,0.00,0,1.05,100,*,1,N,100,1,-,CO,1.05,1.20,1.10,1.15,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,300,2,1,05,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,0,50,1,50,1,2,0,90,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,50,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,50,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,50,0.90,11,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,50,0.90,6,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VCY,1687,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VTL,4799,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VTL,4799,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FPI,9532,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FPI,9532,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DRI,2937,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DRI,2937,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
MANUALQUOTECANCEL,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,B,100,1.00,$SA1,TRUE,TRUE,Comment
MANUALQUOTECANCEL,$WORKSTATION1,$PAR1,$MM2,$CLASS1PRODUCT1,Y,S,100,1.20,$SA1,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:Origin N equal price
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UYF,2707,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NTV,6262,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,E,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LPQ,6355,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,E,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,7858,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,N,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,DUT,7858,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,DUT,7858,*,50,1.15,1,ABH,671,100,0.00,0,1.15,100,*,1,N,100,1,-,CO,1.00,1.15,1.05,1.10,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,300,2,1,15,TRUE,TRUE,Comment
PAUSE,1000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,7858,ABC,*,0,50,1,50,1,2,1,15,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,7858,ABC,*,50,1.15,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,7858,ABC,*,50,1.15,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,7858,ABC,*,50,1.15,11,TRUE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,7858,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UYF,2707,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UYF,2707,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NTV,6262,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NTV,6262,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LPQ,6355,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LPQ,6355,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:Origin Y better than cboe but worse than away market price
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,USF,6955,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MEN,3874,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,E,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RHH,4668,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,E,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TSQ,1818,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,Y,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,TSQ,1818,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,TSQ,1818,*,50,1.15,1,ABH,671,100,0.00,0,1.20,100,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,400,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TSQ,1818,ABC,*,0,50,1,50,1,2,1,15,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TSQ,1818,ABC,*,50,1.15,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TSQ,1818,ABC,*,50,1.15,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TSQ,1818,ABC,*,50,1.15,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TSQ,1818,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,USF,6955,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,USF,6955,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MEN,3874,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MEN,3874,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RHH,4668,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RHH,4668,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 3:Trade price better than the same side of NBBO market- NEGATIVE CASE

COMMENT, Test Scenario A:Trading price better than away market -NO TT
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUN,1840,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,X,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VUN,1840,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,VUN,1840,*,100,1.10,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUN,1840,ABC,*,0,0,3,100,1,2,1,10,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUN,1840,ABC,*,100,1.10,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUN,1840,ABC,*,100,1.10,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUN,1840,ABC,*,100,1.10,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUN,1840,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 4:Trade price equals the same side of away market NBBO- NEGATIVE CASE

COMMENT, Test Scenario A:Trading price equals away market NBBO- NO_TT
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LVD,1728,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,LVD,1728,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,LVD,1728,*,100,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LVD,1728,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LVD,1728,ABC,*,100,1.10,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LVD,1728,ABC,*,100,1.10,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LVD,1728,ABC,*,100,1.10,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LVD,1728,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 5:Partial trades with worst price better price and equal price (Positve and negative case)

COMMENT, Test Scenario A:1st trade worst price second better price third equal price
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BWM,5090,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BWM,5090,*,30,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,0,70,1,30,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,30,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,30,0.90,13,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BWM,5090,*,30,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,0,40,1,30,1,2,1,05,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,30,1.05,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BWM,5090,*,40,1.00,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,0,0,3,40,1,2,1,00,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,40,1.00,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,40,1.00,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BWM,5090,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:1st trade equal second better price third worse price
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCE,3103,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCE,3103,*,30,1.00,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,0,70,1,30,1,2,1,00,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,30,1.00,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCE,3103,*,30,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,0,40,1,30,1,2,1,05,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,30,1.05,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCE,3103,*,40,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,0,0,3,40,1,2,0,90,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,40,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,40,0.90,13,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,40,0.90,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCE,3103,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:3 partial trades all at worst price all should have a trade through alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BRQ,5070,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BRQ,5070,*,30,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,0,70,1,30,1,2,1,05,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,30,1.05,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BRQ,5070,*,30,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,0,40,1,30,1,2,0,90,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,30,0.90,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,30,0.90,13,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BRQ,5070,*,40,1.00,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,0,0,3,40,1,2,1,00,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,40,1.00,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,40,1.00,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BRQ,5070,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 6:Trade price worse than the same side NBBO Opening Rotation (Negative case)

COMMENT, Test Scenario A:State in opening rotation
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.65,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,70,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,70,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIC,8269,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JTQ,7038,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,75,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UIC,8269,*,100,B,1,W,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JTQ,7038,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,UIC,8269,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.70,1.10,1.65,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIC,8269,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,70,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIC,8269,ABC,*,100,0.90,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIC,8269,ABC,*,100,0.90,13,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,JTQ,7038,*,100,1.75,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.70,1.10,1.65,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JTQ,7038,ABC,*,0,0,3,100,1,2,1,75,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,70,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JTQ,7038,ABC,*,100,1.75,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JTQ,7038,ABC,*,100,1.75,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIC,8269,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JTQ,7038,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 7:Trade price worse than the same side NBBO- Fast State (Negative case)

COMMENT, Test Scenario A:State in Fast
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,6,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,6,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6591,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,YVD,6591,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,YVD,6591,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6591,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6591,ABC,*,100,0.90,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6591,ABC,*,100,0.90,13,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6591,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 8:NBBO trade through- only for origins B C F N X and Y are Checked for trade through Alert- Negative case

COMMENT, Test Scenario A:BUY SIDE-Origin M
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVN,7934,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,HVN,7934,*,100,B,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,HVN,7934,*,100,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.10,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVN,7934,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVN,7934,ABC,*,100,1.05,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HVN,7934,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 9:NBBO changes so trade price is better- No trade through alert and worse two cases

COMMENT, Test Scenario A:quote changed so par trade price is better no trade though alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ELQ,6439,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,ELQ,6439,*,100,B,1,W,TRUE,TRUE,Comment
QUOTE,$MM1,2,0,85,100,2,1,10,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,85,100,2,1,10,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.85,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,ELQ,6439,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.85,1.10,0.85,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ELQ,6439,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,85,100,2,1,10,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ELQ,6439,ABC,*,100,0.90,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ELQ,6439,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 10:- Quote is wider than EPW

COMMENT, Test Scenario A:even when Market is too wide TT alert will still be reproduced
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.00,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.70,NYSE=100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,0,90,100,2,1,80,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,90,100,2,1,80,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DTY,8098,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,95,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KBK,4336,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,75,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,DTY,8098,*,100,B,1,W,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KBK,4336,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,DTY,8098,*,100,0.95,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.90,1.80,1.00,1.70,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DTY,8098,ABC,*,0,0,3,100,1,2,0,95,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,90,100,2,1,80,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DTY,8098,ABC,*,100,0.95,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,KBK,4336,*,100,1.75,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.90,1.80,1.00,1.70,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KBK,4336,ABC,*,0,0,3,100,1,2,1,75,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,0,90,100,2,1,80,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KBK,4336,ABC,*,100,1.75,12,TRUE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DTY,8098,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KBK,4336,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 11:One sided NBBO at the top of the book(buy and sell) no quote at the TOB. (buy side nbbo offer side not NBBO)

COMMENT, Test Scenario A:one side quote on the buy side
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.10,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,0.00,NYSE=0,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NNP,8317,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,4000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,00,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RTY,3186,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,05,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KPY,5345,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,25,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,RTY,3186,*,100,B,1,W,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KPY,5345,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,RTY,3186,*,100,1.05,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,0.00,1.10,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RTY,3186,ABC,*,0,0,3,100,1,2,1,05,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,00,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RTY,3186,ABC,*,100,1.05,12,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,KPY,5345,*,100,1.25,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,0.00,1.10,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KPY,5345,ABC,*,0,0,3,100,1,2,1,25,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,0,1,0,00,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KPY,5345,ABC,*,100,1.25,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RTY,3186,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KPY,5345,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario B:one side quote on theSell side
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.00,NYSE=0,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.10,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QQP,4007,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JYE,1572,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WSY,8080,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JYE,1572,*,100,B,1,W,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,WSY,8080,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,JYE,1572,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,1.20,0.00,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JYE,1572,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JYE,1572,ABC,*,100,0.90,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,WSY,8080,*,100,1.15,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,1.20,0.00,1.10,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WSY,8080,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WSY,8080,ABC,*,100,1.15,12,TRUE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JYE,1572,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WSY,8080,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Scenario C:no Market. no TT alert should be produced
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,0.00,NYSE=0,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,0.00,NYSE=0,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JVS,7007,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,0,90,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JRY,8926,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,25,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,B,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JVS,7007,*,100,B,1,W,TRUE,TRUE,Comment
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JRY,8926,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,JVS,7007,*,100,0.90,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,0.00,0.00,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JVS,7007,ABC,*,0,0,3,100,1,2,0,90,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JVS,7007,ABC,*,100,0.90,12,FALSE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,JRY,8926,*,100,1.25,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,0.00,0.00,0.00,0.00,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JRY,8926,ABC,*,0,0,3,100,1,2,1,25,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JRY,8926,ABC,*,100,1.25,12,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JVS,7007,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JRY,8926,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment

COMMENT, Test Case 12:On-going Auction should t affect Trade through

COMMENT, Test Scenario A:Hal auction begins then incoming par order that trade through alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:true,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:true,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RZV,4234,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION119,S,100,2,1,10,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,6029,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BMW,6029,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,BMW,6029,*,100,1.20,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,6029,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,6029,ABC,*,100,1.20,12,TRUE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,6029,ABC,*,100,1.20,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,6029,ABC,*,100,1.20,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BMW,6029,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=1
ENDVERIFYORDERHISTORY,
PAUSE,30000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,10,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RZV,4234,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RZV,4234,ABC,*,$SESSION1,$CLASS1PRODUCT1,2,100,TRUE,TRUE,Comment

COMMENT, Test Scenario B:Hal auction begins then incoming par order that won t trade through alert
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,B,1.05,NYSE=100,TRUE,TRUE,Comment
UPDATEBOTR,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,S,1.15,NYSE=100,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VSO,9497,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,10,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,$AUCTION119,S,100,2,1,10,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QEA,4711,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,QEA,4711,*,100,S,1,W,TRUE,TRUE,Comment
PARORDERTRADEFILLREPORTFORTRADETHROUGH,$PAR1,$MM1,$MM1EXECFIRM,ABC,QEA,4711,*,100,1.15,1,ABH,671,100,0.00,0,0.00,0,*,1,N,100,1,-,CO,1.00,1.20,1.05,1.15,TRUE,TRUE,Comment
PAUSE,2000
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QEA,4711,ABC,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,1000
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QEA,4711,ABC,*,100,1.15,12,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QEA,4711,ABC,*,100,1.15,13,FALSE,TRUE,Comment
VERIFYTRADETHOUGHALERT,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QEA,4711,ABC,*,100,1.15,11,FALSE,TRUE,Comment
VERIFYORDERHISTORY,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QEA,4711,ABC,*,FALSE,TRUE,TRUE,Comment
	FILL_ORDER,ACCOUNT=$MM1,TT_INDICATOR=0
ENDVERIFYORDERHISTORY,
PAUSE,30000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION1,$CLASS1PRODUCT1,100,2,1,00,100,2,1,10,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false,TRUE,TRUE,Comment

COMMENT, Test Case:Cleaning Up Task
TRADERLOGOUT,$MM2,TRUE,TRUE,Comment
TRADERLOGOUT,$MM1,TRUE,TRUE,Comment
OMTLOGOUT,$HOMT1,TRUE,TRUE,Comment
TRADERLOGOUT,$CUST1,TRUE,TRUE,Comment

SALOGOUT,$SA1,TRUE,TRUE,Comment
ENDPOINT,
PRINTOUTPUTSUMMARY,