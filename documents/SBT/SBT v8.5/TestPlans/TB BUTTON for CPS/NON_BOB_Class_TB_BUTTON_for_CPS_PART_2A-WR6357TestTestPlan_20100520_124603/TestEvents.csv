TESTSUITENAME,NON_BOB_Class:TB_BUTTON_for_CPS_PART_2A WR 6357 Test Test Plan
PRINTOUTPUTHEADING,
STARTPOINT,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Comment


COMMENT, Test Cases:7

COMMENT, Test Environment Setup
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,$HYBRIDCLASSLIST1,TRUE,TRUE,Comment
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION4,3,1,CLASS1,1,PRODUCT,$W_STOCKCLASSLIST,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION4,2,TRUE,TRUE,Comment

COMMENT, User Setup
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API $MM1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Comment

STRATEGYCREATE,$MM1,$SESSION1,$CLASS1,$STRATEGY1,2,$CLASS11PRODUCT1,100,B,$CLASS1PRODUCT1,1,S,TRUE,TRUE,Comment

COMMENT, Trading Property Setup
SETAUCTIONENABLED,$SA1,$SESSION1,$STRATEGYCLASS1,2:true,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$STRATEGYCLASS1,2:true,TRUE,TRUE,Comment
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$STRATEGYCLASS1,2:25000-25000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$STRATEGYCLASS1,2:25000-25000,TRUE,TRUE,Comment
SETALLOWMARKETORDER,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLOWMARKETORDER,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$STRATEGYCLASS1,2:0,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$STRATEGYCLASS1,2:0,TRUE,TRUE,Comment
SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$STRATEGYCLASS1,2:1-99999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$STRATEGYCLASS1,2:1-99999,TRUE,TRUE,Comment
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$STRATEGYCLASS1,2:1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$STRATEGYCLASS1,2:1,TRUE,TRUE,Comment
SETINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
SETEXCHANGEPRESCRIBEDWIDTH,$SA1,$SESSION1,$STRATEGYCLASS1,0.0-999.0:999.0,TRUE,TRUE,Comment
PAUSE,2000
VERIFYEXCHANGEPRESCRIBEDWIDTH,$SA1,$SESSION1,$STRATEGYCLASS1,0.0-999.0:999.0,TRUE,TRUE,Comment
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false;5:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,-8:false;5:false,TRUE,TRUE,Comment
SETINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
SETTICKSAWAYFORRECOA,$SA1,$SESSION1,$STRATEGYCLASS1,0,TRUE,TRUE,Comment
PAUSE,2000
VERIFYTICKSAWAYFORRECOA,$SA1,$SESSION1,$STRATEGYCLASS1,0,TRUE,TRUE,Comment
SETNUMBEROFATTEMPTSFORRECOA,$SA1,$SESSION1,$STRATEGYCLASS1,0,TRUE,TRUE,Comment
PAUSE,2000
VERIFYNUMBEROFATTEMPTSFORRECOA,$SA1,$SESSION1,$STRATEGYCLASS1,0,TRUE,TRUE,Comment
SETENABLECPSBOOKING,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYENABLECPSBOOKING,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment

COMMENT, Routing Property Setup
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,500000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,500000,TRUE,TRUE,Comment
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,500000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,500000,TRUE,TRUE,Comment
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,500000,All,$TE,SIMPLE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,500000,All,$TE,SIMPLE,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,500000,All,$TE,COMPLEX,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,500000,All,$TE,COMPLEX,TRUE,TRUE,Comment
SETCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,TRUE,TRUE,Comment

SETALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
SETALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,500000,All,$TE,DN,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,500000,All,$TE,DN,TRUE,TRUE,Comment
SETENABLECPSORDERBOOKING,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYENABLECPSORDERBOOKING,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment

COMMENT, Pre-Test Settings
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Comment
SUBSCRIBEAUCTION,$MM1,$SESSION1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
SUBSCRIBERECAP,$MM1,$SESSION1,$STRATEGY1,TRUE,TRUE,Comment
SUBSCRIBECURRENTMARKETV3,$MM1,$SESSION4,$CLASS11,$CLASS11PRODUCT1,0,TRUE,TRUE,Comment

COMMENT, Test Case 1:SETTING THE PRODUCT STATE. SETTING NBBO and BOTR
CLEARALLCALLBACKS,$MM1
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION4,$CLASS11PRODUCT1,$CLASS11,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION4,$CLASS11PRODUCT1,$CLASS11,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION4,$CLASS11PRODUCT1,$CLASS11,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION4,$CLASS11PRODUCT1,$CLASS11,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PARLOGIN,$PAR1,$PAR_PWD1,$WORKSTATION1,$PARCONN1,TRUE,TRUE,Comment

UPDATENBBO,$SA1,$SESSION4,$CLASS11,$CLASS11PRODUCT1,9.90,NYSE:100,10.30,NYSE:100,TRUE,TRUE,Comment
UPDATEALLEXCHANGESBBOWITHNEWFORMAT,$SA1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,NYSE:B:0.90:100:BOTR:N:A:1.30:100:BOTR:N,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 2:During an ongoing COA for CUSTOMER CPS order on the SAME side and BETTER price than the resting CUSTOMER CPS order on Strategy:Inbound CPS Order from PAR (at price marketable with both CPS orders and legs) ends COA prematurely and trades FULL Q-TY with both CPS orders (COA-ed and resting CPS Order)
CLEARALLCALLBACKS,$MM1
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION4,$CLASS11PRODUCT1,$CLASS11,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,10000,2,10,20,10000,$CLASS11PRODUCT1,$SESSION4,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OTG,7190,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SNY,9633,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KZL,7653,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KZL,7653,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,20000,1.00,1.20,200,B,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,KZL,7653,*,*,C,8.75,2,20000,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-8,90,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KZL,7653,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,20000,1.00,1.20,200,B,100,100,1,200,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment

COMMENT, Test Case 3:During an ongoing COA for CUSTOMER CPS order on the SAME side and BETTER price than the resting CUSTOMER CPS order on Strategy:Inbound CPS Order from PAR (at price marketable with both CPS orders and Legs) ends COA prematurely and trades PARTIAL Q-TY with both CPS orders (COA-ed and resting CPS Order). The remainder of the PAR order is routed back to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,10000,2,10,20,10000,$CLASS11PRODUCT1,$SESSION4,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BNL,9562,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,GRA,8035,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,GSW,3918,ABC,*,$MM1EXCHANGE,$MM1,400,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,GSW,3918,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,40000,S,0,0,100,40000,1.00,1.20,400,B,100,100,1,400,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,GSW,3918,*,*,C,8.75,2,40000,400,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-8,90,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,GSW,3918,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,40000,1.00,1.20,200,B,100,100,1,400,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,GSW,3918,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,40000,0.00,0.00,200,B,0,0,1,400,FALSE,TRUE,Comment

COMMENT, Test Case 4:During an ongoing COA for CUSTOMER CPS order on the SAME side and BETTER price than the resting CUSTOMER CPS order on Strategy:Inbound CPS Order from PAR (at price marketable with both CPS orders and Legs) ends COA prematurely and trades FULL Q-TY ONLY with COA-ed CPS order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,10000,2,10,20,10000,$CLASS11PRODUCT1,$SESSION4,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LLY,9202,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DUT,9162,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PJT,9887,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,5000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,PJT,9887,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,10000,S,0,0,100,10000,1.00,1.20,100,B,100,100,1,100,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,PJT,9887,*,*,C,8.75,2,10000,100,Y,TRUE,TRUE,Comment
PAUSE,10000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-8,95,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,PJT,9887,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,10000,S,0,0,100,10000,1.00,1.20,100,B,100,100,1,100,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LLY,9202,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LLY,9202,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 5:During an ongoing COA for NON-CUSTOMER CPS order on the SAME side and BETTER price than the resting CUSTOMER CPS order on Strategy:Inbound CPS Order from PAR (at price marketable with both CPS orders and legs) does NOT end COA prematurely. COA continues and PAR order is returned to PAR. Once COA ends COA-ed order is BOOKED
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,10000,2,10,20,10000,$CLASS11PRODUCT1,$SESSION4,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTR,1534,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FOD,9481,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ELQ,5314,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,ELQ,5314,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,20000,1.00,1.20,200,B,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,ELQ,5314,*,*,C,8.75,2,20000,200,Y,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,20000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,95,0,2,0,00,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,ELQ,5314,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,20000,1.00,1.20,200,B,100,100,1,200,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,ELQ,5314,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,20000,S,0,0,100,20000,1.00,1.20,200,B,100,100,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTR,1534,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XTR,1534,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FOD,9481,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FOD,9481,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 6:During an ongoing COA for NON-CUSTOMER CPS order on the SAME side and BETTER price than the resting CUSTOMER CPS order on Strategy:Inbound CPS Order from PAR (at price marketable with both CPS orders and Legs) does NOT end COA prematurely and PAR order is returned to PAR. Once COA ends normally COA-ed order is BOOKED. CONDITION:Quantity of the PAR order is sufficient to trade with both orders
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,10000,2,10,20,10000,$CLASS11PRODUCT1,$SESSION4,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TQC,7011,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MOY,3089,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SVY,8558,ABC,*,$MM1EXCHANGE,$MM1,400,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,SVY,8558,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,40000,S,0,0,100,40000,1.00,1.20,400,B,100,100,1,400,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,SVY,8558,*,*,C,8.75,2,40000,400,Y,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,SVY,8558,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,40000,S,0,0,100,40000,1.00,1.20,400,B,100,100,1,400,TRUE,TRUE,Comment
PAUSE,20000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,95,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,SVY,8558,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,40000,S,0,0,100,40000,1.00,1.20,400,B,100,100,1,400,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TQC,7011,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TQC,7011,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MOY,3089,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MOY,3089,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 7:During an ongoing COA for NON-CUSTOMER CPS order on the SAME side and BETTER price than the resting CUSTOMER CPS order on Strategy:Inbound CPS Order from PAR (at price marketable with both CPS orders and Legs) does NOT end COA prematurely and PAR order is returned to PAR. Once COA ends normally COA-ed order is BOOKED. CONDITION:Quantity of the PAR order is NOT sufficient to trade with both orders
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION4,$CLASS11PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,10000,2,10,20,10000,$CLASS11PRODUCT1,$SESSION4,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV3BESTMARKETQUERY,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQK,1499,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DPK,7830,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QCK,8431,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS11PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCK,8431,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,10000,S,0,0,100,10000,1.00,1.20,100,B,100,100,1,100,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCK,8431,*,*,C,8.75,2,10000,100,Y,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,10000,2,10,00,10000,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCK,8431,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,10000,S,0,0,100,10000,1.00,1.20,100,B,100,100,1,100,TRUE,TRUE,Comment
PAUSE,20000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,95,0,2,0,00,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,QCK,8431,*,8.75,C,1,2,Y,Y,N,Y,-,0.00,0.00,10000,S,0,0,100,10000,1.00,1.20,100,B,100,100,1,100,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION4,$CLASS11PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQK,1499,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQK,1499,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DPK,7830,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DPK,7830,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case:Cleaning Up Task
TRADERLOGOUT,$MM1,TRUE,TRUE,Comment

SALOGOUT,$SA1,TRUE,TRUE,Comment
ENDPOINT,
PRINTOUTPUTSUMMARY,