TESTSUITENAME,NON_BOB_Class:TB_BUTTON_for_COB_PART_2 WR 6357 Test Plan
PRINTOUTPUTHEADING,
STARTPOINT,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Comment


COMMENT, Test Cases:24

COMMENT, Test Environment Setup
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,2,PRODUCT,$HYBRIDCLASSLIST1,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Comment

COMMENT, User Setup
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API $MM1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE" !
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Comment

STRATEGYCREATE,$MM1,$SESSION1,$CLASS1,$STRATEGY1,2,$CLASS1PRODUCT1,1,B,$CLASS1PRODUCT2,1,S,TRUE,TRUE,Comment

COMMENT, Trading Property Setup
SETAUCTIONENABLED,$SA1,$SESSION1,$STRATEGYCLASS1,2:true,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$STRATEGYCLASS1,2:true,TRUE,TRUE,Comment
SETAUCTIONTIMETOLIVE,$SA1,$SESSION1,$STRATEGYCLASS1,2:25000-25000,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONTIMETOLIVE,$SA1,$SESSION1,$STRATEGYCLASS1,2:25000-25000,TRUE,TRUE,Comment
SETALLOWMARKETORDER,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLOWMARKETORDER,$SA1,$SESSION1,$STRATEGYCLASS1,TRUE,TRUE,TRUE,Comment
SETAUCTIONMINQUOTERS,$SA1,$SESSION1,$STRATEGYCLASS1,2:0,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONMINQUOTERS,$SA1,$SESSION1,$STRATEGYCLASS1,2:0,TRUE,TRUE,Comment
SETAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$STRATEGYCLASS1,2:1-99999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONMINMAXORDERSIZE,$SA1,$SESSION1,$STRATEGYCLASS1,2:1-99999,TRUE,TRUE,Comment
SETAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$STRATEGYCLASS1,2:1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONRECEIVERTYPES,$SA1,$SESSION1,$STRATEGYCLASS1,2:1,TRUE,TRUE,Comment
SETINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
SETEXCHANGEPRESCRIBEDWIDTH,$SA1,$SESSION1,$STRATEGYCLASS1,0.0-3.0:0.5;3.0-10.0:1.0;10.0-9999:2.0,TRUE,TRUE,Comment
PAUSE,2000
VERIFYEXCHANGEPRESCRIBEDWIDTH,$SA1,$SESSION1,$STRATEGYCLASS1,0.0-3.0:0.5;3.0-10.0:1.0;10.0-9999:2.0,TRUE,TRUE,Comment
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,5:false;-8:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,5:false;-8:false,TRUE,TRUE,Comment
SETINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYINDEXHYBRIDINDICATOR,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment

COMMENT, Routing Property Setup
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,49999,TRUE,TRUE,Comment
SETFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,49999,TRUE,TRUE,Comment
PAUSE,2000
VERIFYFIRMVOLUMELIMIT,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,49999,TRUE,TRUE,Comment
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$CLASS1,*,1,49999,All,$TE,SIMPLE,TRUE,TRUE,Comment
SETVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,49999,All,$TE,COMPLEX,TRUE,TRUE,Comment
PAUSE,2000
VERIFYVOLUMEDEVIATION,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,49999,All,$TE,COMPLEX,TRUE,TRUE,Comment
SETCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYCOAELIGIBLE,$SA1,$SESSION1,$MM1EXCHANGE,$MM1EXECFIRM,$STRATEGYCLASS1,*,1,TRUE,TRUE,Comment

SETALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
SETALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$CLASS1,FALSE,TRUE,TRUE,Comment
SETALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLELECTRONICTRADINGCLASS,$SA1,$SESSION1,$STRATEGYCLASS1,FALSE,TRUE,TRUE,Comment

COMMENT, Pre-Test Settings
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Comment
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT2,TRUE,TRUE,Comment
SUBSCRIBERECAP,$MM1,$SESSION1,$STRATEGY1,TRUE,TRUE,Comment
SUBSCRIBEAUCTION,$MM1,$SESSION1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment

COMMENT, Test Case 1:During an ongoing COA for CUSTOMER complex order on the SAME side and BETTER price than the resting CUSTOMER complex order on Strategy:Inbound Complex Order from PAR (at price marketable with both complex orders and legs) ends COA prematurely and trades FULL Q-TY with both complex orders (COA-ed and resting Complex Order)
CLEARALLCALLBACKS,$MM1
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT2,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT2,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT2,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT2,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
PARLOGIN,$PAR1,$PAR_PWD1,$WORKSTATION1,$PARCONN1,TRUE,TRUE,Comment

TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,100,2,10,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KQD,2013,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,GQR,4734,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EWE,6781,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,EWE,6781,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,200,1.00,1.20,200,B,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,EWE,6781,*,*,C,8.75,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-8,90,100,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,EWE,6781,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,200,1.00,1.20,200,B,100,100,1,200,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 2:During an ongoing COA for CUSTOMER complex order on the SAME side and BETTER price than the resting CUSTOMER complex order on Strategy:Inbound Complex Order from PAR (at price marketable with both complex orders and Legs) ends COA prematurely and trades PARTIAL Q-TY with both complex orders (COA-ed and resting Complex Order). The remainder of the PAR order is routed back to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,100,2,10,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FNO,5856,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QKO,6335,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AZL,150,ABC,*,$MM1EXCHANGE,$MM1,400,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,AZL,150,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,400,S,100,100,1,400,1.00,1.20,400,B,100,100,1,400,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,AZL,150,*,*,C,8.75,2,400,400,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-8,90,100,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,AZL,150,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,400,1.00,1.20,200,B,100,100,1,400,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,AZL,150,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,400,1.00,1.20,200,B,100,100,1,400,FALSE,TRUE,Comment

COMMENT, Test Case 3:During an ongoing COA for CUSTOMER complex order on the SAME side and BETTER price than the resting CUSTOMER complex order on Strategy:Inbound Complex Order from PAR (at price marketable with both complex orders and Legs) ends COA prematurely and trades FULL Q-TY ONLY with COA-ed complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,100,2,10,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UGW,7104,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KKE,3644,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KDZ,8160,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,5000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KDZ,8160,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,100,S,100,100,1,100,1.00,1.20,100,B,100,100,1,100,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,KDZ,8160,*,*,C,8.75,2,100,100,Y,TRUE,TRUE,Comment
PAUSE,10000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-8,95,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,KDZ,8160,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,100,S,100,100,1,100,1.00,1.20,100,B,100,100,1,100,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UGW,7104,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UGW,7104,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 4:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is EQUAL to COA-ed order) ends COA prematurely. COA-ed order trades with legs and the remainder trades with the resting Complex Order. PAR order (Full Q-ty) is routed back to PAR due to NO DSM
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XGX,9110,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XHI,9457,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OBO,7252,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,OBO,7252,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,100,100,1,200,1.00,1.20,200,S,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,OBO,7252,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,100,2,0,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,0,2,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,OBO,7252,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,0.00,200,B,100,0,1,200,0.00,1.20,200,S,0,100,1,200,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,OBO,7252,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,200,B,0,0,1,200,0.00,0.00,200,S,0,0,1,200,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XGX,9110,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XGX,9110,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 5:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is EQUAL to COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Full Q-ty with the resting complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,EUX,7503,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DYY,4958,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MFG,848,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MFG,848,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,300,1,200,1.00,1.20,200,S,300,300,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,MFG,848,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MFG,848,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,100,1,200,1.00,1.20,200,S,100,300,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 6:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is EQUAL to COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Partial Q-ty with the resting complex order and the remainder is routed to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NSO,9247,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YUS,276,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MAV,8052,ABC,*,$MM1EXCHANGE,$MM1,250,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAV,8052,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,250,B,300,300,1,250,1.00,1.20,250,S,300,300,1,250,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAV,8052,*,*,D,0.20,2,250,250,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAV,8052,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,50,B,300,100,1,250,1.00,1.20,50,S,100,300,1,250,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAV,8052,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,50,B,0,0,1,250,0.00,0.00,50,S,0,0,1,250,FALSE,TRUE,Comment

COMMENT, Test Case 7:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is BETTER than price of the COA-ed order) ends COA prematurely. COA-ed order trades with legs and the remainder trades with resting Complex Order. PAR order (Full Q-ty) is routed back to PAR due to NO DSM
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WCY,1078,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HDF,1454,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UTK,7292,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTK,7292,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,100,100,1,200,1.00,1.20,200,S,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTK,7292,*,*,D,0.21,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,100,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,0,2,0,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,100,2,0,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTK,7292,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,0.00,200,B,100,0,1,200,0.00,1.20,200,S,0,100,1,200,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTK,7292,*,0.21,D,1,2,Y,Y,N,Y,-,0.00,0.00,200,B,0,0,1,200,0.00,0.00,200,S,0,0,1,200,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WCY,1078,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WCY,1078,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 8:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is BETTER than price of the COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Full Q-ty with the resting complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,OZB,9515,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UIY,292,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BOK,5352,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BOK,5352,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,300,1,200,1.00,1.20,200,S,300,300,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,BOK,5352,*,*,D,0.21,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BOK,5352,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,100,1,200,1.00,1.20,200,S,100,300,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 9:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is BETTER than price of the COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Partial Q-ty with the resting complex order and the remainder is routed to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IRL,6601,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PJS,4543,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NXO,2337,ABC,*,$MM1EXCHANGE,$MM1,250,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NXO,2337,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,250,B,300,300,1,250,1.00,1.20,250,S,300,300,1,250,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,NXO,2337,*,*,D,0.21,2,250,250,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NXO,2337,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,50,B,300,100,1,250,1.00,1.20,50,S,100,300,1,250,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NXO,2337,*,0.21,D,1,2,Y,Y,N,Y,-,0.00,0.00,50,B,0,0,1,250,0.00,0.00,50,S,0,0,1,250,FALSE,TRUE,Comment

COMMENT, Test Case 10:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (BUT the price of the COA-ed complex order is SUPER-MARKETABLE) ends COA prematurely. COA-ed order trades with legs and the remainder trades with resting Complex Order. PAR order (Full Q-ty) is routed back to PAR due to NO DSM
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TJS,4558,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LSB,4132,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UTF,292,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTF,292,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,100,100,1,200,1.00,1.20,200,S,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTF,292,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,100,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,100,2,0,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,0,2,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTF,292,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,0.00,200,B,100,0,1,200,0.00,1.20,200,S,0,100,1,200,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,UTF,292,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,200,B,0,0,1,200,0.00,0.00,200,S,0,0,1,200,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TJS,4558,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TJS,4558,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 11:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (BUT the price of the COA-ed complex order is SUPER-MARKETABLE) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Full Q-ty with the resting complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FCN,8950,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,USM,4369,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,BOL,7662,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,5000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BOL,7662,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,300,1,200,1.00,1.20,200,S,300,300,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,BOL,7662,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,10000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,BOL,7662,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,100,1,200,1.00,1.20,200,S,100,300,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 12:During an ongoing COA for CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (BUT the price of the COA-ed complex order is SUPER-MARKETABLE) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Partial Q-ty with the resting complex order and the remainder is routed to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RUK,3334,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TNT,9759,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JHT,3372,ABC,*,$MM1EXCHANGE,$MM1,250,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JHT,3372,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,250,B,300,300,1,250,1.00,1.20,250,S,300,300,1,250,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,JHT,3372,*,*,D,0.20,2,250,250,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JHT,3372,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,50,B,300,100,1,250,1.00,1.20,50,S,100,300,1,250,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,JHT,3372,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,50,B,0,0,1,250,0.00,0.00,50,S,0,0,1,250,FALSE,TRUE,Comment

COMMENT, Test Case 13:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is EQUAL to COA-ed order) ends COA prematurely. COA-ed order trades with legs and the remainder trades with resting Complex Order. PAR order (Full Q-ty) is routed back to PAR due to NO DSM
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KUC,9109,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HCD,1681,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NBD,3109,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NBD,3109,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,100,100,1,200,1.00,1.20,200,S,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,NBD,3109,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,100,2,0,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,0,2,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NBD,3109,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,0.00,200,B,100,0,1,200,0.00,1.20,200,S,0,100,1,200,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,NBD,3109,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,200,B,0,0,1,200,0.00,0.00,200,S,0,0,1,200,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KUC,9109,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KUC,9109,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 14:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is EQUAL to COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Full Q-ty with the resting complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,UJC,2137,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVI,140,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,CZJ,6382,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,CZJ,6382,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,300,1,200,1.00,1.20,200,S,300,300,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,CZJ,6382,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,CZJ,6382,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,100,1,200,1.00,1.20,200,S,100,300,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 15:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is EQUAL to COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Partial Q-ty with the resting complex order and the remainder is routed to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PXJ,2701,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QNP,3970,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TXE,6096,ABC,*,$MM1EXCHANGE,$MM1,250,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,5000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,TXE,6096,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,250,B,300,300,1,250,1.00,1.20,250,S,300,300,1,250,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,TXE,6096,*,*,D,0.20,2,250,250,Y,TRUE,TRUE,Comment
PAUSE,10000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,TXE,6096,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,50,B,300,100,1,250,1.00,1.20,50,S,100,300,1,250,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,TXE,6096,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,50,B,0,0,1,250,0.00,0.00,50,S,0,0,1,250,FALSE,TRUE,Comment

COMMENT, Test Case 16:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is BETTER than price of the COA-ed order) ends COA prematurely. COA-ed order trades with legs and the remainder trades with resting Complex Order. PAR order (Full Q-ty) is routed back to PAR due to NO DSM
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ENO,7691,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,CKS,5066,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XHA,2737,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XHA,2737,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,100,100,1,200,1.00,1.20,200,S,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,XHA,2737,*,*,D,0.21,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,100,2,0,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,0,2,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XHA,2737,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,0.00,200,B,100,0,1,200,0.00,1.20,200,S,0,100,1,200,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XHA,2737,*,0.21,D,1,2,Y,Y,N,Y,-,0.00,0.00,200,B,0,0,1,200,0.00,0.00,200,S,0,0,1,200,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ENO,7691,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,ENO,7691,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 17:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is BETTER than price of the COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Full Q-ty with the resting complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DLT,3250,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NQN,799,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WLB,2846,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,WLB,2846,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,300,1,200,1.00,1.20,200,S,300,300,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,WLB,2846,*,*,D,0.21,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,WLB,2846,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,100,1,200,1.00,1.20,200,S,100,300,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 18:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (where PAR price is BETTER than price of the COA-ed order) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Partial Q-ty with the resting complex order and the remainder is routed to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,QFJ,2765,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DMN,4371,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,LAP,6139,ABC,*,$MM1EXCHANGE,$MM1,250,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,LAP,6139,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,250,B,300,300,1,250,1.00,1.20,250,S,300,300,1,250,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,LAP,6139,*,*,D,0.21,2,250,250,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,LAP,6139,*,0.21,D,1,2,Y,Y,N,Y,-,1.00,1.20,50,B,300,100,1,250,1.00,1.20,50,S,100,300,1,250,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,LAP,6139,*,0.21,D,1,2,Y,Y,N,Y,-,0.00,0.00,50,B,0,0,1,250,0.00,0.00,50,S,0,0,1,250,FALSE,TRUE,Comment

COMMENT, Test Case 19:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (BUT the price of the COA-ed complex order is SUPER-MARKETABLE) ends COA prematurely. COA-ed order trades with legs and the remainder trades with resting Complex Order. PAR order (Full Q-ty) is routed back to PAR due to NO DSM
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IYS,8894,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XLG,5805,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FXK,7619,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FXK,7619,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,100,100,1,200,1.00,1.20,200,S,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,FXK,7619,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,100,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,100,2,0,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,1,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,0,2,0,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FXK,7619,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,0.00,200,B,100,0,1,200,0.00,1.20,200,S,0,100,1,200,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FXK,7619,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,200,B,0,0,1,200,0.00,0.00,200,S,0,0,1,200,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IYS,8894,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IYS,8894,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 20:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (BUT the price of the COA-ed complex order is SUPER-MARKETABLE) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Full Q-ty with the resting complex order
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XES,9275,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NNS,6213,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FMV,71,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FMV,71,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,300,1,200,1.00,1.20,200,S,300,300,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,FMV,71,*,*,D,0.20,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FMV,71,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,200,B,300,100,1,200,1.00,1.20,200,S,100,300,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment

COMMENT, Test Case 21:During an ongoing COA for NON-CUSTOMER complex order on the OPPOSITE side to the resting CUSTOMER complex order in COB:Inbound Complex Order from PAR at marketable price with resting complex order (BUT the price of the COA-ed complex order is SUPER-MARKETABLE) ends COA prematurely. COA-ed order trades with the legs. PAR order trades Partial Q-ty with the resting complex order and the remainder is routed to PAR
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,300,2,1,20,300,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,300,2,1,00,300,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PDM,3754,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,200,1,0,00,FALSE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,IYB,5335,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,D,2,-0,21,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,200,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,200,2,0,20,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MAQ,8687,ABC,*,$MM1EXCHANGE,$MM1,250,$STRATEGY1,D,2,-0,20,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,5000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAQ,8687,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,250,B,300,300,1,250,1.00,1.20,250,S,300,300,1,250,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAQ,8687,*,*,D,0.20,2,250,250,Y,TRUE,TRUE,Comment
PAUSE,10000
LASTSALEQUERY,$MM1,$SESSION1,$STRATEGY1,2,-0,20,200,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,300,2,1,00,100,2,1,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,300,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAQ,8687,*,0.20,D,1,2,Y,Y,N,Y,-,1.00,1.20,50,B,300,100,1,250,1.00,1.20,50,S,100,300,1,250,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,MAQ,8687,*,0.20,D,1,2,Y,Y,N,Y,-,0.00,0.00,50,B,0,0,1,250,0.00,0.00,50,S,0,0,1,250,FALSE,TRUE,Comment

COMMENT, Test Case 22:During an ongoing COA for NON-CUSTOMER complex order on the SAME side and BETTER price than the resting CUSTOMER complex order on Strategy:Inbound Complex Order from PAR (at price marketable with both complex orders and legs) does NOT end COA prematurely. COA continues and PAR order is returned to PAR. Once COA ends COA-ed order is BOOKED
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,100,2,10,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HUM,6346,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YYX,6665,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FSB,3036,ABC,*,$MM1EXCHANGE,$MM1,200,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FSB,3036,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,200,1.00,1.20,200,B,100,100,1,200,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,FSB,3036,*,*,C,8.75,2,200,200,Y,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
PAUSE,20000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,95,0,2,0,00,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FSB,3036,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,200,1.00,1.20,200,B,100,100,1,200,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,FSB,3036,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,200,S,100,100,1,200,1.00,1.20,200,B,100,100,1,200,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HUM,6346,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HUM,6346,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YYX,6665,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YYX,6665,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 23:During an ongoing COA for NON-CUSTOMER complex order on the SAME side and BETTER price than the resting CUSTOMER complex order on Strategy:Inbound Complex Order from PAR (at price marketable with both complex orders and Legs) does NOT end COA prematurely and PAR order is returned to PAR. Once COA ends normally COA-ed order is BOOKED
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,100,2,10,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VEU,7658,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6163,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VUF,2226,ABC,*,$MM1EXCHANGE,$MM1,400,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VUF,2226,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,400,S,100,100,1,400,1.00,1.20,400,B,100,100,1,400,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,VUF,2226,*,*,C,8.75,2,400,400,Y,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VUF,2226,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,400,S,100,100,1,400,1.00,1.20,400,B,100,100,1,400,TRUE,TRUE,Comment
PAUSE,20000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,95,0,2,0,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,VUF,2226,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,400,S,100,100,1,400,1.00,1.20,400,B,100,100,1,400,FALSE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VEU,7658,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,VEU,7658,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6163,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,YVD,6163,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 24:During an ongoing COA for NON-CUSTOMER complex order on the SAME side and BETTER price than the resting CUSTOMER complex order on Strategy:Inbound Complex Order from PAR (at price marketable with both complex orders and Legs) does NOT end COA prematurely and PAR order is returned to PAR. Once COA ends normally COA-ed order is BOOKED
CLEARALLCALLBACKS,$MM1
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT2,4,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
QUOTE,$MM1,2,10,00,100,2,10,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
QUOTE,$MM1,2,1,00,100,2,1,20,100,$CLASS1PRODUCT2,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
PAUSE,1000
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$STRATEGY1,$STRATEGYCLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$STRATEGY1,4,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WFA,3271,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,90,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:249
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION249,U,100,1,0,00,TRUE,TRUE,Comment
PAUSE,30000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PBN,9310,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,D,2,-8,95,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,F,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:250
PAUSE,1000
RFPQUERY,$MM1,$SESSION1,$STRATEGY1,$AUCTION250,U,100,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
STRATEGYORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,XEH,7050,ABC,*,$MM1EXCHANGE,$MM1,100,$STRATEGY1,O,2,8,75,D,21/12/2003 6:00:00.0,1,2,0,00,0,-,-,BARTID=$WORKSTATION1,$MM1,$MM1,C,FALSE,C,U,0,-,-,$SESSION1,2,$CLASS1PRODUCT1,$MM1EXCHANGE,$MM1EXECFIRM,C,C,$CLASS1PRODUCT2,$MM1EXCHANGE,$MM1EXECFIRM,C,C,TRUE,TRUE,This is the Strategy order: BA:253
PAUSE,10000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XEH,7050,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,100,S,100,100,1,100,1.00,1.20,100,B,100,100,1,100,TRUE,TRUE,Comment
PARCOMPLEXORDERTRADEWITHBOOKREQ,$PAR1,$MM1,$MM1EXECFIRM,ABC,XEH,7050,*,*,C,8.75,2,100,100,Y,TRUE,TRUE,Comment
PAUSE,5000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,90,0,2,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT1,100,2,10,00,100,2,10,20,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE,$CLASS1PRODUCT2,100,2,1,00,100,2,1,20,TRUE,TRUE,Comment
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XEH,7050,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,100,S,100,100,1,100,1.00,1.20,100,B,100,100,1,100,TRUE,TRUE,Comment
PAUSE,20000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,100,2,-8,95,0,2,0,00,TRUE,TRUE,Comment
CANCELALLPARORDERS,$PAR1,$MM1,TRUE,TRUE,Comment
CLEARALLPARCALLBACKS,$PAR1
PAUSE,1000
VERIFYCOMPLEXPARORDER,$PAR1,$MM1,$MM1EXECFIRM,ABC,XEH,7050,*,8.75,C,1,2,Y,Y,N,Y,-,10.00,10.20,100,S,100,100,1,100,1.00,1.20,100,B,100,100,1,100,FALSE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCEL,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT2,2,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WFA,3271,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,WFA,3271,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
ORDERCANCELBYIDNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PBN,9310,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PBN,9310,ABC,*,$SESSION1,$STRATEGY1,2,100,TRUE,TRUE,Comment
PAUSE,1000
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$STRATEGY1,0,2,0,00,0,2,0,00,TRUE,TRUE,Comment

COMMENT, Test Case:Cleaning Up Task
TRADERLOGOUT,$MM1,TRUE,TRUE,Comment

SALOGOUT,$SA1,TRUE,TRUE,Comment
ENDPOINT,
PRINTOUTPUTSUMMARY,