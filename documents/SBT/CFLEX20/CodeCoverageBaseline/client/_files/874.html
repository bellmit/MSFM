<HTML><HEAD><META CONTENT="text/html; charset=ISO-8859-1" HTTP-EQUIV="Content-Type"/><TITLE>EMMA Coverage Report</TITLE><STYLE TYPE="text/css"> TABLE,TD,TH {border-style:solid; border-color:black;} TD,TH {background:white;margin:0;line-height:100%;padding-left:0.5em;padding-right:0.5em;} TD {border-width:0 1px 0 0;} TH {border-width:1px 1px 1px 0;} TR TD.h {color:red;} TABLE {border-spacing:0; border-collapse:collapse;border-width:0 0 1px 1px;} P,H1,H2,H3,TH {font-family:verdana,arial,sans-serif;font-size:10pt;} TD {font-family:courier,monospace;font-size:10pt;} TABLE.hdft {border-spacing:0;border-collapse:collapse;border-style:none;} TABLE.hdft TH,TABLE.hdft TD {border-style:none;line-height:normal;} TABLE.hdft TH.tl,TABLE.hdft TD.tl {background:#6699CC;color:white;} TABLE.hdft TD.nv {background:#6633DD;color:white;} .nv A:link {color:white;} .nv A:visited {color:white;} .nv A:active {color:yellow;} TABLE.hdft A:link {color:white;} TABLE.hdft A:visited {color:white;} TABLE.hdft A:active {color:yellow;} .in {color:#356085;} TABLE.s TD {padding-left:0.25em;padding-right:0.25em;} TABLE.s TD.l {padding-left:0.25em;padding-right:0.25em;text-align:right;background:#F0F0F0;} TABLE.s TR.z TD {background:#FF9999;} TABLE.s TR.p TD {background:#FFFF88;} TABLE.s TR.c TD {background:#CCFFCC;} A:link {color:#0000EE;text-decoration:none;} A:visited {color:#0000EE;text-decoration:none;} A:hover {color:#0000EE;text-decoration:underline;} TABLE.cn {border-width:0 0 1px 0;} TABLE.s {border-width:1px 0 1px 1px;} TD.h {color:red;border-width:0 1px 0 0;} TD.f {border-width:0 1px 0 1px;} TD.hf {color:red;border-width:0 1px 0 1px;} TH.f {border-width:1px 1px 1px 1px;} TR.cis TD {background:#F0F0F0;} TR.cis TD {border-width:1px 1px 1px 0;} TR.cis TD.h {color:red;border-width:1px 1px 1px 0;} TR.cis TD.f {border-width:1px 1px 1px 1px;} TR.cis TD.hf {color:red;border-width:1px 1px 1px 1px;} TD.b {border-style:none;background:transparent;line-height:50%;}  TD.bt {border-width:1px 0 0 0;background:transparent;line-height:50%;} TR.o TD {background:#F0F0F0;}TABLE.it {border-style:none;}TABLE.it TD,TABLE.it TH {border-style:none;}</STYLE></HEAD><BODY><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="tl"><A HREF="http://emma.sourceforge.net/">EMMA</A> Coverage Report (generated Thu Mar 03 10:01:20 CST 2011)</TH></TR><TR><TD CLASS="nv">[<A HREF="../coverage.html">all classes</A>][<A HREF="b6.html">com.cboe.application.cache</A>]</TD></TR></TABLE><H2>COVERAGE SUMMARY FOR SOURCE FILE [<SPAN CLASS="in">CacheFactory.java</SPAN>]</H2><TABLE CELLSPACING="0" WIDTH="100%"><TR><TH>name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD>CacheFactory.java</TD><TD CLASS="h">8%   (1/13)</TD><TD CLASS="h">5%   (5/100)</TD><TD CLASS="h">8%   (131/1644)</TD><TD CLASS="h">8%   (40.5/484)</TD></TR></TABLE><H3>COVERAGE BREAKDOWN BY CLASS AND METHOD</H3><TABLE CLASS="cn" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="f">name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#0">CallStack</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/87)</TD><TD CLASS="h">0%   (0/26)</TD></TR><TR><TD CLASS="f"><A HREF="#0">CallStack (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/51)</TD><TD CLASS="h">0%   (0/15)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2">iterator (): Iterator</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#3">print (PrintStream, int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4">print (PrintWriter, int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#5">ClassToSessionClassCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/66)</TD><TD CLASS="h">0%   (0/20)</TD></TR><TR><TD CLASS="f"><A HREF="#5">ClassToSessionClassCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#7">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#8">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#9">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/26)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#a">ProductToSessionProductCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/67)</TD><TD CLASS="h">0%   (0/20)</TD></TR><TR><TD CLASS="f"><A HREF="#a">ProductToSessionProductCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#c">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#d">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#e">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/27)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#f">SessionClassToClassCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/50)</TD><TD CLASS="h">0%   (0/17)</TD></TR><TR><TD CLASS="f"><A HREF="#f">SessionClassToClassCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#11">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#12">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#13">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#14">SessionProductToProductCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/50)</TD><TD CLASS="h">0%   (0/17)</TD></TR><TR><TD CLASS="f"><A HREF="#14">SessionProductToProductCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#16">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#17">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#18">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#19">SessionProductToSessionStrategyCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/68)</TD><TD CLASS="h">0%   (0/20)</TD></TR><TR><TD CLASS="f"><A HREF="#19">SessionProductToSessionStrategyCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1b">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#1c">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1d">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/28)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#1e">SessionStrategyToSessionProductCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/48)</TD><TD CLASS="h">0%   (0/16)</TD></TR><TR><TD CLASS="f"><A HREF="#1e">SessionStrategyToSessionProductCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#20">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#21">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#22">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#23">SessionTypeToTypeCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/39)</TD><TD CLASS="h">0%   (0/14)</TD></TR><TR><TD CLASS="f"><A HREF="#23">SessionTypeToTypeCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/12)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#25">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#26">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#27">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#28">SubscriberFactory</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/12)</TD><TD CLASS="h">0%   (0/288)</TD><TD CLASS="h">0%   (0/69)</TD></TR><TR><TD CLASS="f"><A HREF="#29">&lt;static initializer&gt;</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/41)</TD><TD CLASS="h">0%   (0/10)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#28">SubscriberFactory (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#2b">getClassToSessionClass (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2c">getProductToSessionProduct (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#2d">getProductToStrategy (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2e">getSessionClassToClass (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#2f">getSessionProductToProduct (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#30">getSessionProductToSessionStrategy (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#31">getSessionStrategyToSessionProduct (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#32">getSessionTypeToType (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#33">getStrategyToProduct (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#34">getTypeToSessionType (String): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#35">SubscriberFactory$1</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/8)</TD></TR><TR><TD CLASS="f"><A HREF="#35">SubscriberFactory$1 (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#37">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/24)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#38">SubscriberFactory$2</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#38">SubscriberFactory$2 (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3a">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#3b">TypeToSessionTypeCacheSubscriber</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/62)</TD><TD CLASS="h">0%   (0/19)</TD></TR><TR><TD CLASS="f"><A HREF="#3b">TypeToSessionTypeCacheSubscriber (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3d">getIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#3e">initIgnoreSubscriber (): CacheSubscriber</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3f">update (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#40">CacheFactory</A></TD><TD>100% (1/1)</TD><TD CLASS="h">10%  (5/48)</TD><TD CLASS="h">17%  (131/779)</TD><TD CLASS="h">17%  (40.5/235)</TD></TR><TR><TD CLASS="f"><A HREF="#40">CacheFactory (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#42">createClassCache (): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#43">createFirmCache (boolean): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/31)</TD><TD CLASS="h">0%   (0/9)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#44">createProductClassCache (): Map</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/9)</TD></TR><TR><TD CLASS="f"><A HREF="#45">createStrategyCache (): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/24)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#46">flushCache (Map): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#47">getClassCache (): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/8)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#48">getFirmCache (boolean): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/13)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#49">getMap (String, Map): Map</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4a">getProduct (Product): ProductStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#4b">getProduct (int): ProductStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4c">getProductClassCache (): Map</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/8)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#4d">getProductTypeCache (): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4e">getRecentKeys (Map, int): Set</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/96)</TD><TD CLASS="h">0%   (0/22)</TD></TR><TR><TD CLASS="f"><A HREF="#4f">getSessionCache (String, String): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/9)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#50">getSessionClassCache (String): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/27)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#51">getSessionNames (): List</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#52">getSessionProductCache (String): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/30)</TD><TD CLASS="h">0%   (0/8)</TD></TR><TR><TD CLASS="f"><A HREF="#53">getSessionProductTypeCache (String): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/24)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#54">getSessionStrategyCache (String): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/31)</TD><TD CLASS="h">0%   (0/8)</TD></TR><TR><TD CLASS="f"><A HREF="#55">getSessionsMap (): Map</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#56">getStrategyCache (): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/8)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#57">loadClassCache (Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#58">loadProductCache (Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#59">loadProductTypeCache (Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5a">loadSessionClassCache (String, Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#5b">loadSessionProductCache (String, Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5c">loadSessionStrategyCache (String, Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#5d">loadStrategyCache (Object []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5e">makeSessionCache (String, String, CacheKeyGenerator, Object): Cache</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/17)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#5f">setCacheType (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#60">setCachingDirectory (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#61">setProductCacheName (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#62">setProductClassCacheName (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#63">shutdownProductCache (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#64">shutdownProductClassCache (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#65">updateClassCache (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#66">updateProductCache (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#67">updateProductTypeCache (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#68">updateSessionClassCache (String, Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#69">updateSessionProductCache (String, Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6a">updateSessionStrategyCache (String, Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#6b">updateStrategyCache (Object): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6c">createJCache (String, boolean, boolean): Map</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">19%  (32/167)</TD><TD CLASS="h">20%  (7.5/37)</TD></TR><TR><TD CLASS="f"><A HREF="#6d">createProductCache (boolean): Cache</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>85%  (50/59)</TD><TD CLASS="h">76%  (13/17)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6e">&lt;static initializer&gt;</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (37/37)</TD><TD>100% (15/15)</TD></TR><TR><TD CLASS="f"><A HREF="#6f">getProductCache (): Cache</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#70">getProductCache (boolean): Cache</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (9/9)</TD><TD>100% (4/4)</TD></TR></TABLE><P></P><TABLE CLASS="s" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="l">1</TD><TD>package com.cboe.application.cache;</TD></TR><TR><TD CLASS="l">2</TD><TD> </TD></TR><TR><TD CLASS="l">3</TD><TD>import com.cboe.application.jcache.JCacheManager;</TD></TR><TR><TD CLASS="l">4</TD><TD>import com.cboe.application.product.adapter.TimedClassKey;</TD></TR><TR><TD CLASS="l">5</TD><TD>import com.cboe.application.product.cache.ProductCacheKeyFactory;</TD></TR><TR><TD CLASS="l">6</TD><TD>import com.cboe.application.tradingSession.cache.TradingSessionCacheKeyFactory;</TD></TR><TR><TD CLASS="l">7</TD><TD>import com.cboe.domain.util.ClientProductStructBuilder;</TD></TR><TR><TD CLASS="l">8</TD><TD>import com.cboe.idl.cmiProduct.ClassStruct;</TD></TR><TR><TD CLASS="l">9</TD><TD>import com.cboe.idl.cmiProduct.ProductStruct;</TD></TR><TR><TD CLASS="l">10</TD><TD>import com.cboe.idl.cmiProduct.ProductTypeStruct;</TD></TR><TR><TD CLASS="l">11</TD><TD>import com.cboe.idl.cmiSession.SessionClassStruct;</TD></TR><TR><TD CLASS="l">12</TD><TD>import com.cboe.idl.cmiSession.SessionProductStruct;</TD></TR><TR><TD CLASS="l">13</TD><TD>import com.cboe.idl.cmiSession.SessionStrategyStruct;</TD></TR><TR><TD CLASS="l">14</TD><TD>import com.cboe.idl.cmiStrategy.StrategyStruct;</TD></TR><TR><TD CLASS="l">15</TD><TD>import com.cboe.idl.firm.FirmStruct;</TD></TR><TR><TD CLASS="l">16</TD><TD>import com.cboe.infrastructureServices.foundationFramework.utilities.Log;</TD></TR><TR><TD CLASS="l">17</TD><TD>import com.cboe.interfaces.application.Cache;</TD></TR><TR><TD CLASS="l">18</TD><TD>import com.cboe.interfaces.application.CacheKeyGenerator;</TD></TR><TR><TD CLASS="l">19</TD><TD>import com.cboe.interfaces.application.CacheSubscriber;</TD></TR><TR><TD CLASS="l">20</TD><TD> </TD></TR><TR><TD CLASS="l">21</TD><TD>import java.io.PrintStream;</TD></TR><TR><TD CLASS="l">22</TD><TD>import java.io.PrintWriter;</TD></TR><TR><TD CLASS="l">23</TD><TD>import java.io.StringWriter;</TD></TR><TR><TD CLASS="l">24</TD><TD>import java.util.*;</TD></TR><TR><TD CLASS="l">25</TD><TD>import java.util.concurrent.ConcurrentHashMap;</TD></TR><TR><TD CLASS="l">26</TD><TD> </TD></TR><TR><TD CLASS="l">27</TD><TD>import javax.cache.CacheEntry;</TD></TR><TR><TD CLASS="l">28</TD><TD>import javax.cache.CacheException;</TD></TR><TR><TD CLASS="l">29</TD><TD>import com.cboe.exceptions.*;</TD></TR><TR><TD CLASS="l">30</TD><TD>import com.cboe.client.util.Product;</TD></TR><TR><TD CLASS="l">31</TD><TD> </TD></TR><TR><TD CLASS="l">32</TD><TD>import static java.lang.System.getProperty;</TD></TR><TR><TD CLASS="l">33</TD><TD> </TD></TR><TR><TD CLASS="l">34</TD><TD> </TD></TR><TR><TD CLASS="l">35</TD><TD> </TD></TR><TR><TD CLASS="l">36</TD><TD>/**</TD></TR><TR><TD CLASS="l">37</TD><TD> * A factory class for creating {@link Cache}s for the CAS.</TD></TR><TR><TD CLASS="l">38</TD><TD> * &lt;p&gt;</TD></TR><TR><TD CLASS="l">39</TD><TD> * This class provides a central factory for creating various types of caches used in the CAS.</TD></TR><TR><TD CLASS="l">40</TD><TD> * Currently, product-based (type, class, product and strategy) and session-based (session-oriented</TD></TR><TR><TD CLASS="l">41</TD><TD> * versions of the product objects) caches are created here.</TD></TR><TR><TD CLASS="l">42</TD><TD> * &lt;p&gt;</TD></TR><TR><TD CLASS="l">43</TD><TD> * The caches created here are singletons (one copy per application). If a specific cache has already</TD></TR><TR><TD CLASS="l">44</TD><TD> * been created by a different object/thread, the factory will return a reference to that previously</TD></TR><TR><TD CLASS="l">45</TD><TD> * created cache - it will not instantiate a new one. In order to ensure a single copy of any cache,</TD></TR><TR><TD CLASS="l">46</TD><TD> * all calls to the factory are synchronized for thread-safety. NOTE: Some types of caches (namely session-based</TD></TR><TR><TD CLASS="l">47</TD><TD> * ones) do create multiple copies of the same &lt;i&gt;type&lt;/i&gt; of cache, but they are singletons in the sense</TD></TR><TR><TD CLASS="l">48</TD><TD> * that only one copy of that &#34;sub-typed&#34; cache will be created. For instance, although many session product</TD></TR><TR><TD CLASS="l">49</TD><TD> * caches may be created, only one such cache will be created &lt;i&gt;per session&lt;/i&gt;.</TD></TR><TR><TD CLASS="l">50</TD><TD> * &lt;p&gt;</TD></TR><TR><TD CLASS="l">51</TD><TD> * As part of cache instantiation, all the keys used to access data within the cache will also be</TD></TR><TR><TD CLASS="l">52</TD><TD> * instantiated and registered with the cache. This currently requires access to &lt;@link ProductCacheKeyFactory&gt;</TD></TR><TR><TD CLASS="l">53</TD><TD> * and &lt;@link TradingSessionCacheKeyFactory&gt;. If any new keys are added in the future, instantiating and</TD></TR><TR><TD CLASS="l">54</TD><TD> * registering those keys in the appropriate CacheFactory get method is recommended.</TD></TR><TR><TD CLASS="l">55</TD><TD> * &lt;p&gt;</TD></TR><TR><TD CLASS="l">56</TD><TD> * This class also instantiates and registers &lt;@link CacheSubscriber&gt; objects to perform synchronization</TD></TR><TR><TD CLASS="l">57</TD><TD> * duties between two related type of cache. These &#34;bridge objects&#34; subscribe to changes in one cache</TD></TR><TR><TD CLASS="l">58</TD><TD> * and update a second cache based on the data received. For instance, a change to the product cache means</TD></TR><TR><TD CLASS="l">59</TD><TD> * that the session product cache, which may contain a session product which in turn contains a reference to</TD></TR><TR><TD CLASS="l">60</TD><TD> * that product, is updated so that only one copy of the object exists within the JVM. This synchronization</TD></TR><TR><TD CLASS="l">61</TD><TD> * is typically bi-directional (updates to a session product means a likely change to the product cache), so</TD></TR><TR><TD CLASS="l">62</TD><TD> * two different bridge objects are created, one registered with each cache. Care must be taken to prevent</TD></TR><TR><TD CLASS="l">63</TD><TD> * an infinite update loop (product--&gt;session product--&gt;product--&gt;etc.). This can be done through the use</TD></TR><TR><TD CLASS="l">64</TD><TD> * of the &lt;code&gt;ignoreSubscriber&lt;/code&gt; parameter in the &lt;code&gt;updateCache&lt;/code&gt; call. Since the</TD></TR><TR><TD CLASS="l">65</TD><TD> * product-related caches are less dependent on session-related caches, the creation and registering of</TD></TR><TR><TD CLASS="l">66</TD><TD> * synchronization objects is only done when session-related caches are instantiated.</TD></TR><TR><TD CLASS="l">67</TD><TD> * &lt;p&gt;</TD></TR><TR><TD CLASS="l">68</TD><TD> * @author Brian Erst</TD></TR><TR><TD CLASS="l">69</TD><TD> * @author Gijo Joseph</TD></TR><TR><TD CLASS="l">70</TD><TD> * @see Cache</TD></TR><TR><TD CLASS="l">71</TD><TD> * @see ProductCacheKeyFactory</TD></TR><TR><TD CLASS="l">72</TD><TD> * @see TradingSessionCacheKeyFactory</TD></TR><TR><TD CLASS="l"><A NAME="40">73</A></TD><TD> * @see FirmCacheKeyFactory</TD></TR><TR><TD CLASS="l">74</TD><TD> * @version 2009.03.31</TD></TR><TR><TD CLASS="l"><A NAME="6e">75</A></TD><TD> */</TD></TR><TR><TD CLASS="l">76</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">77</TD><TD>public abstract class CacheFactory</TD></TR><TR><TD CLASS="l">78</TD><TD>{</TD></TR><TR CLASS="c"><TD CLASS="l">79</TD><TD>    private   static String productCacheName = &#34;ProductCache&#34;;</TD></TR><TR CLASS="c"><TD CLASS="l">80</TD><TD>    private   static String productClassCacheName = &#34;ProductClassCache&#34;;</TD></TR><TR CLASS="c"><TD CLASS="l">81</TD><TD>    private static Cache typeCache = null;</TD></TR><TR CLASS="c"><TD CLASS="l">82</TD><TD>    private static volatile Cache classCache = null;</TD></TR><TR CLASS="c"><TD CLASS="l">83</TD><TD>    private static volatile BaseCache productCache = null;</TD></TR><TR CLASS="c"><TD CLASS="l">84</TD><TD>    private static volatile Cache strategyCache = null;</TD></TR><TR CLASS="c"><TD CLASS="l">85</TD><TD>    private static volatile Map productClassCache=null;</TD></TR><TR><TD CLASS="l">86</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">87</TD><TD>    private static volatile Cache activeFirmCache = null;</TD></TR><TR CLASS="c"><TD CLASS="l">88</TD><TD>    private static volatile Cache inactiveFirmCache = null;</TD></TR><TR><TD CLASS="l">89</TD><TD> </TD></TR><TR><TD CLASS="l">90</TD><TD>    private static final String CACHE_TYPE     = &#34;TYPE&#34;;</TD></TR><TR><TD CLASS="l">91</TD><TD>    private static final String CACHE_CLASS    = &#34;CLASS&#34;;</TD></TR><TR><TD CLASS="l">92</TD><TD>    private static final String CACHE_PRODUCT  = &#34;PRODUCT&#34;;</TD></TR><TR><TD CLASS="l">93</TD><TD>    private static final String CACHE_STRATEGY = &#34;STRATEGY&#34;;</TD></TR><TR><TD CLASS="l">94</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">95</TD><TD>    private static Map&lt;String, Map&gt; sessionsMap = new HashMap&lt;String, Map&gt;();</TD></TR><TR CLASS="c"><TD CLASS="l">96</TD><TD>    private static String cachingDirectory=null;</TD></TR><TR CLASS="c"><TD CLASS="l">97</TD><TD>    private static String cacheType=null;</TD></TR><TR CLASS="c"><TD CLASS="l">98</TD><TD>    private static int maxElementsInMemory=2000000;</TD></TR><TR><TD CLASS="l">99</TD><TD>    private static ConcurrentHashMap&lt;Integer,ProductStruct&gt; productKeyMap;</TD></TR><TR><TD CLASS="l">100</TD><TD>    private static HashMap&lt;Product, ProductStruct&gt; productNameMap;</TD></TR><TR><TD CLASS="l">101</TD><TD> </TD></TR><TR><TD CLASS="l">102</TD><TD>    static</TD></TR><TR><TD CLASS="l">103</TD><TD>    {</TD></TR><TR CLASS="c"><TD CLASS="l">104</TD><TD>        typeCache = new BaseCache(ProductCacheKeyFactory.getPrimaryTypeKey(), new ProductTypeStruct());</TD></TR><TR CLASS="c"><TD CLASS="l">105</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="55">106</A></TD><TD> </TD></TR><TR><TD CLASS="l">107</TD><TD>    // Accessor for the sessionMap map - creates it if needed</TD></TR><TR><TD CLASS="l">108</TD><TD>    private static Map&lt;String, Map&gt; getSessionsMap()</TD></TR><TR><TD CLASS="l">109</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">110</TD><TD>        return sessionsMap;</TD></TR><TR><TD CLASS="l"><A NAME="4a">111</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">112</TD><TD>// poor way to search .. exposing cache access directly to caller for better performance</TD></TR><TR><TD CLASS="l">113</TD><TD>    public static ProductStruct getProduct(Product searchItem)</TD></TR><TR><TD CLASS="l">114</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">115</TD><TD>        return productNameMap.get(searchItem);</TD></TR><TR><TD CLASS="l">116</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="4b">117</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">118</TD><TD>// poor way to search .. exposing cache access directly to caller for better performance</TD></TR><TR><TD CLASS="l">119</TD><TD>    public static ProductStruct getProduct(int productKey)</TD></TR><TR><TD CLASS="l">120</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">121</TD><TD>        return productKeyMap.get(productKey);</TD></TR><TR><TD CLASS="l">122</TD><TD> </TD></TR><TR><TD CLASS="l">123</TD><TD>    }</TD></TR><TR><TD CLASS="l">124</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="49">125</A></TD><TD>    // Retrieves a map from a map of maps. If the sub-map does not exist, it is instantiated</TD></TR><TR><TD CLASS="l">126</TD><TD>    // and added to the parent map.</TD></TR><TR><TD CLASS="l">127</TD><TD>    private static synchronized Map getMap(String key, Map&lt;String, Map&gt; parentMap)</TD></TR><TR><TD CLASS="l">128</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">129</TD><TD>        Map map = parentMap.get(key);</TD></TR><TR><TD CLASS="l">130</TD><TD> </TD></TR><TR><TD CLASS="l">131</TD><TD>        // Did we find that sub-map?</TD></TR><TR CLASS="z"><TD CLASS="l">132</TD><TD>        if (map == null)</TD></TR><TR><TD CLASS="l">133</TD><TD>        {</TD></TR><TR><TD CLASS="l">134</TD><TD>            // Nope. Create a new one and add it to the map of maps.</TD></TR><TR CLASS="z"><TD CLASS="l">135</TD><TD>            map = new HashMap&lt;String, Map&gt;();</TD></TR><TR CLASS="z"><TD CLASS="l">136</TD><TD>            parentMap.put(key, map);</TD></TR><TR><TD CLASS="l">137</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">138</TD><TD>        return map;</TD></TR><TR><TD CLASS="l">139</TD><TD>    }</TD></TR><TR><TD CLASS="l">140</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="5e">141</A></TD><TD>    // Creates a session-related cache, and places it into the appropriate map of caches for that session</TD></TR><TR><TD CLASS="l">142</TD><TD>    private static synchronized Cache makeSessionCache(String sessionName, String cacheType, CacheKeyGenerator generator, Object sampleElement)</TD></TR><TR><TD CLASS="l">143</TD><TD>    {</TD></TR><TR><TD CLASS="l">144</TD><TD>        // Find or create the hash of caches for this session</TD></TR><TR CLASS="z"><TD CLASS="l">145</TD><TD>        Map caches = getMap(sessionName, getSessionsMap());</TD></TR><TR><TD CLASS="l">146</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">147</TD><TD>        Cache cache = new BaseCache(generator, sampleElement);</TD></TR><TR CLASS="z"><TD CLASS="l">148</TD><TD>        caches.put(cacheType, cache);</TD></TR><TR CLASS="z"><TD CLASS="l">149</TD><TD>        return cache;</TD></TR><TR><TD CLASS="l">150</TD><TD>    }</TD></TR><TR><TD CLASS="l">151</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="4f">152</A></TD><TD>    // Attempts to retrieve the cache for that session and type</TD></TR><TR><TD CLASS="l">153</TD><TD>    private static synchronized Cache getSessionCache(String sessionName, String cacheType)</TD></TR><TR><TD CLASS="l">154</TD><TD>    {</TD></TR><TR><TD CLASS="l">155</TD><TD>        // Find or create the hash of caches for this session</TD></TR><TR CLASS="z"><TD CLASS="l">156</TD><TD>        Map caches = getMap(sessionName, getSessionsMap());</TD></TR><TR><TD CLASS="l">157</TD><TD> </TD></TR><TR><TD CLASS="l">158</TD><TD>        // Find the cache for this cache type</TD></TR><TR CLASS="z"><TD CLASS="l">159</TD><TD>        return (Cache) caches.get(cacheType);</TD></TR><TR><TD CLASS="l">160</TD><TD>    }</TD></TR><TR><TD CLASS="l">161</TD><TD> </TD></TR><TR><TD CLASS="l">162</TD><TD>  // Public methods</TD></TR><TR><TD CLASS="l">163</TD><TD> </TD></TR><TR><TD CLASS="l">164</TD><TD>    /**</TD></TR><TR><TD CLASS="l">165</TD><TD>     * Retrieves the list of sessions that we currently have caches for.</TD></TR><TR><TD CLASS="l"><A NAME="51">166</A></TD><TD>     * @return List of session names (String)</TD></TR><TR><TD CLASS="l">167</TD><TD>     */</TD></TR><TR><TD CLASS="l">168</TD><TD>    public static synchronized List getSessionNames()</TD></TR><TR><TD CLASS="l">169</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">170</TD><TD>        return new ArrayList(getSessionsMap().keySet());</TD></TR><TR><TD CLASS="l">171</TD><TD>    }</TD></TR><TR><TD CLASS="l">172</TD><TD> </TD></TR><TR><TD CLASS="l">173</TD><TD>    /**</TD></TR><TR><TD CLASS="l">174</TD><TD>     * Find or create a cache for product types.</TD></TR><TR><TD CLASS="l"><A NAME="4d">175</A></TD><TD>     * @return cache of {@link ProductTypeStruct} objects</TD></TR><TR><TD CLASS="l">176</TD><TD>     */</TD></TR><TR><TD CLASS="l">177</TD><TD>    public static Cache getProductTypeCache()</TD></TR><TR><TD CLASS="l">178</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">179</TD><TD>        return typeCache;</TD></TR><TR><TD CLASS="l"><A NAME="47">180</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">181</TD><TD> </TD></TR><TR><TD CLASS="l">182</TD><TD>    public static Cache getClassCache()</TD></TR><TR><TD CLASS="l">183</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">184</TD><TD>            Cache cc = classCache;</TD></TR><TR CLASS="z"><TD CLASS="l">185</TD><TD>            if (cc == null)</TD></TR><TR><TD CLASS="l">186</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">187</TD><TD>                    cc = createClassCache();</TD></TR><TR><TD CLASS="l">188</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">189</TD><TD>            return cc;</TD></TR><TR><TD CLASS="l">190</TD><TD>    }    </TD></TR><TR><TD CLASS="l">191</TD><TD>    /**</TD></TR><TR><TD CLASS="l">192</TD><TD>     * Find or create a cache for classes.</TD></TR><TR><TD CLASS="l"><A NAME="42">193</A></TD><TD>     * @return cache of {@link ClassStruct} objects</TD></TR><TR><TD CLASS="l">194</TD><TD>     */</TD></TR><TR><TD CLASS="l">195</TD><TD>    private static synchronized Cache createClassCache()</TD></TR><TR><TD CLASS="l">196</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">197</TD><TD>        if (classCache == null)</TD></TR><TR><TD CLASS="l">198</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">199</TD><TD>            classCache = new BaseCache(ProductCacheKeyFactory.getPrimaryClassKey(), new ClassStruct());</TD></TR><TR CLASS="z"><TD CLASS="l">200</TD><TD>            classCache.addGenerator(ProductCacheKeyFactory.getClassGroupByTypeKey());</TD></TR><TR><TD CLASS="l">201</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">202</TD><TD>        return classCache;</TD></TR><TR><TD CLASS="l"><A NAME="6f">203</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">204</TD><TD>    </TD></TR><TR><TD CLASS="l">205</TD><TD>    public static Cache getProductCache()</TD></TR><TR><TD CLASS="l">206</TD><TD>    {</TD></TR><TR CLASS="c"><TD CLASS="l">207</TD><TD>        return getProductCache(false);</TD></TR><TR><TD CLASS="l"><A NAME="70">208</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">209</TD><TD>    </TD></TR><TR><TD CLASS="l">210</TD><TD>    public static Cache getProductCache(boolean purge)</TD></TR><TR><TD CLASS="l">211</TD><TD>    {</TD></TR><TR CLASS="c"><TD CLASS="l">212</TD><TD>            Cache pc = productCache;</TD></TR><TR CLASS="c"><TD CLASS="l">213</TD><TD>            if (pc == null)</TD></TR><TR><TD CLASS="l">214</TD><TD>            {</TD></TR><TR CLASS="c"><TD CLASS="l">215</TD><TD>                    pc = createProductCache(purge);</TD></TR><TR><TD CLASS="l">216</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">217</TD><TD>            return pc;</TD></TR><TR><TD CLASS="l">218</TD><TD>    }</TD></TR><TR><TD CLASS="l">219</TD><TD>    /**</TD></TR><TR><TD CLASS="l">220</TD><TD>     * Find or create a cache for products.</TD></TR><TR><TD CLASS="l"><A NAME="6d">221</A></TD><TD>     * @return cache of {@link ProductStruct} objects</TD></TR><TR><TD CLASS="l">222</TD><TD>     */</TD></TR><TR><TD CLASS="l">223</TD><TD>    private static synchronized Cache createProductCache(boolean purge)</TD></TR><TR><TD CLASS="l">224</TD><TD>    {</TD></TR><TR CLASS="c"><TD CLASS="l">225</TD><TD>        if (productCache == null)</TD></TR><TR><TD CLASS="l">226</TD><TD>        {</TD></TR><TR CLASS="c"><TD CLASS="l">227</TD><TD>             productCache = new BaseCache(ProductCacheKeyFactory.getPrimaryProductKey(), new ProductStruct());</TD></TR><TR><TD CLASS="l">228</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">229</TD><TD>            if (purge) </TD></TR><TR><TD CLASS="l">230</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">231</TD><TD>                productCache.purgeCache();</TD></TR><TR><TD CLASS="l">232</TD><TD>            }</TD></TR><TR><TD CLASS="l">233</TD><TD>            else </TD></TR><TR><TD CLASS="l">234</TD><TD>            {</TD></TR><TR><TD CLASS="l">235</TD><TD>                try</TD></TR><TR><TD CLASS="l">236</TD><TD>                {</TD></TR><TR CLASS="c"><TD CLASS="l">237</TD><TD>                    ((BaseCache)productCache).refresh();</TD></TR><TR><TD CLASS="l">238</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">239</TD><TD>                catch (Exception e)</TD></TR><TR><TD CLASS="l">240</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">241</TD><TD>                    Log.exception(&#34;Error in opening product cache. Ignoring exception&#34;, e);</TD></TR><TR CLASS="z"><TD CLASS="l">242</TD><TD>                    productCache.purgeCache();</TD></TR><TR CLASS="c"><TD CLASS="l">243</TD><TD>                }</TD></TR><TR><TD CLASS="l">244</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">245</TD><TD>            StringBuilder refreshed = new StringBuilder(45);</TD></TR><TR CLASS="c"><TD CLASS="l">246</TD><TD>            refreshed.append(&#34;Product cache refreshed, size=&#34;)</TD></TR><TR><TD CLASS="l">247</TD><TD>                     .append(((BaseCache)CacheFactory.getProductCache()).allElements.size());</TD></TR><TR CLASS="c"><TD CLASS="l">248</TD><TD>            Log.information(refreshed.toString());</TD></TR><TR CLASS="c"><TD CLASS="l">249</TD><TD>            productCache.addGenerator(ProductCacheKeyFactory.getProductNameKey());</TD></TR><TR CLASS="c"><TD CLASS="l">250</TD><TD>            productCache.addGenerator(ProductCacheKeyFactory.getProductGroupByClassKey());</TD></TR><TR><TD CLASS="l">251</TD><TD>          //  productCache.addSubscriber(SubscriberFactory.productCacheToProductMap);</TD></TR><TR><TD CLASS="l">252</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">253</TD><TD>           productNameMap = (HashMap&lt;Product, ProductStruct&gt;)productCache.allKeyedElements.get(ProductCacheKeyFactory.getProductNameKey());</TD></TR><TR CLASS="c"><TD CLASS="l">254</TD><TD>           productKeyMap =  (ConcurrentHashMap&lt;Integer, ProductStruct&gt;)productCache.allElements; </TD></TR><TR><TD CLASS="l">255</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">256</TD><TD>        return productCache;</TD></TR><TR><TD CLASS="l"><A NAME="4c">257</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">258</TD><TD> </TD></TR><TR><TD CLASS="l">259</TD><TD>        public static Map getProductClassCache() throws SystemException</TD></TR><TR><TD CLASS="l">260</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">261</TD><TD>                Map pcc = productClassCache;</TD></TR><TR CLASS="z"><TD CLASS="l">262</TD><TD>                if (pcc == null)</TD></TR><TR><TD CLASS="l">263</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">264</TD><TD>                        pcc = createProductClassCache();                        </TD></TR><TR><TD CLASS="l">265</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">266</TD><TD>                return pcc;</TD></TR><TR><TD CLASS="l">267</TD><TD>        }</TD></TR><TR><TD CLASS="l">268</TD><TD>    </TD></TR><TR><TD CLASS="l">269</TD><TD>    /**</TD></TR><TR><TD CLASS="l">270</TD><TD>     * Find or create a cache for loaded classes.</TD></TR><TR><TD CLASS="l">271</TD><TD>     * @return cache of {@link ProductStruct} objects</TD></TR><TR><TD CLASS="l"><A NAME="44">272</A></TD><TD>     * @throws CacheException </TD></TR><TR><TD CLASS="l">273</TD><TD>     */</TD></TR><TR><TD CLASS="l">274</TD><TD>    private static synchronized Map createProductClassCache() throws SystemException</TD></TR><TR><TD CLASS="l">275</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">276</TD><TD>        if (productClassCache == null )</TD></TR><TR><TD CLASS="l">277</TD><TD>        {</TD></TR><TR><TD CLASS="l">278</TD><TD>            try</TD></TR><TR><TD CLASS="l">279</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">280</TD><TD>                productClassCache = createJCache(productClassCacheName, true,true);</TD></TR><TR CLASS="z"><TD CLASS="l">281</TD><TD>                if (productClassCache instanceof com.cboe.application.jcache.Cache)</TD></TR><TR><TD CLASS="l">282</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">283</TD><TD>                    ((com.cboe.application.jcache.Cache)productClassCache).refresh();</TD></TR><TR><TD CLASS="l">284</TD><TD>                }</TD></TR><TR><TD CLASS="l">285</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">286</TD><TD>            catch (CacheException e)</TD></TR><TR><TD CLASS="l">287</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">288</TD><TD>                Log.exception(&#34;Error in creating productClassCache. Ignoring exception&#34;, e);</TD></TR><TR CLASS="z"><TD CLASS="l">289</TD><TD>                productClassCache.clear();  // contents could be inconsistent, start empty</TD></TR><TR CLASS="z"><TD CLASS="l">290</TD><TD>            }</TD></TR><TR><TD CLASS="l">291</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">292</TD><TD>        return productClassCache;</TD></TR><TR><TD CLASS="l">293</TD><TD>    }</TD></TR><TR><TD CLASS="l">294</TD><TD> </TD></TR><TR><TD CLASS="l">295</TD><TD>    /** Create a JCache or a Map. This depends on useJCache, XML parameters and</TD></TR><TR><TD CLASS="l">296</TD><TD>     * possibly other factors. Because the return might not be a JCache, it's</TD></TR><TR><TD CLASS="l">297</TD><TD>     * incorrect for a caller to cast the returned object; instead call service</TD></TR><TR><TD CLASS="l">298</TD><TD>     * methods in this class to perform Cache-specific functions.</TD></TR><TR><TD CLASS="l">299</TD><TD>     * @param name Name of cache (useful for persistence).</TD></TR><TR><TD CLASS="l">300</TD><TD>     * @param useJCache If false, create an in-memory Map.</TD></TR><TR><TD CLASS="l">301</TD><TD>     * @param persistent Allow cache to be saved to disk.</TD></TR><TR><TD CLASS="l">302</TD><TD>     * @return object which might be a jcache.Cache, or might not.</TD></TR><TR><TD CLASS="l"><A NAME="6c">303</A></TD><TD>     * @see #getRecentKeys, #flushCache</TD></TR><TR><TD CLASS="l">304</TD><TD>     */</TD></TR><TR><TD CLASS="l">305</TD><TD>    public synchronized static Map createJCache(String name, boolean useJCache, boolean persistent)</TD></TR><TR><TD CLASS="l">306</TD><TD>    {</TD></TR><TR CLASS="c"><TD CLASS="l">307</TD><TD>        Map cache = null; </TD></TR><TR CLASS="p"><TD CLASS="l" TITLE="50% line coverage (4 out of 8 instructions)">308</TD><TD TITLE="50% line coverage (4 out of 8 instructions)">            if (useJCache &amp;&amp; !com.cboe.application.jcache.Cache.HASHMAP_CACHE.equalsIgnoreCase(cacheType))</TD></TR><TR><TD CLASS="l">309</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">310</TD><TD>            Map map = new HashMap();</TD></TR><TR CLASS="z"><TD CLASS="l">311</TD><TD>            if (cacheType != null)</TD></TR><TR><TD CLASS="l">312</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">313</TD><TD>                map.put(com.cboe.application.jcache.Cache.CACHE_TYPE, cacheType);</TD></TR><TR><TD CLASS="l">314</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">315</TD><TD>            map.put(com.cboe.application.jcache.Cache.CACHE_NAME, name);</TD></TR><TR CLASS="z"><TD CLASS="l">316</TD><TD>            map.put(com.cboe.application.jcache.Cache.CACHE_FOLDER, cachingDirectory);</TD></TR><TR CLASS="z"><TD CLASS="l">317</TD><TD>            map.put(com.cboe.application.jcache.Cache.CACHE_MAX_ELEMENTS_IN_MEMORY, Integer.toString(maxElementsInMemory));</TD></TR><TR CLASS="z"><TD CLASS="l">318</TD><TD>            if (persistent)</TD></TR><TR><TD CLASS="l">319</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">320</TD><TD>                map.put(com.cboe.application.jcache.Cache.CACHE_PERSISTENT, &#34;true&#34;);</TD></TR><TR><TD CLASS="l">321</TD><TD>            }</TD></TR><TR><TD CLASS="l">322</TD><TD>            else </TD></TR><TR><TD CLASS="l">323</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">324</TD><TD>                map.put(com.cboe.application.jcache.Cache.CACHE_PERSISTENT, &#34;false&#34;);</TD></TR><TR><TD CLASS="l">325</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">326</TD><TD>                StringBuilder cacheDetails = new StringBuilder();</TD></TR><TR CLASS="z"><TD CLASS="l">327</TD><TD>                cacheDetails.append(&#34;Cache Details: CacheName=&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">328</TD><TD>                cacheDetails.append(name);</TD></TR><TR CLASS="z"><TD CLASS="l">329</TD><TD>                cacheDetails.append(&#34; : CacheDirectory=&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">330</TD><TD>                cacheDetails.append(cachingDirectory);</TD></TR><TR CLASS="z"><TD CLASS="l">331</TD><TD>                cacheDetails.append(&#34; : cacheType=&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">332</TD><TD>                cacheDetails.append(cacheType);</TD></TR><TR CLASS="z"><TD CLASS="l">333</TD><TD>                cacheDetails.append(&#34; : cachePersistent=&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">334</TD><TD>                cacheDetails.append(persistent);</TD></TR><TR CLASS="z"><TD CLASS="l">335</TD><TD>                cacheDetails.append(&#34; : maxElementsInMemory=&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">336</TD><TD>                cacheDetails.append(maxElementsInMemory);            </TD></TR><TR><TD CLASS="l">337</TD><TD>            try</TD></TR><TR><TD CLASS="l">338</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">339</TD><TD>                cache = JCacheManager.instance().getCacheFactory().createCache(map);</TD></TR><TR CLASS="z"><TD CLASS="l">340</TD><TD>                String details = cacheDetails.toString();</TD></TR><TR CLASS="z"><TD CLASS="l">341</TD><TD>                StringBuilder created = new StringBuilder(details.length()+30);</TD></TR><TR CLASS="z"><TD CLASS="l">342</TD><TD>                created.append(&#34;Cache created successfully! &#34;).append(details);</TD></TR><TR CLASS="z"><TD CLASS="l">343</TD><TD>                Log.information(created.toString());</TD></TR><TR><TD CLASS="l">344</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">345</TD><TD>            catch (CacheException e)</TD></TR><TR><TD CLASS="l">346</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">347</TD><TD>                Log.alarm(&#34;Error creating cache! &#34; + cacheDetails.toString());</TD></TR><TR CLASS="z"><TD CLASS="l">348</TD><TD>                Log.exception(&#34;Exception creating cache &#34; + name, e);</TD></TR><TR CLASS="z"><TD CLASS="l">349</TD><TD>            }</TD></TR><TR><TD CLASS="l">350</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">351</TD><TD>        if (cache == null)</TD></TR><TR><TD CLASS="l">352</TD><TD>        {</TD></TR><TR CLASS="c"><TD CLASS="l">353</TD><TD>            cache = new ConcurrentHashMap(100, (float)0.75, 1);</TD></TR><TR CLASS="c"><TD CLASS="l">354</TD><TD>            StringBuilder created = new StringBuilder(name.length()+35);</TD></TR><TR CLASS="c"><TD CLASS="l">355</TD><TD>            created.append(&#34;Created an in memory cache for &#34;).append(name);</TD></TR><TR CLASS="c"><TD CLASS="l">356</TD><TD>            Log.information(created.toString());</TD></TR><TR><TD CLASS="l">357</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">358</TD><TD>        return cache;</TD></TR><TR><TD CLASS="l">359</TD><TD>    }</TD></TR><TR><TD CLASS="l">360</TD><TD> </TD></TR><TR><TD CLASS="l">361</TD><TD>    /** Get keys from a Map.</TD></TR><TR><TD CLASS="l">362</TD><TD>     * For a javax.cache.Cache, get the most recently created keys.</TD></TR><TR><TD CLASS="l">363</TD><TD>     * @param map Map whose keys we want to get. This object should have been</TD></TR><TR><TD CLASS="l">364</TD><TD>     *    created initially by {@link #createJCache}.</TD></TR><TR><TD CLASS="l">365</TD><TD>     * @param maxKeys Maximum number of keys we want.</TD></TR><TR><TD CLASS="l">366</TD><TD>     * @return keys from map (0 &lt;= keys.size() &lt;= maxKeys).</TD></TR><TR><TD CLASS="l">367</TD><TD>     */</TD></TR><TR><TD CLASS="l"><A NAME="4e">368</A></TD><TD>    public static Set getRecentKeys(Map map, int maxKeys)</TD></TR><TR><TD CLASS="l">369</TD><TD>    {</TD></TR><TR><TD CLASS="l">370</TD><TD>        Set keys;</TD></TR><TR><TD CLASS="l">371</TD><TD>        Iterator it;</TD></TR><TR CLASS="z"><TD CLASS="l">372</TD><TD>        int over = map.size() - maxKeys;</TD></TR><TR CLASS="z"><TD CLASS="l">373</TD><TD>        if (! (map instanceof javax.cache.Cache))</TD></TR><TR><TD CLASS="l">374</TD><TD>        {</TD></TR><TR><TD CLASS="l">375</TD><TD>            // We have no special knowledge of this map. Sort its keys and</TD></TR><TR><TD CLASS="l">376</TD><TD>            // remove the first few, if necessary, to make a list no longer</TD></TR><TR><TD CLASS="l">377</TD><TD>            // than maxKeys.</TD></TR><TR CLASS="z"><TD CLASS="l">378</TD><TD>            keys = new TreeSet(map.keySet());</TD></TR><TR CLASS="z"><TD CLASS="l">379</TD><TD>            it = keys.iterator();</TD></TR><TR CLASS="z"><TD CLASS="l">380</TD><TD>            while (over-- &gt; 0)</TD></TR><TR><TD CLASS="l">381</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">382</TD><TD>                it.next();</TD></TR><TR CLASS="z"><TD CLASS="l">383</TD><TD>                it.remove();</TD></TR><TR><TD CLASS="l">384</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">385</TD><TD>            return keys;</TD></TR><TR><TD CLASS="l">386</TD><TD>        }</TD></TR><TR><TD CLASS="l">387</TD><TD> </TD></TR><TR><TD CLASS="l">388</TD><TD>        // This is a JCache so we have a creation time for each key. Sort keys</TD></TR><TR><TD CLASS="l">389</TD><TD>        // by creation time, and remove the earliest if necessary.</TD></TR><TR CLASS="z"><TD CLASS="l">390</TD><TD>        javax.cache.Cache cache = (javax.cache.Cache) map;</TD></TR><TR CLASS="z"><TD CLASS="l">391</TD><TD>        Set&lt;TimedClassKey&gt; timedKeys = new TreeSet&lt;TimedClassKey&gt;();</TD></TR><TR CLASS="z"><TD CLASS="l">392</TD><TD>        for (Object key : cache.keySet())</TD></TR><TR><TD CLASS="l">393</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">394</TD><TD>            CacheEntry entry = cache.getCacheEntry(key);</TD></TR><TR CLASS="z"><TD CLASS="l">395</TD><TD>            timedKeys.add(new TimedClassKey(entry.getCreationTime(), (Integer) key));</TD></TR><TR CLASS="z"><TD CLASS="l">396</TD><TD>        }</TD></TR><TR><TD CLASS="l">397</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">398</TD><TD>        it = timedKeys.iterator();</TD></TR><TR CLASS="z"><TD CLASS="l">399</TD><TD>        while (over-- &gt; 0)</TD></TR><TR><TD CLASS="l">400</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">401</TD><TD>            it.next();</TD></TR><TR CLASS="z"><TD CLASS="l">402</TD><TD>            it.remove();</TD></TR><TR><TD CLASS="l">403</TD><TD>        }</TD></TR><TR><TD CLASS="l">404</TD><TD> </TD></TR><TR><TD CLASS="l">405</TD><TD>        // Now make a set of keys without timestamp, to return to caller</TD></TR><TR CLASS="z"><TD CLASS="l">406</TD><TD>        keys = new TreeSet();</TD></TR><TR CLASS="z"><TD CLASS="l">407</TD><TD>        for (TimedClassKey key : timedKeys)</TD></TR><TR><TD CLASS="l">408</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">409</TD><TD>            keys.add(key.getKey());</TD></TR><TR><TD CLASS="l">410</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">411</TD><TD>        return keys;</TD></TR><TR><TD CLASS="l">412</TD><TD>    }</TD></TR><TR><TD CLASS="l">413</TD><TD> </TD></TR><TR><TD CLASS="l">414</TD><TD>    /** Write objects to persistent storage. For an in-memory Map, does nothing.</TD></TR><TR><TD CLASS="l">415</TD><TD>     * @param map Map whose contents we want to persist. This object should have</TD></TR><TR><TD CLASS="l">416</TD><TD>     *    been created initially by {@link #createJCache}.</TD></TR><TR><TD CLASS="l"><A NAME="46">417</A></TD><TD>     * @throws CacheException</TD></TR><TR><TD CLASS="l">418</TD><TD>     */</TD></TR><TR><TD CLASS="l">419</TD><TD>    public static void flushCache(Map map) throws CacheException</TD></TR><TR><TD CLASS="l">420</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">421</TD><TD>        if (map instanceof com.cboe.application.jcache.Cache)</TD></TR><TR><TD CLASS="l">422</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">423</TD><TD>            ((com.cboe.application.jcache.Cache)map).flush();</TD></TR><TR><TD CLASS="l">424</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="56">425</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">426</TD><TD>    </TD></TR><TR><TD CLASS="l">427</TD><TD>    public static Cache getStrategyCache()</TD></TR><TR><TD CLASS="l">428</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">429</TD><TD>            Cache sc = strategyCache;</TD></TR><TR CLASS="z"><TD CLASS="l">430</TD><TD>            if (sc == null)</TD></TR><TR><TD CLASS="l">431</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">432</TD><TD>                    sc = createStrategyCache();</TD></TR><TR><TD CLASS="l">433</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">434</TD><TD>            return sc;</TD></TR><TR><TD CLASS="l">435</TD><TD>    }    </TD></TR><TR><TD CLASS="l">436</TD><TD> </TD></TR><TR><TD CLASS="l">437</TD><TD>    /**</TD></TR><TR><TD CLASS="l">438</TD><TD>     * Find or create a cache for strategies (spreads).</TD></TR><TR><TD CLASS="l"><A NAME="45">439</A></TD><TD>     * @return cache of {@link StrategyStruct} objects</TD></TR><TR><TD CLASS="l">440</TD><TD>     */</TD></TR><TR><TD CLASS="l">441</TD><TD>    private static synchronized Cache createStrategyCache()</TD></TR><TR><TD CLASS="l">442</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">443</TD><TD>        if (strategyCache == null)</TD></TR><TR><TD CLASS="l">444</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">445</TD><TD>            strategyCache = new BaseCache(ProductCacheKeyFactory.getPrimaryStrategyKey(), new StrategyStruct());</TD></TR><TR CLASS="z"><TD CLASS="l">446</TD><TD>            strategyCache.addGenerator(ProductCacheKeyFactory.getStrategyGroupByClassKey());</TD></TR><TR CLASS="z"><TD CLASS="l">447</TD><TD>            strategyCache.addGenerator(ProductCacheKeyFactory.getStrategyGroupByLegProductKey());</TD></TR><TR><TD CLASS="l">448</TD><TD> </TD></TR><TR><TD CLASS="l">449</TD><TD>            // We have a two-way update link between products and strategies (which contain products)</TD></TR><TR CLASS="z"><TD CLASS="l">450</TD><TD>            strategyCache.addSubscriber(SubscriberFactory.getStrategyToProduct());</TD></TR><TR CLASS="z"><TD CLASS="l">451</TD><TD>            getProductCache().addSubscriber(SubscriberFactory.getProductToStrategy());</TD></TR><TR><TD CLASS="l">452</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">453</TD><TD>        return strategyCache;</TD></TR><TR><TD CLASS="l"><A NAME="48">454</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">455</TD><TD> </TD></TR><TR><TD CLASS="l">456</TD><TD>    public static Cache getFirmCache(boolean active)</TD></TR><TR><TD CLASS="l">457</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">458</TD><TD>            Cache fc = active?activeFirmCache:inactiveFirmCache;</TD></TR><TR CLASS="z"><TD CLASS="l">459</TD><TD>            if (fc == null)</TD></TR><TR><TD CLASS="l">460</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">461</TD><TD>                    fc = createFirmCache(active);</TD></TR><TR><TD CLASS="l">462</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">463</TD><TD>            return fc;</TD></TR><TR><TD CLASS="l">464</TD><TD>    }    </TD></TR><TR><TD CLASS="l">465</TD><TD> </TD></TR><TR><TD CLASS="l">466</TD><TD> </TD></TR><TR><TD CLASS="l">467</TD><TD>    /**</TD></TR><TR><TD CLASS="l">468</TD><TD>     * Find or create a cache for firms.</TD></TR><TR><TD CLASS="l"><A NAME="43">469</A></TD><TD>     * @return cache of {@link FirmStruct} objects</TD></TR><TR><TD CLASS="l">470</TD><TD>     */</TD></TR><TR><TD CLASS="l">471</TD><TD>    public static synchronized Cache createFirmCache(boolean active)</TD></TR><TR><TD CLASS="l">472</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">473</TD><TD>        Cache firmCache = active?activeFirmCache:inactiveFirmCache;</TD></TR><TR><TD CLASS="l">474</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">475</TD><TD>        if (firmCache == null)</TD></TR><TR><TD CLASS="l">476</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">477</TD><TD>            firmCache = new BaseCache(FirmCacheKeyFactory.getPrimaryKey(), new FirmStruct());</TD></TR><TR CLASS="z"><TD CLASS="l">478</TD><TD>            firmCache.addGenerator(FirmCacheKeyFactory.getAcronymKey());</TD></TR><TR CLASS="z"><TD CLASS="l">479</TD><TD>            firmCache.addGenerator(FirmCacheKeyFactory.getNumberKey());</TD></TR><TR><TD CLASS="l">480</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">481</TD><TD>            if (active)</TD></TR><TR CLASS="z"><TD CLASS="l">482</TD><TD>                activeFirmCache = firmCache;</TD></TR><TR><TD CLASS="l">483</TD><TD>            else</TD></TR><TR CLASS="z"><TD CLASS="l">484</TD><TD>                inactiveFirmCache = firmCache;</TD></TR><TR><TD CLASS="l">485</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">486</TD><TD>        return firmCache;</TD></TR><TR><TD CLASS="l">487</TD><TD>    }</TD></TR><TR><TD CLASS="l">488</TD><TD> </TD></TR><TR><TD CLASS="l">489</TD><TD>    /**</TD></TR><TR><TD CLASS="l">490</TD><TD>     * Find or create a cache for product types for the session.</TD></TR><TR><TD CLASS="l">491</TD><TD>     * @param sessionName find the cache for this session</TD></TR><TR><TD CLASS="l"><A NAME="53">492</A></TD><TD>     * @return cache of {@link ProductTypeStruct} objects</TD></TR><TR><TD CLASS="l">493</TD><TD>     */</TD></TR><TR><TD CLASS="l">494</TD><TD>    public static synchronized Cache getSessionProductTypeCache(String sessionName)</TD></TR><TR><TD CLASS="l">495</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">496</TD><TD>        Cache cache = getSessionCache(sessionName, CACHE_TYPE);</TD></TR><TR CLASS="z"><TD CLASS="l">497</TD><TD>        if (cache == null)</TD></TR><TR><TD CLASS="l">498</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">499</TD><TD>            cache = makeSessionCache(sessionName, CACHE_TYPE, TradingSessionCacheKeyFactory.getPrimaryTypeKey(), new ProductTypeStruct());</TD></TR><TR><TD CLASS="l">500</TD><TD> </TD></TR><TR><TD CLASS="l">501</TD><TD>            // We have a two-way update link between product type and session product types (which contain product types)</TD></TR><TR CLASS="z"><TD CLASS="l">502</TD><TD>            cache.addSubscriber(SubscriberFactory.getSessionTypeToType(sessionName));</TD></TR><TR CLASS="z"><TD CLASS="l">503</TD><TD>            getProductTypeCache().addSubscriber(SubscriberFactory.getTypeToSessionType(sessionName));</TD></TR><TR><TD CLASS="l">504</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">505</TD><TD>        return cache;</TD></TR><TR><TD CLASS="l">506</TD><TD>    }</TD></TR><TR><TD CLASS="l">507</TD><TD> </TD></TR><TR><TD CLASS="l">508</TD><TD>    /**</TD></TR><TR><TD CLASS="l">509</TD><TD>     * Find or create a cache for session classes for the session.</TD></TR><TR><TD CLASS="l">510</TD><TD>     * @param sessionName find the cache for this session</TD></TR><TR><TD CLASS="l"><A NAME="50">511</A></TD><TD>     * @return Cache of {@link SessionClassStruct} objects</TD></TR><TR><TD CLASS="l">512</TD><TD>     */</TD></TR><TR><TD CLASS="l">513</TD><TD>    public static synchronized Cache getSessionClassCache(String sessionName)</TD></TR><TR><TD CLASS="l">514</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">515</TD><TD>        Cache cache = getSessionCache(sessionName, CACHE_CLASS);</TD></TR><TR CLASS="z"><TD CLASS="l">516</TD><TD>        if (cache == null)</TD></TR><TR><TD CLASS="l">517</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">518</TD><TD>            cache = makeSessionCache(sessionName, CACHE_CLASS, TradingSessionCacheKeyFactory.getPrimaryClassKey(), new SessionClassStruct());</TD></TR><TR CLASS="z"><TD CLASS="l">519</TD><TD>            cache.addGenerator(TradingSessionCacheKeyFactory.getClassGroupByTypeKey());</TD></TR><TR><TD CLASS="l">520</TD><TD> </TD></TR><TR><TD CLASS="l">521</TD><TD>            // We have a two-way update link between class struct and session class types (which contain class structs)</TD></TR><TR CLASS="z"><TD CLASS="l">522</TD><TD>            cache.addSubscriber(SubscriberFactory.getSessionClassToClass(sessionName));</TD></TR><TR CLASS="z"><TD CLASS="l">523</TD><TD>            getClassCache().addSubscriber(SubscriberFactory.getClassToSessionClass(sessionName));</TD></TR><TR><TD CLASS="l">524</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">525</TD><TD>        return cache;</TD></TR><TR><TD CLASS="l">526</TD><TD>    }</TD></TR><TR><TD CLASS="l">527</TD><TD> </TD></TR><TR><TD CLASS="l">528</TD><TD>    /**</TD></TR><TR><TD CLASS="l">529</TD><TD>     * Find or create a cache for session products for the session.</TD></TR><TR><TD CLASS="l">530</TD><TD>     * @param sessionName find the cache for this session</TD></TR><TR><TD CLASS="l"><A NAME="52">531</A></TD><TD>     * @return cache of {@link SessionProductStruct} objects</TD></TR><TR><TD CLASS="l">532</TD><TD>     */</TD></TR><TR><TD CLASS="l">533</TD><TD>    public static synchronized Cache getSessionProductCache(String sessionName)</TD></TR><TR><TD CLASS="l">534</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">535</TD><TD>        Cache cache = getSessionCache(sessionName, CACHE_PRODUCT);</TD></TR><TR CLASS="z"><TD CLASS="l">536</TD><TD>        if (cache == null)</TD></TR><TR><TD CLASS="l">537</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">538</TD><TD>            cache = makeSessionCache(sessionName, CACHE_PRODUCT, TradingSessionCacheKeyFactory.getPrimaryProductKey(), new SessionProductStruct());</TD></TR><TR CLASS="z"><TD CLASS="l">539</TD><TD>            cache.addGenerator(TradingSessionCacheKeyFactory.getProductNameKey());</TD></TR><TR CLASS="z"><TD CLASS="l">540</TD><TD>            cache.addGenerator(TradingSessionCacheKeyFactory.getProductGroupByClassKey());</TD></TR><TR><TD CLASS="l">541</TD><TD> </TD></TR><TR><TD CLASS="l">542</TD><TD>            // We have a two-way update link between product and session product types (which contain products)</TD></TR><TR CLASS="z"><TD CLASS="l">543</TD><TD>            cache.addSubscriber(SubscriberFactory.getSessionProductToProduct(sessionName));</TD></TR><TR CLASS="z"><TD CLASS="l">544</TD><TD>            getProductCache().addSubscriber(SubscriberFactory.getProductToSessionProduct(sessionName));</TD></TR><TR><TD CLASS="l">545</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">546</TD><TD>        return cache;</TD></TR><TR><TD CLASS="l">547</TD><TD>    }</TD></TR><TR><TD CLASS="l">548</TD><TD> </TD></TR><TR><TD CLASS="l">549</TD><TD>    /**</TD></TR><TR><TD CLASS="l">550</TD><TD>     * Find or create a cache for session strategies for the session.</TD></TR><TR><TD CLASS="l">551</TD><TD>     * @param sessionName find the cache for this session</TD></TR><TR><TD CLASS="l"><A NAME="54">552</A></TD><TD>     * @return cache of {@link SessionStrategyStruct} objects</TD></TR><TR><TD CLASS="l">553</TD><TD>     */</TD></TR><TR><TD CLASS="l">554</TD><TD>    public static synchronized Cache getSessionStrategyCache(String sessionName)</TD></TR><TR><TD CLASS="l">555</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">556</TD><TD>        Cache cache = getSessionCache(sessionName, CACHE_STRATEGY);</TD></TR><TR CLASS="z"><TD CLASS="l">557</TD><TD>        if (cache == null)</TD></TR><TR><TD CLASS="l">558</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">559</TD><TD>            cache = makeSessionCache(sessionName, CACHE_STRATEGY, TradingSessionCacheKeyFactory.getPrimaryStrategyKey(), new SessionStrategyStruct());</TD></TR><TR CLASS="z"><TD CLASS="l">560</TD><TD>            cache.addGenerator(TradingSessionCacheKeyFactory.getStrategyGroupByClassKey());</TD></TR><TR CLASS="z"><TD CLASS="l">561</TD><TD>            cache.addGenerator(TradingSessionCacheKeyFactory.getStrategyKeyByLegs());</TD></TR><TR><TD CLASS="l">562</TD><TD> </TD></TR><TR><TD CLASS="l">563</TD><TD>            // We have a two-way update link between session product and session strategy types (which contain session products)</TD></TR><TR CLASS="z"><TD CLASS="l">564</TD><TD>            cache.addSubscriber(SubscriberFactory.getSessionStrategyToSessionProduct(sessionName));</TD></TR><TR CLASS="z"><TD CLASS="l">565</TD><TD>            getSessionProductCache(sessionName).addSubscriber(SubscriberFactory.getSessionProductToSessionStrategy(sessionName));</TD></TR><TR><TD CLASS="l">566</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">567</TD><TD>        return cache;</TD></TR><TR><TD CLASS="l"><A NAME="67">568</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">569</TD><TD> </TD></TR><TR><TD CLASS="l">570</TD><TD>    public static synchronized void updateProductTypeCache(Object productType)</TD></TR><TR><TD CLASS="l">571</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">572</TD><TD>        getProductTypeCache().updateCache(productType);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="59">573</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">574</TD><TD> </TD></TR><TR><TD CLASS="l">575</TD><TD>    public static synchronized void loadProductTypeCache(Object[] productTypes)</TD></TR><TR><TD CLASS="l">576</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">577</TD><TD>        getProductTypeCache().loadCache(productTypes);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="65">578</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">579</TD><TD> </TD></TR><TR><TD CLASS="l">580</TD><TD>    public static synchronized void updateClassCache(Object classStruct)</TD></TR><TR><TD CLASS="l">581</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">582</TD><TD>        getClassCache().updateCache(classStruct);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="57">583</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">584</TD><TD> </TD></TR><TR><TD CLASS="l">585</TD><TD>    public static synchronized void loadClassCache(Object[] classStructs)</TD></TR><TR><TD CLASS="l">586</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">587</TD><TD>        getClassCache().loadCache(classStructs);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="66">588</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">589</TD><TD> </TD></TR><TR><TD CLASS="l">590</TD><TD>    public static synchronized void updateProductCache(Object product)</TD></TR><TR><TD CLASS="l">591</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">592</TD><TD>        getProductCache().updateCache(product);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="58">593</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">594</TD><TD> </TD></TR><TR><TD CLASS="l">595</TD><TD>    public static synchronized void loadProductCache(Object[] products)</TD></TR><TR><TD CLASS="l">596</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">597</TD><TD>        getProductCache().loadCache(products);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6b">598</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">599</TD><TD> </TD></TR><TR><TD CLASS="l">600</TD><TD>    public static synchronized void updateStrategyCache(Object strategy)</TD></TR><TR><TD CLASS="l">601</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">602</TD><TD>        getStrategyCache().updateCache(strategy);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5d">603</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">604</TD><TD> </TD></TR><TR><TD CLASS="l">605</TD><TD>    public static synchronized void loadStrategyCache(Object[] strategies)</TD></TR><TR><TD CLASS="l">606</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">607</TD><TD>        getStrategyCache().loadCache(strategies);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="68">608</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">609</TD><TD> </TD></TR><TR><TD CLASS="l">610</TD><TD>    public static synchronized void updateSessionClassCache(String sessionName, Object classStruct)</TD></TR><TR><TD CLASS="l">611</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">612</TD><TD>        getSessionClassCache(sessionName).updateCache(classStruct);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5a">613</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">614</TD><TD> </TD></TR><TR><TD CLASS="l">615</TD><TD>    public static synchronized void loadSessionClassCache(String sessionName, Object[] classStructs)</TD></TR><TR><TD CLASS="l">616</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">617</TD><TD>        getSessionClassCache(sessionName).loadCache(classStructs);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="69">618</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">619</TD><TD> </TD></TR><TR><TD CLASS="l">620</TD><TD>    public static synchronized void updateSessionProductCache(String sessionName, Object product)</TD></TR><TR><TD CLASS="l">621</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">622</TD><TD>        getSessionProductCache(sessionName).updateCache(product);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5b">623</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">624</TD><TD> </TD></TR><TR><TD CLASS="l">625</TD><TD>    public static synchronized void loadSessionProductCache(String sessionName, Object[] products)</TD></TR><TR><TD CLASS="l">626</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">627</TD><TD>        getSessionProductCache(sessionName).loadCache(products);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6a">628</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">629</TD><TD> </TD></TR><TR><TD CLASS="l">630</TD><TD>    public static synchronized void updateSessionStrategyCache(String sessionName, Object strategy)</TD></TR><TR><TD CLASS="l">631</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">632</TD><TD>        getSessionStrategyCache(sessionName).updateCache(strategy);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5c">633</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">634</TD><TD> </TD></TR><TR><TD CLASS="l">635</TD><TD>    public static synchronized void loadSessionStrategyCache(String sessionName, Object[] strategies)</TD></TR><TR><TD CLASS="l">636</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">637</TD><TD>        getSessionStrategyCache(sessionName).loadCache(strategies);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="60">638</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">639</TD><TD> </TD></TR><TR><TD CLASS="l">640</TD><TD>    public static void setCachingDirectory(String cachingDirectory)</TD></TR><TR><TD CLASS="l">641</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">642</TD><TD>        CacheFactory.cachingDirectory = cachingDirectory;</TD></TR><TR><TD CLASS="l">643</TD><TD>  </TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="63">644</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">645</TD><TD> </TD></TR><TR><TD CLASS="l">646</TD><TD>    public static void shutdownProductCache()</TD></TR><TR><TD CLASS="l">647</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">648</TD><TD>        if (productCache != null)</TD></TR><TR><TD CLASS="l">649</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">650</TD><TD>            ((BaseCache) productCache).shutdown();</TD></TR><TR CLASS="z"><TD CLASS="l">651</TD><TD>            productCache = null;</TD></TR><TR><TD CLASS="l">652</TD><TD>        }</TD></TR><TR><TD CLASS="l"><A NAME="64">653</A></TD><TD>        </TD></TR><TR CLASS="z"><TD CLASS="l">654</TD><TD>    }</TD></TR><TR><TD CLASS="l">655</TD><TD>    public static void shutdownProductClassCache()</TD></TR><TR><TD CLASS="l">656</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">657</TD><TD>        if (productClassCache != null)</TD></TR><TR><TD CLASS="l">658</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">659</TD><TD>            if(productClassCache instanceof com.cboe.application.jcache.Cache) {           </TD></TR><TR CLASS="z"><TD CLASS="l">660</TD><TD>                ((com.cboe.application.jcache.Cache)productClassCache).shutdown();        </TD></TR><TR><TD CLASS="l">661</TD><TD>              }</TD></TR><TR CLASS="z"><TD CLASS="l">662</TD><TD>            productClassCache = null;</TD></TR><TR><TD CLASS="l">663</TD><TD>        }</TD></TR><TR><TD CLASS="l">664</TD><TD>        </TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="61">665</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">666</TD><TD> </TD></TR><TR><TD CLASS="l">667</TD><TD>    public static void setProductCacheName(String value)</TD></TR><TR><TD CLASS="l">668</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">669</TD><TD>        productCacheName=value;</TD></TR><TR><TD CLASS="l">670</TD><TD>        </TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="62">671</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">672</TD><TD> </TD></TR><TR><TD CLASS="l">673</TD><TD>    public static void setProductClassCacheName(String value)</TD></TR><TR><TD CLASS="l">674</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">675</TD><TD>       productClassCacheName=value;</TD></TR><TR><TD CLASS="l">676</TD><TD>        </TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5f">677</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">678</TD><TD> </TD></TR><TR><TD CLASS="l">679</TD><TD>    public static void setCacheType(String value)</TD></TR><TR><TD CLASS="l">680</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">681</TD><TD>        cacheType=value;</TD></TR><TR><TD CLASS="l">682</TD><TD>        </TD></TR><TR CLASS="z"><TD CLASS="l">683</TD><TD>    }</TD></TR><TR><TD CLASS="l">684</TD><TD> </TD></TR><TR><TD CLASS="l">685</TD><TD>   </TD></TR><TR><TD CLASS="l">686</TD><TD> </TD></TR><TR><TD CLASS="l">687</TD><TD>   </TD></TR><TR><TD CLASS="l">688</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="28">689</A></TD><TD>}</TD></TR><TR><TD CLASS="l">690</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="29">691</A></TD><TD>// We don't synchronize the methods in this factory because they are only called by synchronized methods in</TD></TR><TR><TD CLASS="l"><A NAME="35">692</A></TD><TD>// the CacheFactory.</TD></TR><TR CLASS="z"><TD CLASS="l">693</TD><TD>class SubscriberFactory</TD></TR><TR><TD CLASS="l">694</TD><TD>{</TD></TR><TR CLASS="z"><TD CLASS="l">695</TD><TD>    private static CacheSubscriber productToStrategy = new CacheSubscriber()</TD></TR><TR CLASS="z"><TD CLASS="l">696</TD><TD>                    {</TD></TR><TR><TD CLASS="l">697</TD><TD>                        // Optimization: prevents a HashMap lookup</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="37">698</A></TD><TD>                        CacheKeyGenerator   strategyKey = ProductCacheKeyFactory.getPrimaryStrategyKey();</TD></TR><TR><TD CLASS="l">699</TD><TD> </TD></TR><TR><TD CLASS="l">700</TD><TD>                        public void update(Object element)</TD></TR><TR><TD CLASS="l">701</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">702</TD><TD>                            ProductStruct  product  = (ProductStruct) element;</TD></TR><TR CLASS="z"><TD CLASS="l">703</TD><TD>                            StrategyStruct strategy = (StrategyStruct) CacheFactory.getStrategyCache().find(strategyKey, Integer.valueOf(product.productKeys.productKey));</TD></TR><TR><TD CLASS="l">704</TD><TD> </TD></TR><TR><TD CLASS="l">705</TD><TD>                            // We only update - we don't add if it doesn't exist</TD></TR><TR CLASS="z"><TD CLASS="l">706</TD><TD>                            if (strategy != null)</TD></TR><TR><TD CLASS="l">707</TD><TD>                            {</TD></TR><TR><TD CLASS="l">708</TD><TD>                                //Log.debug(&#34;CacheFactory---&gt;Product updating strategy&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">709</TD><TD>                                strategy = ClientProductStructBuilder.cloneStrategy(strategy, product);</TD></TR><TR CLASS="z"><TD CLASS="l">710</TD><TD>                                CacheFactory.getStrategyCache().updateCache(strategy, SubscriberFactory.getStrategyToProduct());</TD></TR><TR><TD CLASS="l"><A NAME="38">711</A></TD><TD>                            }</TD></TR><TR CLASS="z"><TD CLASS="l">712</TD><TD>                        }</TD></TR><TR><TD CLASS="l">713</TD><TD>                    };</TD></TR><TR CLASS="z"><TD CLASS="l">714</TD><TD>    private static CacheSubscriber strategyToProduct = new CacheSubscriber()</TD></TR><TR CLASS="z"><TD CLASS="l">715</TD><TD>                    {</TD></TR><TR><TD CLASS="l">716</TD><TD>                        public void update(Object element)</TD></TR><TR><TD CLASS="l"><A NAME="3a">717</A></TD><TD>                        {</TD></TR><TR><TD CLASS="l">718</TD><TD>                            //Log.debug(&#34;CacheFactory---&gt;Strategy updating product&#34;);</TD></TR><TR><TD CLASS="l">719</TD><TD> </TD></TR><TR><TD CLASS="l">720</TD><TD>                            // Update the product cache, prevent strategy updater from being called (infinite loop time)</TD></TR><TR CLASS="z"><TD CLASS="l">721</TD><TD>                            CacheFactory.getProductCache().updateCache(((StrategyStruct)element).product, SubscriberFactory.getProductToStrategy());</TD></TR><TR CLASS="z"><TD CLASS="l">722</TD><TD>                        }</TD></TR><TR><TD CLASS="l"><A NAME="2d">723</A></TD><TD>                    };</TD></TR><TR><TD CLASS="l">724</TD><TD> </TD></TR><TR><TD CLASS="l">725</TD><TD>    public static CacheSubscriber getProductToStrategy()</TD></TR><TR><TD CLASS="l">726</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">727</TD><TD>        return productToStrategy;</TD></TR><TR><TD CLASS="l"><A NAME="33">728</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">729</TD><TD> </TD></TR><TR><TD CLASS="l">730</TD><TD>    public static CacheSubscriber getStrategyToProduct()</TD></TR><TR><TD CLASS="l">731</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">732</TD><TD>        return strategyToProduct;</TD></TR><TR><TD CLASS="l">733</TD><TD>    }</TD></TR><TR><TD CLASS="l">734</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="34">735</A></TD><TD>    // since all these methods are called only few times, the synchronization should be ok. - GJ</TD></TR><TR CLASS="z"><TD CLASS="l">736</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; typeToSessionType = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">737</TD><TD>    public static CacheSubscriber getTypeToSessionType(String sessionName)</TD></TR><TR><TD CLASS="l">738</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">739</TD><TD>        synchronized(typeToSessionType)</TD></TR><TR><TD CLASS="l">740</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">741</TD><TD>            CacheSubscriber sub = typeToSessionType.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">742</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">743</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">744</TD><TD>                sub = new TypeToSessionTypeCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">745</TD><TD>                typeToSessionType.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">746</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">747</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">748</TD><TD>        }</TD></TR><TR><TD CLASS="l">749</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="32">750</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">751</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; sessionTypeToType = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">752</TD><TD>    public static CacheSubscriber getSessionTypeToType(String sessionName)</TD></TR><TR><TD CLASS="l">753</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">754</TD><TD>        synchronized (sessionTypeToType)</TD></TR><TR><TD CLASS="l">755</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">756</TD><TD>            CacheSubscriber sub = sessionTypeToType.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">757</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">758</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">759</TD><TD>                sub = new SessionTypeToTypeCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">760</TD><TD>                sessionTypeToType.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">761</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">762</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">763</TD><TD>        }</TD></TR><TR><TD CLASS="l">764</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="2b">765</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">766</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; classToSessionClass = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">767</TD><TD>    public static  CacheSubscriber getClassToSessionClass(String sessionName)</TD></TR><TR><TD CLASS="l">768</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">769</TD><TD>        synchronized (classToSessionClass)</TD></TR><TR><TD CLASS="l">770</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">771</TD><TD>            CacheSubscriber sub = classToSessionClass.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">772</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">773</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">774</TD><TD>                sub = new ClassToSessionClassCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">775</TD><TD>                classToSessionClass.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">776</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">777</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">778</TD><TD>        }</TD></TR><TR><TD CLASS="l">779</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="2e">780</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">781</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; sessionClassToClass = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">782</TD><TD>    public static CacheSubscriber getSessionClassToClass(String sessionName)</TD></TR><TR><TD CLASS="l">783</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">784</TD><TD>        synchronized (sessionClassToClass)</TD></TR><TR><TD CLASS="l">785</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">786</TD><TD>            CacheSubscriber sub = sessionClassToClass.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">787</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">788</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">789</TD><TD>                sub = new SessionClassToClassCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">790</TD><TD>                sessionClassToClass.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">791</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">792</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">793</TD><TD>        }</TD></TR><TR><TD CLASS="l">794</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="2c">795</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">796</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; productToSessionProduct = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">797</TD><TD>    public static CacheSubscriber getProductToSessionProduct(String sessionName)</TD></TR><TR><TD CLASS="l">798</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">799</TD><TD>        synchronized (productToSessionProduct)</TD></TR><TR><TD CLASS="l">800</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">801</TD><TD>            CacheSubscriber sub = productToSessionProduct.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">802</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">803</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">804</TD><TD>                sub = new ProductToSessionProductCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">805</TD><TD>                productToSessionProduct.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">806</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">807</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">808</TD><TD>        }</TD></TR><TR><TD CLASS="l">809</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="2f">810</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">811</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; sessionProductToProduct = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">812</TD><TD>    public static CacheSubscriber getSessionProductToProduct(String sessionName)</TD></TR><TR><TD CLASS="l">813</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">814</TD><TD>        synchronized (sessionProductToProduct)</TD></TR><TR><TD CLASS="l">815</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">816</TD><TD>            CacheSubscriber sub = sessionProductToProduct.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">817</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">818</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">819</TD><TD>                sub = new SessionProductToProductCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">820</TD><TD>                sessionProductToProduct.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">821</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">822</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">823</TD><TD>        }</TD></TR><TR><TD CLASS="l">824</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="31">825</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">826</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; sessionStrategyToSessionProduct = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">827</TD><TD>    public static CacheSubscriber getSessionStrategyToSessionProduct(String sessionName)</TD></TR><TR><TD CLASS="l">828</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">829</TD><TD>        synchronized (sessionStrategyToSessionProduct)</TD></TR><TR><TD CLASS="l">830</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">831</TD><TD>            CacheSubscriber sub = sessionStrategyToSessionProduct.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">832</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">833</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">834</TD><TD>                sub = new SessionStrategyToSessionProductCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">835</TD><TD>                sessionStrategyToSessionProduct.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">836</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">837</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">838</TD><TD>        }</TD></TR><TR><TD CLASS="l">839</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="30">840</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">841</TD><TD>    private static HashMap&lt;String, CacheSubscriber&gt; sessionProductToSessionStrategy = new HashMap&lt;String, CacheSubscriber&gt;();</TD></TR><TR><TD CLASS="l">842</TD><TD>    public static CacheSubscriber getSessionProductToSessionStrategy(String sessionName)</TD></TR><TR><TD CLASS="l">843</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">844</TD><TD>        synchronized (sessionProductToSessionStrategy)</TD></TR><TR><TD CLASS="l">845</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">846</TD><TD>            CacheSubscriber sub = sessionProductToSessionStrategy.get(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">847</TD><TD>            if (sub == null)</TD></TR><TR><TD CLASS="l">848</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">849</TD><TD>                sub = new SessionProductToSessionStrategyCacheSubscriber(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">850</TD><TD>                sessionProductToSessionStrategy.put(sessionName, sub);</TD></TR><TR><TD CLASS="l">851</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">852</TD><TD>            return sub;</TD></TR><TR CLASS="z"><TD CLASS="l">853</TD><TD>        }</TD></TR><TR><TD CLASS="l">854</TD><TD>    }</TD></TR><TR><TD CLASS="l">855</TD><TD>}</TD></TR><TR><TD CLASS="l">856</TD><TD> </TD></TR><TR><TD CLASS="l">857</TD><TD>class TypeToSessionTypeCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">858</TD><TD>{</TD></TR><TR><TD CLASS="l">859</TD><TD>    Cache               sessionTypeCache;</TD></TR><TR><TD CLASS="l">860</TD><TD>    CacheKeyGenerator   sessionKey;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="3b">861</A></TD><TD>    String              sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l">862</TD><TD>    volatile CacheSubscriber     ignoreSubscriber = null;</TD></TR><TR><TD CLASS="l">863</TD><TD> </TD></TR><TR><TD CLASS="l">864</TD><TD>    public TypeToSessionTypeCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">865</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">866</TD><TD>        sessionName       = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">867</TD><TD>        sessionTypeCache  = CacheFactory.getSessionProductTypeCache(__sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">868</TD><TD>        sessionKey        = TradingSessionCacheKeyFactory.getPrimaryTypeKey();</TD></TR><TR CLASS="z"><TD CLASS="l">869</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="3e">870</A></TD><TD> </TD></TR><TR><TD CLASS="l">871</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">872</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">873</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">874</TD><TD>        if(ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">875</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">876</TD><TD>            ignoreSubscriber  = SubscriberFactory.getSessionTypeToType(sessionName);</TD></TR><TR><TD CLASS="l">877</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">878</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="3d">879</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">880</TD><TD> </TD></TR><TR><TD CLASS="l">881</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">882</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">883</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">884</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">885</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">886</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">887</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">888</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="3f">889</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">890</TD><TD> </TD></TR><TR><TD CLASS="l">891</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">892</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">893</TD><TD>        ProductTypeStruct productType = (ProductTypeStruct) element;</TD></TR><TR CLASS="z"><TD CLASS="l">894</TD><TD>        ProductTypeStruct sessionType = (ProductTypeStruct) sessionTypeCache.find(sessionKey, Integer.valueOf(productType.type));</TD></TR><TR><TD CLASS="l">895</TD><TD> </TD></TR><TR><TD CLASS="l">896</TD><TD>        // We only update - we don't add if it doesn't exist</TD></TR><TR CLASS="z"><TD CLASS="l">897</TD><TD>        if (sessionType != null)</TD></TR><TR><TD CLASS="l">898</TD><TD>        {</TD></TR><TR><TD CLASS="l">899</TD><TD>            //Log.debug(&#34;CacheFactory---&gt;Product type updating session product type&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">900</TD><TD>            sessionTypeCache.updateCache(productType, getIgnoreSubscriber());</TD></TR><TR><TD CLASS="l">901</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">902</TD><TD>    }</TD></TR><TR><TD CLASS="l">903</TD><TD>}</TD></TR><TR><TD CLASS="l">904</TD><TD> </TD></TR><TR><TD CLASS="l">905</TD><TD>class SessionTypeToTypeCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">906</TD><TD>{</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="23">907</A></TD><TD>    String          sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l">908</TD><TD>    volatile CacheSubscriber ignoreSubscriber = null;</TD></TR><TR><TD CLASS="l">909</TD><TD> </TD></TR><TR><TD CLASS="l">910</TD><TD>    public SessionTypeToTypeCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">911</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">912</TD><TD>        sessionName = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">913</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="26">914</A></TD><TD> </TD></TR><TR><TD CLASS="l">915</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">916</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">917</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">918</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">919</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">920</TD><TD>            ignoreSubscriber = SubscriberFactory.getTypeToSessionType(sessionName);</TD></TR><TR><TD CLASS="l">921</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">922</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="25">923</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">924</TD><TD> </TD></TR><TR><TD CLASS="l">925</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">926</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">927</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">928</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">929</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">930</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">931</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">932</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l">933</TD><TD>    }</TD></TR><TR><TD CLASS="l">934</TD><TD> </TD></TR><TR><TD CLASS="l">935</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l"><A NAME="27">936</A></TD><TD>    {</TD></TR><TR><TD CLASS="l">937</TD><TD>        //Log.debug(&#34;CacheFactory---&gt;Session product type updating product type&#34;);</TD></TR><TR><TD CLASS="l">938</TD><TD> </TD></TR><TR><TD CLASS="l">939</TD><TD>        // Update the type cache, prevent session type updater from being called (infinite loop time)</TD></TR><TR CLASS="z"><TD CLASS="l">940</TD><TD>        CacheFactory.getProductTypeCache().updateCache(element, getIgnoreSubscriber());</TD></TR><TR CLASS="z"><TD CLASS="l">941</TD><TD>    }</TD></TR><TR><TD CLASS="l">942</TD><TD>}</TD></TR><TR><TD CLASS="l">943</TD><TD> </TD></TR><TR><TD CLASS="l">944</TD><TD>class ClassToSessionClassCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">945</TD><TD>{</TD></TR><TR><TD CLASS="l">946</TD><TD>    Cache               sessionClassCache;</TD></TR><TR><TD CLASS="l">947</TD><TD>    CacheKeyGenerator   sessionKey;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5">948</A></TD><TD>    String              sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l">949</TD><TD>    volatile CacheSubscriber     ignoreSubscriber = null;</TD></TR><TR><TD CLASS="l">950</TD><TD> </TD></TR><TR><TD CLASS="l">951</TD><TD>    public ClassToSessionClassCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">952</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">953</TD><TD>        sessionName       = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">954</TD><TD>        sessionClassCache = CacheFactory.getSessionClassCache(__sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">955</TD><TD>        sessionKey        = TradingSessionCacheKeyFactory.getPrimaryClassKey();</TD></TR><TR CLASS="z"><TD CLASS="l">956</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="8">957</A></TD><TD> </TD></TR><TR><TD CLASS="l">958</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">959</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">960</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">961</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">962</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">963</TD><TD>            ignoreSubscriber = SubscriberFactory.getSessionClassToClass(sessionName);</TD></TR><TR><TD CLASS="l">964</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">965</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="7">966</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">967</TD><TD> </TD></TR><TR><TD CLASS="l">968</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">969</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">970</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">971</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">972</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">973</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">974</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">975</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="9">976</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">977</TD><TD> </TD></TR><TR><TD CLASS="l">978</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">979</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">980</TD><TD>        ClassStruct aClass = (ClassStruct) element;</TD></TR><TR CLASS="z"><TD CLASS="l">981</TD><TD>        SessionClassStruct sessionClass = (SessionClassStruct) sessionClassCache.find(sessionKey, Integer.valueOf(aClass.classKey));</TD></TR><TR><TD CLASS="l">982</TD><TD> </TD></TR><TR><TD CLASS="l">983</TD><TD>        // We only update - we don't add if it doesn't exist</TD></TR><TR CLASS="z"><TD CLASS="l">984</TD><TD>        if (sessionClass != null)</TD></TR><TR><TD CLASS="l">985</TD><TD>        {</TD></TR><TR><TD CLASS="l">986</TD><TD>            //Log.debug(&#34;CacheFactory---&gt;Class updating session class&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">987</TD><TD>            sessionClass = ClientProductStructBuilder.cloneSessionClassStruct(sessionClass, aClass);</TD></TR><TR CLASS="z"><TD CLASS="l">988</TD><TD>            sessionClassCache.updateCache(sessionClass, getIgnoreSubscriber());</TD></TR><TR><TD CLASS="l">989</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">990</TD><TD>    }</TD></TR><TR><TD CLASS="l">991</TD><TD>}</TD></TR><TR><TD CLASS="l">992</TD><TD> </TD></TR><TR><TD CLASS="l">993</TD><TD>class SessionClassToClassCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">994</TD><TD>{</TD></TR><TR CLASS="z"><TD CLASS="l">995</TD><TD>    String          sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="f">996</A></TD><TD>    volatile CacheSubscriber  ignoreSubscriber = null;</TD></TR><TR CLASS="z"><TD CLASS="l">997</TD><TD>    Cache           classCache = null;</TD></TR><TR><TD CLASS="l">998</TD><TD> </TD></TR><TR><TD CLASS="l">999</TD><TD>    public SessionClassToClassCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">1000</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1001</TD><TD>        sessionName = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">1002</TD><TD>        classCache  = CacheFactory.getClassCache();</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="12">1003</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1004</TD><TD> </TD></TR><TR><TD CLASS="l">1005</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1006</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1007</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">1008</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1009</TD><TD>            ignoreSubscriber = SubscriberFactory.getClassToSessionClass(sessionName);</TD></TR><TR><TD CLASS="l">1010</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1011</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l">1012</TD><TD>            </TD></TR><TR><TD CLASS="l">1013</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="11">1014</A></TD><TD>    </TD></TR><TR><TD CLASS="l">1015</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">1016</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1017</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1018</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">1019</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">1020</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1021</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">1022</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1023</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="13">1024</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1025</TD><TD> </TD></TR><TR><TD CLASS="l">1026</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">1027</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1028</TD><TD>        SessionClassStruct sessionClass = (SessionClassStruct) element;</TD></TR><TR><TD CLASS="l">1029</TD><TD> </TD></TR><TR><TD CLASS="l">1030</TD><TD>        //Log.debug(&#34;CacheFactory---&gt;Session class updating class&#34;);</TD></TR><TR><TD CLASS="l">1031</TD><TD> </TD></TR><TR><TD CLASS="l">1032</TD><TD>        // Update the class cache, prevent session class updater from being called (infinite loop time)</TD></TR><TR CLASS="z"><TD CLASS="l">1033</TD><TD>        classCache.updateCache(sessionClass.classStruct, getIgnoreSubscriber());</TD></TR><TR CLASS="z"><TD CLASS="l">1034</TD><TD>    }</TD></TR><TR><TD CLASS="l">1035</TD><TD>}</TD></TR><TR><TD CLASS="l">1036</TD><TD> </TD></TR><TR><TD CLASS="l">1037</TD><TD>class ProductToSessionProductCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">1038</TD><TD>{</TD></TR><TR><TD CLASS="l">1039</TD><TD>    Cache               sessionProductCache;</TD></TR><TR><TD CLASS="l">1040</TD><TD>    CacheKeyGenerator   sessionKey;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="a">1041</A></TD><TD>    String              sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1042</TD><TD>    volatile CacheSubscriber     ignoreSubscriber = null;</TD></TR><TR><TD CLASS="l">1043</TD><TD> </TD></TR><TR><TD CLASS="l">1044</TD><TD>    public ProductToSessionProductCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">1045</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1046</TD><TD>        sessionName         = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">1047</TD><TD>        sessionProductCache = CacheFactory.getSessionProductCache(__sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">1048</TD><TD>        sessionKey          = TradingSessionCacheKeyFactory.getPrimaryProductKey();</TD></TR><TR CLASS="z"><TD CLASS="l">1049</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="d">1050</A></TD><TD> </TD></TR><TR><TD CLASS="l">1051</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">1052</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1053</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1054</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">1055</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1056</TD><TD>            ignoreSubscriber    = SubscriberFactory.getSessionProductToProduct(sessionName);</TD></TR><TR><TD CLASS="l">1057</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1058</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="c">1059</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1060</TD><TD> </TD></TR><TR><TD CLASS="l">1061</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1062</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1063</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">1064</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">1065</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1066</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">1067</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1068</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="e">1069</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1070</TD><TD> </TD></TR><TR><TD CLASS="l">1071</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">1072</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1073</TD><TD>        ProductStruct aProduct = (ProductStruct) element;</TD></TR><TR CLASS="z"><TD CLASS="l">1074</TD><TD>        SessionProductStruct sessionProduct = (SessionProductStruct) sessionProductCache.find(sessionKey, Integer.valueOf(aProduct.productKeys.productKey));</TD></TR><TR><TD CLASS="l">1075</TD><TD> </TD></TR><TR><TD CLASS="l">1076</TD><TD>        // We only update - we don't add if it doesn't exist</TD></TR><TR CLASS="z"><TD CLASS="l">1077</TD><TD>        if (sessionProduct != null)</TD></TR><TR><TD CLASS="l">1078</TD><TD>        {</TD></TR><TR><TD CLASS="l">1079</TD><TD>            //Log.debug(&#34;CacheFactory---&gt;Product updating session product&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">1080</TD><TD>            sessionProduct = ClientProductStructBuilder.cloneSessionProduct(sessionProduct, aProduct);</TD></TR><TR CLASS="z"><TD CLASS="l">1081</TD><TD>            sessionProductCache.updateCache(sessionProduct, getIgnoreSubscriber());</TD></TR><TR><TD CLASS="l">1082</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1083</TD><TD>    }</TD></TR><TR><TD CLASS="l">1084</TD><TD>}</TD></TR><TR><TD CLASS="l">1085</TD><TD> </TD></TR><TR><TD CLASS="l">1086</TD><TD>class SessionProductToProductCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">1087</TD><TD>{</TD></TR><TR CLASS="z"><TD CLASS="l">1088</TD><TD>    String          sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="14">1089</A></TD><TD>    volatile CacheSubscriber ignoreSubscriber = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1090</TD><TD>    Cache           productCache = null;</TD></TR><TR><TD CLASS="l">1091</TD><TD> </TD></TR><TR><TD CLASS="l">1092</TD><TD>    public SessionProductToProductCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">1093</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1094</TD><TD>        sessionName  = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">1095</TD><TD>        productCache = CacheFactory.getProductCache();</TD></TR><TR CLASS="z"><TD CLASS="l">1096</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="17">1097</A></TD><TD> </TD></TR><TR><TD CLASS="l">1098</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">1099</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1100</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1101</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">1102</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1103</TD><TD>            ignoreSubscriber = SubscriberFactory.getProductToSessionProduct(sessionName);</TD></TR><TR><TD CLASS="l">1104</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1105</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="16">1106</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1107</TD><TD> </TD></TR><TR><TD CLASS="l">1108</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1109</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1110</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">1111</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">1112</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1113</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">1114</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1115</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="18">1116</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1117</TD><TD> </TD></TR><TR><TD CLASS="l">1118</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">1119</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1120</TD><TD>        SessionProductStruct sessionProduct = (SessionProductStruct) element;</TD></TR><TR><TD CLASS="l">1121</TD><TD> </TD></TR><TR><TD CLASS="l">1122</TD><TD>        //Log.debug(&#34;CacheFactory---&gt;Session product updating product&#34;);</TD></TR><TR><TD CLASS="l">1123</TD><TD> </TD></TR><TR><TD CLASS="l">1124</TD><TD>        // Update the class cache, prevent session class updater from being called (infinite loop time)</TD></TR><TR CLASS="z"><TD CLASS="l">1125</TD><TD>        productCache.updateCache(sessionProduct.productStruct, getIgnoreSubscriber());</TD></TR><TR CLASS="z"><TD CLASS="l">1126</TD><TD>    }</TD></TR><TR><TD CLASS="l">1127</TD><TD>}</TD></TR><TR><TD CLASS="l">1128</TD><TD> </TD></TR><TR><TD CLASS="l">1129</TD><TD>class SessionStrategyToSessionProductCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">1130</TD><TD>{</TD></TR><TR><TD CLASS="l">1131</TD><TD>    Cache               sessionProductCache;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="1e">1132</A></TD><TD>    String              sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1133</TD><TD>    volatile CacheSubscriber     ignoreSubscriber = null;</TD></TR><TR><TD CLASS="l">1134</TD><TD> </TD></TR><TR><TD CLASS="l">1135</TD><TD>    public SessionStrategyToSessionProductCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">1136</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1137</TD><TD>        sessionName          = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">1138</TD><TD>        sessionProductCache  = CacheFactory.getSessionProductCache(__sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">1139</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="21">1140</A></TD><TD> </TD></TR><TR><TD CLASS="l">1141</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">1142</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1143</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1144</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">1145</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1146</TD><TD>            ignoreSubscriber = SubscriberFactory.getSessionProductToSessionStrategy(sessionName);</TD></TR><TR><TD CLASS="l">1147</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1148</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="20">1149</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1150</TD><TD> </TD></TR><TR><TD CLASS="l">1151</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1152</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1153</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">1154</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">1155</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1156</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">1157</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1158</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="22">1159</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1160</TD><TD> </TD></TR><TR><TD CLASS="l">1161</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">1162</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1163</TD><TD>        SessionStrategyStruct aSessionStrategy = (SessionStrategyStruct) element;</TD></TR><TR><TD CLASS="l">1164</TD><TD> </TD></TR><TR><TD CLASS="l">1165</TD><TD>        //Log.debug(&#34;CacheFactory---&gt;Session strategy updating session product&#34;);</TD></TR><TR><TD CLASS="l">1166</TD><TD>        // Update the session Product cache, prevent session strategy updater from being called (infinite loop time)</TD></TR><TR CLASS="z"><TD CLASS="l">1167</TD><TD>        sessionProductCache.updateCache(aSessionStrategy.sessionProductStruct, getIgnoreSubscriber());</TD></TR><TR CLASS="z"><TD CLASS="l">1168</TD><TD>    }</TD></TR><TR><TD CLASS="l">1169</TD><TD>}</TD></TR><TR><TD CLASS="l">1170</TD><TD> </TD></TR><TR><TD CLASS="l">1171</TD><TD> </TD></TR><TR><TD CLASS="l">1172</TD><TD> </TD></TR><TR><TD CLASS="l">1173</TD><TD> </TD></TR><TR><TD CLASS="l">1174</TD><TD>class SessionProductToSessionStrategyCacheSubscriber implements CacheSubscriber</TD></TR><TR><TD CLASS="l">1175</TD><TD>{</TD></TR><TR><TD CLASS="l">1176</TD><TD>    Cache               sessionStrategyCache;</TD></TR><TR><TD CLASS="l">1177</TD><TD>    CacheKeyGenerator   sessionKey;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="19">1178</A></TD><TD>    String              sessionName = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1179</TD><TD>    volatile CacheSubscriber     ignoreSubscriber = null;</TD></TR><TR><TD CLASS="l">1180</TD><TD> </TD></TR><TR><TD CLASS="l">1181</TD><TD>    public SessionProductToSessionStrategyCacheSubscriber(String __sessionName)</TD></TR><TR CLASS="z"><TD CLASS="l">1182</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1183</TD><TD>        sessionName          = __sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">1184</TD><TD>        sessionStrategyCache = CacheFactory.getSessionStrategyCache(__sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">1185</TD><TD>        sessionKey           = TradingSessionCacheKeyFactory.getPrimaryStrategyKey();</TD></TR><TR CLASS="z"><TD CLASS="l">1186</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="1c">1187</A></TD><TD> </TD></TR><TR><TD CLASS="l">1188</TD><TD>    // Creating it post-constructor prevents an infinite loop on construction</TD></TR><TR><TD CLASS="l">1189</TD><TD>    private synchronized CacheSubscriber initIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1190</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1191</TD><TD>        if (ignoreSubscriber == null)</TD></TR><TR><TD CLASS="l">1192</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1193</TD><TD>            ignoreSubscriber = SubscriberFactory.getSessionStrategyToSessionProduct(sessionName);</TD></TR><TR><TD CLASS="l">1194</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1195</TD><TD>        return ignoreSubscriber;</TD></TR><TR><TD CLASS="l"><A NAME="1b">1196</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1197</TD><TD> </TD></TR><TR><TD CLASS="l">1198</TD><TD>    private CacheSubscriber getIgnoreSubscriber()</TD></TR><TR><TD CLASS="l">1199</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1200</TD><TD>            CacheSubscriber cs = ignoreSubscriber;</TD></TR><TR CLASS="z"><TD CLASS="l">1201</TD><TD>        if (cs == null)</TD></TR><TR><TD CLASS="l">1202</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1203</TD><TD>            cs = initIgnoreSubscriber();</TD></TR><TR><TD CLASS="l">1204</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1205</TD><TD>        return cs;</TD></TR><TR><TD CLASS="l"><A NAME="1d">1206</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1207</TD><TD> </TD></TR><TR><TD CLASS="l">1208</TD><TD>    public void update(Object element)</TD></TR><TR><TD CLASS="l">1209</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1210</TD><TD>        SessionProductStruct aSessionProduct = (SessionProductStruct) element;</TD></TR><TR CLASS="z"><TD CLASS="l">1211</TD><TD>        SessionStrategyStruct sessionStrategy = (SessionStrategyStruct) sessionStrategyCache.find(sessionKey, Integer.valueOf(aSessionProduct.productStruct.productKeys.productKey));</TD></TR><TR><TD CLASS="l">1212</TD><TD> </TD></TR><TR><TD CLASS="l">1213</TD><TD>        // We only update - we don't add if it doesn't exist</TD></TR><TR CLASS="z"><TD CLASS="l">1214</TD><TD>        if (sessionStrategy != null)</TD></TR><TR><TD CLASS="l">1215</TD><TD>        {</TD></TR><TR><TD CLASS="l">1216</TD><TD>            //Log.debug(&#34;CacheFactory---&gt;session product updating session strategy&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">1217</TD><TD>            sessionStrategy = ClientProductStructBuilder.cloneSessionStrategy(sessionStrategy, aSessionProduct);</TD></TR><TR CLASS="z"><TD CLASS="l">1218</TD><TD>            sessionStrategyCache.updateCache(sessionStrategy, getIgnoreSubscriber());</TD></TR><TR><TD CLASS="l">1219</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1220</TD><TD>    }</TD></TR><TR><TD CLASS="l">1221</TD><TD>}</TD></TR><TR><TD CLASS="l">1222</TD><TD> </TD></TR><TR><TD CLASS="l">1223</TD><TD>class CallStack</TD></TR><TR><TD CLASS="l"><A NAME="0">1224</A></TD><TD>{</TD></TR><TR><TD CLASS="l">1225</TD><TD>    ArrayList stack;</TD></TR><TR><TD CLASS="l">1226</TD><TD> </TD></TR><TR><TD CLASS="l">1227</TD><TD>    public CallStack()</TD></TR><TR CLASS="z"><TD CLASS="l">1228</TD><TD>    {</TD></TR><TR><TD CLASS="l">1229</TD><TD>        // Create the call stack string array</TD></TR><TR CLASS="z"><TD CLASS="l">1230</TD><TD>        stack = new ArrayList();</TD></TR><TR><TD CLASS="l">1231</TD><TD> </TD></TR><TR><TD CLASS="l">1232</TD><TD>        // Grab the call stack</TD></TR><TR CLASS="z"><TD CLASS="l">1233</TD><TD>        Throwable t = new Throwable();</TD></TR><TR><TD CLASS="l">1234</TD><TD> </TD></TR><TR><TD CLASS="l">1235</TD><TD>        // Print it to a single string</TD></TR><TR CLASS="z"><TD CLASS="l">1236</TD><TD>        StringWriter stringWriter = new StringWriter();</TD></TR><TR CLASS="z"><TD CLASS="l">1237</TD><TD>        t.printStackTrace(new PrintWriter(stringWriter));</TD></TR><TR CLASS="z"><TD CLASS="l">1238</TD><TD>        String trace = stringWriter.toString();</TD></TR><TR><TD CLASS="l">1239</TD><TD> </TD></TR><TR><TD CLASS="l">1240</TD><TD>        // Parse the string into separate lines for each call in the stack</TD></TR><TR CLASS="z"><TD CLASS="l">1241</TD><TD>        boolean isFirst = true;</TD></TR><TR CLASS="z"><TD CLASS="l">1242</TD><TD>        StringTokenizer tok = new StringTokenizer(trace, &#34;\n&#34;);</TD></TR><TR><TD CLASS="l">1243</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1244</TD><TD>        while (tok.hasMoreTokens())</TD></TR><TR><TD CLASS="l">1245</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1246</TD><TD>            String next = tok.nextToken();</TD></TR><TR><TD CLASS="l">1247</TD><TD> </TD></TR><TR><TD CLASS="l">1248</TD><TD>            // Skip the first line - it's not part of the stack</TD></TR><TR CLASS="z"><TD CLASS="l">1249</TD><TD>            if (!isFirst)</TD></TR><TR CLASS="z"><TD CLASS="l">1250</TD><TD>                stack.add(next.substring(8));  // the first 9 characters are junk</TD></TR><TR><TD CLASS="l">1251</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="2">1252</A></TD><TD>            isFirst = false;</TD></TR><TR CLASS="z"><TD CLASS="l">1253</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1254</TD><TD>    }</TD></TR><TR><TD CLASS="l">1255</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="3">1256</A></TD><TD>    public Iterator iterator() {return stack.iterator();}</TD></TR><TR><TD CLASS="l">1257</TD><TD> </TD></TR><TR><TD CLASS="l">1258</TD><TD>    public void print(PrintStream out, int levels)</TD></TR><TR><TD CLASS="l">1259</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1260</TD><TD>        Iterator it = iterator();</TD></TR><TR CLASS="z"><TD CLASS="l">1261</TD><TD>        while (it.hasNext() &amp;&amp; levels != 0)</TD></TR><TR><TD CLASS="l">1262</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1263</TD><TD>            out.println(it.next().toString());</TD></TR><TR CLASS="z"><TD CLASS="l">1264</TD><TD>            levels--;</TD></TR><TR><TD CLASS="l">1265</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="4">1266</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1267</TD><TD> </TD></TR><TR><TD CLASS="l">1268</TD><TD>    public void print(PrintWriter out, int levels)</TD></TR><TR><TD CLASS="l">1269</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1270</TD><TD>        Iterator it = iterator();</TD></TR><TR CLASS="z"><TD CLASS="l">1271</TD><TD>        while (it.hasNext() &amp;&amp; levels != 0)</TD></TR><TR><TD CLASS="l">1272</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1273</TD><TD>            out.println(it.next().toString());</TD></TR><TR CLASS="z"><TD CLASS="l">1274</TD><TD>            levels--;</TD></TR><TR><TD CLASS="l">1275</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1276</TD><TD>    }</TD></TR><TR><TD CLASS="l">1277</TD><TD>}</TD></TR></TABLE><P></P><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="nv">[<A HREF="../coverage.html">all classes</A>][<A HREF="b6.html">com.cboe.application.cache</A>]</TD></TR><TR><TD CLASS="tl"><A HREF="http://sourceforge.net/projects/emma">EMMA 2.0.5312</A> (C) Vladimir Roubtsov</TD></TR></TABLE></BODY></HTML>