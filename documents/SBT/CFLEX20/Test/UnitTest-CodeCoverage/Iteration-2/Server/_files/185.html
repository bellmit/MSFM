<HTML><HEAD><META CONTENT="text/html; charset=ISO-8859-1" HTTP-EQUIV="Content-Type"/><TITLE>EMMA Coverage Report</TITLE><STYLE TYPE="text/css"> TABLE,TD,TH {border-style:solid; border-color:black;} TD,TH {background:white;margin:0;line-height:100%;padding-left:0.5em;padding-right:0.5em;} TD {border-width:0 1px 0 0;} TH {border-width:1px 1px 1px 0;} TR TD.h {color:red;} TABLE {border-spacing:0; border-collapse:collapse;border-width:0 0 1px 1px;} P,H1,H2,H3,TH {font-family:verdana,arial,sans-serif;font-size:10pt;} TD {font-family:courier,monospace;font-size:10pt;} TABLE.hdft {border-spacing:0;border-collapse:collapse;border-style:none;} TABLE.hdft TH,TABLE.hdft TD {border-style:none;line-height:normal;} TABLE.hdft TH.tl,TABLE.hdft TD.tl {background:#6699CC;color:white;} TABLE.hdft TD.nv {background:#6633DD;color:white;} .nv A:link {color:white;} .nv A:visited {color:white;} .nv A:active {color:yellow;} TABLE.hdft A:link {color:white;} TABLE.hdft A:visited {color:white;} TABLE.hdft A:active {color:yellow;} .in {color:#356085;} TABLE.s TD {padding-left:0.25em;padding-right:0.25em;} TABLE.s TD.l {padding-left:0.25em;padding-right:0.25em;text-align:right;background:#F0F0F0;} TABLE.s TR.z TD {background:#FF9999;} TABLE.s TR.p TD {background:#FFFF88;} TABLE.s TR.c TD {background:#CCFFCC;} A:link {color:#0000EE;text-decoration:none;} A:visited {color:#0000EE;text-decoration:none;} A:hover {color:#0000EE;text-decoration:underline;} TABLE.cn {border-width:0 0 1px 0;} TABLE.s {border-width:1px 0 1px 1px;} TD.h {color:red;border-width:0 1px 0 0;} TD.f {border-width:0 1px 0 1px;} TD.hf {color:red;border-width:0 1px 0 1px;} TH.f {border-width:1px 1px 1px 1px;} TR.cis TD {background:#F0F0F0;} TR.cis TD {border-width:1px 1px 1px 0;} TR.cis TD.h {color:red;border-width:1px 1px 1px 0;} TR.cis TD.f {border-width:1px 1px 1px 1px;} TR.cis TD.hf {color:red;border-width:1px 1px 1px 1px;} TD.b {border-style:none;background:transparent;line-height:50%;}  TD.bt {border-width:1px 0 0 0;background:transparent;line-height:50%;} TR.o TD {background:#F0F0F0;}TABLE.it {border-style:none;}TABLE.it TD,TABLE.it TH {border-style:none;}</STYLE></HEAD><BODY><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="tl"><A HREF="http://emma.sourceforge.net/">EMMA</A> Coverage Report (generated Mon May 16 15:10:41 CDT 2011)</TH></TR><TR><TD CLASS="nv">[<A HREF="../coverage.html">all classes</A>][<A HREF="1e.html">com.cboe.businessServices.tradingSessionService</A>]</TD></TR></TABLE><H2>COVERAGE SUMMARY FOR SOURCE FILE [<SPAN CLASS="in">TradingSessionRegistrationMapTest.java</SPAN>]</H2><TABLE CELLSPACING="0" WIDTH="100%"><TR><TH>name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD>TradingSessionRegistrationMapTest.java</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/37)</TD><TD CLASS="h">0%   (0/2095)</TD><TD CLASS="h">0%   (0/277)</TD></TR></TABLE><H3>COVERAGE BREAKDOWN BY CLASS AND METHOD</H3><TABLE CLASS="cn" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="f">name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#0">TradingSessionRegistrationMapTest</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/27)</TD><TD CLASS="h">0%   (0/1954)</TD><TD CLASS="h">0%   (0/250)</TD></TR><TR><TD CLASS="f"><A HREF="#0">&lt;static initializer&gt;</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/34)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2">TradingSessionRegistrationMapTest (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#3">asList (Object []): List</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/13)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4">doTestGetClientsForAllSessions (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/132)</TD><TD CLASS="h">0%   (0/14)</TD></TR><TR><TD CLASS="f"><A HREF="#5">main (String []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/8)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6">newDetail (short, String, String): TradingSessionEventHistoryDetailImpl</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#7">populateHome (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/23)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#8">register (String, String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/27)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="f"><A HREF="#9">testActiveClientMap (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/83)</TD><TD CLASS="h">0%   (0/11)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#a">testGetClientsForAllSessionName (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#b">testGetClientsForAllSessions (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#c">testGetRegisteredGroups (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/210)</TD><TD CLASS="h">0%   (0/22)</TD></TR><TR><TD CLASS="f"><A HREF="#d">testGetRegisteredGroupsByType (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/210)</TD><TD CLASS="h">0%   (0/22)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#e">testGetTSClientForAllSessionName (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/107)</TD><TD CLASS="h">0%   (0/12)</TD></TR><TR><TD CLASS="f"><A HREF="#f">testInactiveClientMap (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/54)</TD><TD CLASS="h">0%   (0/11)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#10">testInactiveClients (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/56)</TD><TD CLASS="h">0%   (0/10)</TD></TR><TR><TD CLASS="f"><A HREF="#11">testKeyValuePairs (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/77)</TD><TD CLASS="h">0%   (0/13)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#12">testNegClientRegistration (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/103)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#13">testNegGroupValidation (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/61)</TD><TD CLASS="h">0%   (0/8)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#14">testPosClientRegistration (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/110)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#15">testPosGroupValidation (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/153)</TD><TD CLASS="h">0%   (0/11)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#16">testSessionRegistration (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/108)</TD><TD CLASS="h">0%   (0/14)</TD></TR><TR><TD CLASS="f"><A HREF="#17">testSessionlessRegistration (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/110)</TD><TD CLASS="h">0%   (0/12)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#18">testUnusualKeyValuePairs (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/89)</TD><TD CLASS="h">0%   (0/13)</TD></TR><TR><TD CLASS="f"><A HREF="#19">testUpdateHistoryDetailForClient (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/54)</TD><TD CLASS="h">0%   (0/12)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1a">testUpdateHistoryDetailForClientForAllSessions (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/72)</TD><TD CLASS="h">0%   (0/11)</TD></TR><TR><TD CLASS="f"><A HREF="#1b">testUpdateUnknownClient (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#1c">TradingSessionRegistrationMapTest$TradingSessionClientTestImpl</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/25)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#1c">TradingSessionRegistrationMapTest$TradingSessionClientTestImpl (TradingSessio...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1e">toString (): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#1f">TradingSessionRegistrationMapTest$TradingSessionRegistrationMapHomeTestImpl</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/106)</TD><TD CLASS="h">0%   (0/22)</TD></TR><TR><TD CLASS="f"><A HREF="#1f">TradingSessionRegistrationMapTest$TradingSessionRegistrationMapHomeTestImpl (...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#21">addToContainer (BObject): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#22">findAllSessions (): TradingSession []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/28)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#23">findConfigurationGroupStruct (String): GroupStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/43)</TD><TD CLASS="h">0%   (0/8)</TD></TR><TR><TD CLASS="f"><A HREF="#24">initGroupInfo (TradingSessionRegistrationImpl): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#25">validateSessionName (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#26">TradingSessionRegistrationMapTest$TradingSessionRegistrationMapHomeTestImpl$1TradingSessionMyImpl</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#26">TradingSessionRegistrationMapTest$TradingSessionRegistrationMapHomeTestImpl$1...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#28">setSessionName (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR></TABLE><P></P><TABLE CLASS="s" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="l">1</TD><TD>package com.cboe.businessServices.tradingSessionService;</TD></TR><TR><TD CLASS="l">2</TD><TD> </TD></TR><TR><TD CLASS="l">3</TD><TD>import com.cboe.businessServices.tradingSessionService.sessionManagement.TradingSessionHomeImpl;</TD></TR><TR><TD CLASS="l">4</TD><TD>import com.cboe.businessServices.tradingSessionService.sessionManagement.TradingSessionImpl;</TD></TR><TR><TD CLASS="l">5</TD><TD>import com.cboe.domain.util.*;</TD></TR><TR><TD CLASS="l">6</TD><TD>import com.cboe.exceptions.*;</TD></TR><TR><TD CLASS="l">7</TD><TD>import com.cboe.idl.cmiConstants.SessionNameValues;</TD></TR><TR><TD CLASS="l">8</TD><TD>import com.cboe.idl.cmiErrorCodes.*;</TD></TR><TR><TD CLASS="l">9</TD><TD>import com.cboe.idl.cmiUtil.KeyValueStruct;</TD></TR><TR><TD CLASS="l">10</TD><TD>import com.cboe.idl.internalBusinessServices.*;</TD></TR><TR><TD CLASS="l">11</TD><TD>import com.cboe.idl.product.*;</TD></TR><TR><TD CLASS="l">12</TD><TD>import com.cboe.idl.session.*;</TD></TR><TR><TD CLASS="l">13</TD><TD>import com.cboe.infrastructureServices.foundationFramework.*;</TD></TR><TR><TD CLASS="l">14</TD><TD>import com.cboe.interfaces.businessServices.TradingSessionEventType;</TD></TR><TR><TD CLASS="l">15</TD><TD>import com.cboe.interfaces.businessServices.TradingSessionService;</TD></TR><TR><TD CLASS="l">16</TD><TD>import com.cboe.interfaces.domain.session.*;</TD></TR><TR><TD CLASS="l">17</TD><TD>import java.util.*;</TD></TR><TR><TD CLASS="l">18</TD><TD> </TD></TR><TR><TD CLASS="l">19</TD><TD>import junit.framework.*;</TD></TR><TR><TD CLASS="l">20</TD><TD> </TD></TR><TR><TD CLASS="l">21</TD><TD>/**</TD></TR><TR><TD CLASS="l">22</TD><TD> * A suite of unit tests for the reg map home.</TD></TR><TR><TD CLASS="l">23</TD><TD> *</TD></TR><TR><TD CLASS="l"><A NAME="0">24</A></TD><TD> * @author Steven Sinclair</TD></TR><TR><TD CLASS="l">25</TD><TD> */</TD></TR><TR><TD CLASS="l">26</TD><TD>public class TradingSessionRegistrationMapTest extends TestCase</TD></TR><TR><TD CLASS="l">27</TD><TD>{</TD></TR><TR CLASS="z"><TD CLASS="l">28</TD><TD>    private final static KeyValueStruct[] EMPTY_KeyValueStruct = new KeyValueStruct[0];</TD></TR><TR><TD CLASS="l">29</TD><TD>    ///////////////////////////////////////////////////////////////////////////</TD></TR><TR><TD CLASS="l">30</TD><TD>    //</TD></TR><TR><TD CLASS="l">31</TD><TD>    // framework methods:</TD></TR><TR><TD CLASS="l"><A NAME="2">32</A></TD><TD>    //</TD></TR><TR><TD CLASS="l">33</TD><TD> </TD></TR><TR><TD CLASS="l">34</TD><TD>    public TradingSessionRegistrationMapTest(String methodName)</TD></TR><TR><TD CLASS="l">35</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">36</TD><TD>        super(methodName);</TD></TR><TR CLASS="z"><TD CLASS="l">37</TD><TD>    }</TD></TR><TR><TD CLASS="l">38</TD><TD> </TD></TR><TR><TD CLASS="l">39</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="5">40</A></TD><TD>     * Runs the unit tests.</TD></TR><TR><TD CLASS="l">41</TD><TD>     */</TD></TR><TR><TD CLASS="l">42</TD><TD>    public static void main(String args[])</TD></TR><TR><TD CLASS="l">43</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">44</TD><TD>        FoundationFramework.getInstance().setDefaultLogComponent(&#34;whatever&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="1c">45</A></TD><TD>        com.cboe.infrastructureServices.loggingService.LogServiceBaseImpl.setServiceImplClassName(&#34;com.cboe.infrastructureServices.loggingService.LogServiceNullImpl&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">46</TD><TD>        junit.textui.TestRunner.run(TradingSessionRegistrationMapTest.class);</TD></TR><TR CLASS="z"><TD CLASS="l">47</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="1e">48</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">49</TD><TD>    class TradingSessionClientTestImpl extends _TradingSessionClientStub implements TradingSessionClient</TD></TR><TR><TD CLASS="l">50</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">51</TD><TD>        int num = Math.abs(new Random(System.currentTimeMillis()).nextInt(100000));</TD></TR><TR CLASS="z"><TD CLASS="l">52</TD><TD>        public String toString() { return &#34;TSClient_&#34; + num; }</TD></TR><TR><TD CLASS="l">53</TD><TD>    }</TD></TR><TR><TD CLASS="l">54</TD><TD> </TD></TR><TR><TD CLASS="l">55</TD><TD> </TD></TR><TR><TD CLASS="l">56</TD><TD>    /**</TD></TR><TR><TD CLASS="l">57</TD><TD>     *  Extends the target impl to avoid calls to PCS and TSS.</TD></TR><TR><TD CLASS="l"><A NAME="1f">58</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">59</TD><TD>    class TradingSessionRegistrationMapHomeTestImpl extends TradingSessionRegistrationMapHomeImpl</TD></TR><TR><TD CLASS="l">60</TD><TD>    {</TD></TR><TR><TD CLASS="l">61</TD><TD>        TradingSessionRegistrationMapHomeTestImpl()</TD></TR><TR CLASS="z"><TD CLASS="l">62</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">63</TD><TD>            setName(null);</TD></TR><TR CLASS="z"><TD CLASS="l">64</TD><TD>            tradingSessionHome = new TradingSessionHomeImpl();</TD></TR><TR CLASS="z"><TD CLASS="l">65</TD><TD>        }</TD></TR><TR><TD CLASS="l">66</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="24">67</A></TD><TD>        // Avoid hitting PCS while testing: there is no PCS.</TD></TR><TR><TD CLASS="l">68</TD><TD>        //</TD></TR><TR><TD CLASS="l">69</TD><TD>        protected String initGroupInfo(TradingSessionRegistrationImpl registration)</TD></TR><TR><TD CLASS="l">70</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">71</TD><TD>            registration.setGroupName(getGroupName(registration.getClientName()));</TD></TR><TR CLASS="z"><TD CLASS="l">72</TD><TD>            registration.setPCSGroupType( registration.getClientName().indexOf(&#34;TS&#34;) &gt; 0 ? 2 : 10 );</TD></TR><TR CLASS="z"><TD CLASS="l">73</TD><TD>            return  registration.getGroupName();</TD></TR><TR><TD CLASS="l"><A NAME="21">74</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">75</TD><TD> </TD></TR><TR><TD CLASS="l">76</TD><TD>        public void addToContainer(com.cboe.infrastructureServices.foundationFramework.BObject obj)</TD></TR><TR><TD CLASS="l">77</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="25">78</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">79</TD><TD> </TD></TR><TR><TD CLASS="l">80</TD><TD>        protected void validateSessionName(String sessionName)</TD></TR><TR><TD CLASS="l">81</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="23">82</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">83</TD><TD> </TD></TR><TR><TD CLASS="l">84</TD><TD>        protected GroupStruct findConfigurationGroupStruct(String groupName) throws Exception</TD></TR><TR><TD CLASS="l">85</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">86</TD><TD>            GroupStruct groupStruct = new GroupStruct();</TD></TR><TR CLASS="z"><TD CLASS="l">87</TD><TD>            groupStruct.groupKey  = groupName.hashCode();</TD></TR><TR CLASS="z"><TD CLASS="l">88</TD><TD>            groupStruct.groupName = groupName;</TD></TR><TR CLASS="z"><TD CLASS="l">89</TD><TD>            groupStruct.groupType = new GroupTypeStruct();</TD></TR><TR CLASS="z"><TD CLASS="l">90</TD><TD>            groupStruct.groupType.groupType = (groupName.indexOf(&#34;TS&#34;)&gt;0 ? 2 : 10 );</TD></TR><TR CLASS="z"><TD CLASS="l">91</TD><TD>            groupStruct.groupType.groupTypeDescription = &#34;grpDesc for &#34; + groupName;</TD></TR><TR CLASS="z"><TD CLASS="l">92</TD><TD>            groupStruct.groupType.exclusiveMembership = false;</TD></TR><TR CLASS="z"><TD CLASS="l">93</TD><TD>            return groupStruct;</TD></TR><TR><TD CLASS="l"><A NAME="26">94</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">95</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="28">96</A></TD><TD>        protected TradingSession[] findAllSessions()</TD></TR><TR><TD CLASS="l">97</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">98</TD><TD>            class TradingSessionMyImpl extends TradingSessionImpl</TD></TR><TR><TD CLASS="l"><A NAME="22">99</A></TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">100</TD><TD>                public void setSessionName(String name) { super.setSessionName(name); }</TD></TR><TR><TD CLASS="l">101</TD><TD>            };</TD></TR><TR><TD CLASS="l">102</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">103</TD><TD>            TradingSessionMyImpl[] result = new TradingSessionMyImpl[ALL_SESSIONS.length];</TD></TR><TR CLASS="z"><TD CLASS="l">104</TD><TD>            for (int i=0; i &lt; ALL_SESSIONS.length; i++)</TD></TR><TR><TD CLASS="l">105</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">106</TD><TD>                result[i] = new TradingSessionMyImpl();</TD></TR><TR CLASS="z"><TD CLASS="l">107</TD><TD>                result[i].setSessionName(ALL_SESSIONS[i]);</TD></TR><TR><TD CLASS="l">108</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">109</TD><TD>            return result;</TD></TR><TR><TD CLASS="l">110</TD><TD>        }</TD></TR><TR><TD CLASS="l">111</TD><TD>    }</TD></TR><TR><TD CLASS="l">112</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">113</TD><TD>    TradingSessionRegistrationMapHomeTestImpl home = new TradingSessionRegistrationMapHomeTestImpl();</TD></TR><TR><TD CLASS="l">114</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">115</TD><TD>    static final String[] ALL_SESSIONS =  new String[] { &#34;W_MAIN&#34;, &#34;ONE_MAIN&#34;, &#34;OTHER_MAIN&#34; };</TD></TR><TR CLASS="z"><TD CLASS="l">116</TD><TD>    static final String[] W_MAIN_CLIENTS =  { &#34;tstBC04HyTS1.HyTS1&#34;, &#34;tstBC04.StatusServer&#34;, &#34;tstBC05HyTS1.HyTS&#34; };</TD></TR><TR><TD CLASS="l">117</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">118</TD><TD>    HashMap clientMap = new HashMap();</TD></TR><TR><TD CLASS="l">119</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="7">120</A></TD><TD>    // Some tests want the home pre-populated.  Some may not, so it's not a setUp() method.</TD></TR><TR><TD CLASS="l">121</TD><TD>    //</TD></TR><TR><TD CLASS="l">122</TD><TD>    void populateHome() throws Exception</TD></TR><TR><TD CLASS="l">123</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">124</TD><TD>        for (int i=0; i &lt; W_MAIN_CLIENTS.length; i++)</TD></TR><TR><TD CLASS="l">125</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">126</TD><TD>            register(&#34;W_MAIN&#34;,   W_MAIN_CLIENTS[i]);</TD></TR><TR><TD CLASS="l">127</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">128</TD><TD>        register(&#34;ONE_MAIN&#34;, &#34;tstBC02TS2.TS&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">129</TD><TD>        register(null, &#34;BC01TS1.HyTS&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="8">130</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">131</TD><TD> </TD></TR><TR><TD CLASS="l">132</TD><TD>    protected void register(String session, String name) throws DataValidationException</TD></TR><TR><TD CLASS="l">133</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">134</TD><TD>        TradingSessionClientTestImpl clientStub = new TradingSessionClientTestImpl();</TD></TR><TR CLASS="z"><TD CLASS="l">135</TD><TD>        clientMap.put(name, clientStub);</TD></TR><TR CLASS="z"><TD CLASS="l">136</TD><TD>        if (session == null)</TD></TR><TR CLASS="z"><TD CLASS="l">137</TD><TD>            home.registerClient(name, clientStub);</TD></TR><TR><TD CLASS="l">138</TD><TD>        else</TD></TR><TR CLASS="z"><TD CLASS="l">139</TD><TD>            home.registerClient(session, name, clientStub, EMPTY_KeyValueStruct);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6">140</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">141</TD><TD> </TD></TR><TR><TD CLASS="l">142</TD><TD>    protected TradingSessionEventHistoryDetailImpl newDetail(short state, String clientId, String sessionName)</TD></TR><TR><TD CLASS="l">143</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">144</TD><TD>        TradingSessionEventHistoryDetailImpl detail = new TradingSessionEventHistoryDetailImpl();</TD></TR><TR CLASS="z"><TD CLASS="l">145</TD><TD>        detail.setEventState(state);</TD></TR><TR CLASS="z"><TD CLASS="l">146</TD><TD>        detail.setClientName(clientId);</TD></TR><TR CLASS="z"><TD CLASS="l">147</TD><TD>        TradingSessionEventHistoryImpl history = new TradingSessionEventHistoryImpl();</TD></TR><TR CLASS="z"><TD CLASS="l">148</TD><TD>        history.setSessionName(sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">149</TD><TD>        detail.setHistoryEntry(history);</TD></TR><TR CLASS="z"><TD CLASS="l">150</TD><TD>        return detail;</TD></TR><TR><TD CLASS="l">151</TD><TD>    }</TD></TR><TR><TD CLASS="l">152</TD><TD> </TD></TR><TR><TD CLASS="l">153</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="3">154</A></TD><TD>     *  Same as &lt;code&gt;Arrays.asList(Object[])&lt;/code&gt;, but returns a mutable list.</TD></TR><TR><TD CLASS="l">155</TD><TD>     */</TD></TR><TR><TD CLASS="l">156</TD><TD>    protected List asList(Object[] vals)</TD></TR><TR><TD CLASS="l">157</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">158</TD><TD>        List result = new ArrayList(vals.length);</TD></TR><TR CLASS="z"><TD CLASS="l">159</TD><TD>        result.addAll(Arrays.asList(vals));</TD></TR><TR CLASS="z"><TD CLASS="l">160</TD><TD>        return result;</TD></TR><TR><TD CLASS="l">161</TD><TD>    }</TD></TR><TR><TD CLASS="l">162</TD><TD> </TD></TR><TR><TD CLASS="l">163</TD><TD>    ///////////////////////////////////////////////////////////////////////////</TD></TR><TR><TD CLASS="l">164</TD><TD>    //</TD></TR><TR><TD CLASS="l">165</TD><TD>    // tests:</TD></TR><TR><TD CLASS="l"><A NAME="16">166</A></TD><TD>    //</TD></TR><TR><TD CLASS="l">167</TD><TD> </TD></TR><TR><TD CLASS="l">168</TD><TD>    public void testSessionRegistration() throws Exception</TD></TR><TR><TD CLASS="l">169</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">170</TD><TD>        populateHome();</TD></TR><TR><TD CLASS="l">171</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">172</TD><TD>        Set expectedClients = new HashSet();</TD></TR><TR CLASS="z"><TD CLASS="l">173</TD><TD>        expectedClients.addAll(Arrays.asList(W_MAIN_CLIENTS));</TD></TR><TR CLASS="z"><TD CLASS="l">174</TD><TD>        expectedClients.add(&#34;BC01TS1.HyTS&#34;); // expect the sessionless registration, too.</TD></TR><TR><TD CLASS="l">175</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">176</TD><TD>        String[] activeClients = home.getActiveClientsForSession(&#34;W_MAIN&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">177</TD><TD>        for (int i=0; i &lt; activeClients.length; i++)</TD></TR><TR><TD CLASS="l">178</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">179</TD><TD>            String prefix = &#34;Element &#34; + i + &#34; of returned array, '&#34; + activeClients[i] + &#34;'&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">180</TD><TD>            assertTrue(prefix + &#34; is null!&#34;, activeClients[i] != null);</TD></TR><TR CLASS="z"><TD CLASS="l">181</TD><TD>            assertTrue(prefix + &#34; is not expected, or was found twice!&#34;, expectedClients.contains(activeClients[i]));</TD></TR><TR CLASS="z"><TD CLASS="l">182</TD><TD>            expectedClients.remove(activeClients[i]);</TD></TR><TR><TD CLASS="l">183</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">184</TD><TD>        assertTrue(&#34;Expected empty list after validating results&#34;, expectedClients.size() == 0);</TD></TR><TR><TD CLASS="l">185</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">186</TD><TD>        assertTrue(&#34;Did not expect to find \&#34;tstBC02TS2.TS\&#34; as active client for W_MAIN&#34;, !Arrays.asList(activeClients).contains(&#34;tstBC02TS2.TS&#34;));</TD></TR><TR><TD CLASS="l">187</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">188</TD><TD>        assertEquals(&#34;Expected no inactive clients&#34;, home.getInactiveClientsForSession(&#34;W_MAIN&#34;).length, 0);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="17">189</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">190</TD><TD> </TD></TR><TR><TD CLASS="l">191</TD><TD>    public void testSessionlessRegistration() throws Exception</TD></TR><TR><TD CLASS="l">192</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">193</TD><TD>        populateHome();</TD></TR><TR CLASS="z"><TD CLASS="l">194</TD><TD>        String client = &#34;sessionless.clientGuy&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">195</TD><TD>        register(null, client);</TD></TR><TR CLASS="z"><TD CLASS="l">196</TD><TD>        TradingSessionRegistration lastReg=null;</TD></TR><TR CLASS="z"><TD CLASS="l">197</TD><TD>        for (int i=0; i &lt; ALL_SESSIONS.length; i++)</TD></TR><TR><TD CLASS="l">198</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">199</TD><TD>            assertTrue(&#34;Expected to find '&#34; + client + &#34;' as active in all sessions; not returned for session '&#34; + ALL_SESSIONS[i] + &#34;'&#34;,</TD></TR><TR><TD CLASS="l">200</TD><TD>                Arrays.asList(home.getActiveClientsForSession(ALL_SESSIONS[i])).contains(client));</TD></TR><TR><TD CLASS="l">201</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">202</TD><TD>            TradingSessionRegistration reg = home.findRegistration(ALL_SESSIONS[i], client);</TD></TR><TR CLASS="z"><TD CLASS="l">203</TD><TD>            assertTrue(&#34;Expected non-null registration for client in session &#34; + ALL_SESSIONS[i], reg != null);</TD></TR><TR CLASS="z"><TD CLASS="l">204</TD><TD>            assertTrue(&#34;Expected different registration for each session.  Failed for at least session &#34; + ALL_SESSIONS[i], reg != lastReg);</TD></TR><TR CLASS="z"><TD CLASS="l">205</TD><TD>            lastReg = reg;</TD></TR><TR><TD CLASS="l">206</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">207</TD><TD>        assertTrue(&#34;Expected to find '&#34; + client + &#34;' as active in all sessions; not returned for session '&#34; + SessionNameValues.ALL_SESSION_NAME + &#34;'&#34;,</TD></TR><TR><TD CLASS="l">208</TD><TD>            Arrays.asList(home.getActiveClientsForSession(SessionNameValues.ALL_SESSION_NAME)).contains(client));</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="10">209</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">210</TD><TD> </TD></TR><TR><TD CLASS="l">211</TD><TD>    public void testInactiveClients() throws Exception</TD></TR><TR><TD CLASS="l">212</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">213</TD><TD>        populateHome();</TD></TR><TR CLASS="z"><TD CLASS="l">214</TD><TD>        String myClientName = &#34;myGroup.myClient&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">215</TD><TD>        register(&#34;W_MAIN&#34;, myClientName);</TD></TR><TR CLASS="z"><TD CLASS="l">216</TD><TD>        TradingSessionClientTestImpl newClient = new TradingSessionClientTestImpl();</TD></TR><TR CLASS="z"><TD CLASS="l">217</TD><TD>        home.updateClientState(myClientName, newClient, false);</TD></TR><TR><TD CLASS="l">218</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">219</TD><TD>        assertTrue(&#34;Inactivated client should not be in active list&#34;,</TD></TR><TR><TD CLASS="l">220</TD><TD>                !Arrays.asList(home.getActiveClientsForSession(&#34;W_MAIN&#34;)).contains(myClientName));</TD></TR><TR CLASS="z"><TD CLASS="l">221</TD><TD>        assertTrue(&#34;Inactivated client should be in the inactive list&#34;,</TD></TR><TR><TD CLASS="l">222</TD><TD>                Arrays.asList(home.getInactiveClientsForSession(&#34;W_MAIN&#34;)).contains(myClientName));</TD></TR><TR><TD CLASS="l">223</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">224</TD><TD>        TradingSessionClient theClient = home.getTradingSessionClientForClient(&#34;W_MAIN&#34;, myClientName);</TD></TR><TR CLASS="z"><TD CLASS="l">225</TD><TD>        assertTrue(&#34;Client impl is not the updated impl.&#34;, newClient == theClient);</TD></TR><TR CLASS="z"><TD CLASS="l">226</TD><TD>    }</TD></TR><TR><TD CLASS="l">227</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="1b">228</A></TD><TD>    public void testUpdateUnknownClient() throws Exception</TD></TR><TR><TD CLASS="l">229</TD><TD>    {</TD></TR><TR><TD CLASS="l">230</TD><TD>        try</TD></TR><TR><TD CLASS="l">231</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">232</TD><TD>            home.updateClientState(&#34;unknown.client&#34;, new TradingSessionClientTestImpl(), true);</TD></TR><TR CLASS="z"><TD CLASS="l">233</TD><TD>            assertTrue(&#34;Unknown client should have thrown NotFoundException&#34;, false);</TD></TR><TR><TD CLASS="l">234</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">235</TD><TD>        catch (NotFoundException ex) { /*expected*/ }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="9">236</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">237</TD><TD> </TD></TR><TR><TD CLASS="l">238</TD><TD>    public void testActiveClientMap() throws Exception</TD></TR><TR><TD CLASS="l">239</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">240</TD><TD>        populateHome();</TD></TR><TR CLASS="z"><TD CLASS="l">241</TD><TD>        String myClient = &#34;myGroup.myClient&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">242</TD><TD>        register(&#34;W_MAIN&#34;, myClient);</TD></TR><TR CLASS="z"><TD CLASS="l">243</TD><TD>        home.updateClientState(myClient, new TradingSessionClientTestImpl(), false);</TD></TR><TR><TD CLASS="l">244</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">245</TD><TD>        Map map = home.getActiveClientMapForSession(&#34;W_MAIN&#34;);</TD></TR><TR><TD CLASS="l">246</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">247</TD><TD>        for (int i=0; i &lt; W_MAIN_CLIENTS.length; i++)</TD></TR><TR><TD CLASS="l">248</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">249</TD><TD>            assertTrue(&#34;Client '&#34; + W_MAIN_CLIENTS[i] + &#34;' not in active map.&#34;, map.containsKey(W_MAIN_CLIENTS[i]));</TD></TR><TR CLASS="z"><TD CLASS="l">250</TD><TD>            Object clientImpl = map.get(W_MAIN_CLIENTS[i]);</TD></TR><TR CLASS="z"><TD CLASS="l">251</TD><TD>            assertTrue(&#34;IDL Client not the expected instance&#34;, clientImpl == map.get(W_MAIN_CLIENTS[i]));</TD></TR><TR><TD CLASS="l">252</TD><TD>        }</TD></TR><TR><TD CLASS="l">253</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">254</TD><TD>        assertTrue(&#34;Inactive client should not be in active client map: &#34; + map, !map.containsKey(myClient));</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="f">255</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">256</TD><TD> </TD></TR><TR><TD CLASS="l">257</TD><TD>    public void testInactiveClientMap() throws Exception</TD></TR><TR><TD CLASS="l">258</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">259</TD><TD>        populateHome();</TD></TR><TR CLASS="z"><TD CLASS="l">260</TD><TD>        String myClient = &#34;myGroup.myClient&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">261</TD><TD>        register(&#34;W_MAIN&#34;, myClient);</TD></TR><TR CLASS="z"><TD CLASS="l">262</TD><TD>        home.updateClientState(myClient, new TradingSessionClientTestImpl(), false);</TD></TR><TR><TD CLASS="l">263</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">264</TD><TD>        Map map = home.getInactiveClientMapForSession(&#34;W_MAIN&#34;);</TD></TR><TR><TD CLASS="l">265</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">266</TD><TD>        assertEquals(&#34;Expected a single inactive client&#34;, 1, map.size());</TD></TR><TR CLASS="z"><TD CLASS="l">267</TD><TD>        assertTrue(&#34;Expected my client to be the inactive one&#34;, map.containsKey(myClient));</TD></TR><TR CLASS="z"><TD CLASS="l">268</TD><TD>        Object clientImpl = map.get(myClient);</TD></TR><TR CLASS="z"><TD CLASS="l">269</TD><TD>        assertTrue(&#34;Did not expect a null client for my client name&#34;, clientImpl != null);</TD></TR><TR CLASS="z"><TD CLASS="l">270</TD><TD>        assertTrue(&#34;Got the wrong IDL client for my client name&#34;, clientImpl == map.get(myClient));</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="14">271</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">272</TD><TD> </TD></TR><TR><TD CLASS="l">273</TD><TD>    public void testPosClientRegistration() throws Exception</TD></TR><TR><TD CLASS="l">274</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">275</TD><TD>        populateHome();</TD></TR><TR CLASS="z"><TD CLASS="l">276</TD><TD>        String[] names   = { W_MAIN_CLIENTS[0], W_MAIN_CLIENTS[1], W_MAIN_CLIENTS[2], &#34;tstBC02TS2.TS&#34;, &#34;BC01TS1.HyTS&#34; };</TD></TR><TR CLASS="z"><TD CLASS="l">277</TD><TD>        String[] session = { &#34;W_MAIN&#34;,          &#34;W_MAIN&#34;,          &#34;W_MAIN&#34;,          &#34;ONE_MAIN&#34;,      &#34;ONE_MAIN&#34; };</TD></TR><TR><TD CLASS="l">278</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">279</TD><TD>        for (int i=0; i &lt; names.length; i++)</TD></TR><TR><TD CLASS="l">280</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">281</TD><TD>            assertTrue(&#34;Client '&#34; + names[i] + &#34;' for session '&#34; + session[i] + &#34;' was not validated!&#34;, home.validateClientRegistration(session[i], names[i]));</TD></TR><TR CLASS="z"><TD CLASS="l">282</TD><TD>            assertTrue(&#34;Client '&#34; + names[i] + &#34;' for any session was not validated!&#34;, home.validateClientRegistration(names[i]));</TD></TR><TR><TD CLASS="l">283</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="12">284</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">285</TD><TD> </TD></TR><TR><TD CLASS="l">286</TD><TD>    public void testNegClientRegistration() throws Exception</TD></TR><TR><TD CLASS="l">287</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">288</TD><TD>        populateHome();</TD></TR><TR CLASS="z"><TD CLASS="l">289</TD><TD>        String[] names   = { W_MAIN_CLIENTS[0], W_MAIN_CLIENTS[1], &#34;not.really&#34;, &#34;tstBC02TS2.TS&#34;, &#34;BC01TS1.HyTS&#34; };</TD></TR><TR CLASS="z"><TD CLASS="l">290</TD><TD>        String[] session = { &#34;OTHER_MAIN&#34;,      &#34;ONE_MAIN&#34;,        &#34;W_MAIN&#34;,     &#34;W_MAIN&#34;,        &#34;BLAH_SESSION&#34; };</TD></TR><TR><TD CLASS="l">291</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">292</TD><TD>        for (int i=0; i &lt; names.length; i++)</TD></TR><TR><TD CLASS="l">293</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">294</TD><TD>            assertTrue(&#34;Client '&#34; + names[i] + &#34;' for session '&#34; + session[i] + &#34;' was validated!&#34;, !home.validateClientRegistration(session[i], names[i]));</TD></TR><TR><TD CLASS="l">295</TD><TD>        }</TD></TR><TR><TD CLASS="l">296</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">297</TD><TD>        assertTrue(&#34;Client 'not.really' was validated for any session!&#34;, !home.validateClientRegistration(&#34;not.really&#34;));</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="15">298</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">299</TD><TD> </TD></TR><TR><TD CLASS="l">300</TD><TD>    public void testPosGroupValidation() throws Exception</TD></TR><TR><TD CLASS="l">301</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">302</TD><TD>        register(&#34;W_MAIN&#34;,   &#34;group1.serverA&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">303</TD><TD>        register(&#34;W_MAIN&#34;,   &#34;group1b.serverB&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">304</TD><TD>        register(&#34;W_MAIN&#34;,   &#34;group2.serverTSC&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">305</TD><TD>        register(&#34;ONE_MAIN&#34;, &#34;group3.serverD&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">306</TD><TD>        register(null,       &#34;group99.serverX&#34;);</TD></TR><TR><TD CLASS="l">307</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">308</TD><TD>        String[] names   = { &#34;group1&#34;, &#34;group1b&#34;, &#34;group2&#34;, &#34;group3&#34;,   &#34;group99&#34;, &#34;group99&#34;,  &#34;group99&#34;    };</TD></TR><TR CLASS="z"><TD CLASS="l">309</TD><TD>        String[] session = { &#34;W_MAIN&#34;, &#34;W_MAIN&#34;,  &#34;W_MAIN&#34;, &#34;ONE_MAIN&#34;, &#34;W_MAIN&#34;,  &#34;ONE_MAIN&#34;, &#34;OTHER_MAIN&#34; };</TD></TR><TR CLASS="z"><TD CLASS="l">310</TD><TD>        int[]    grpType = { 10,       10,        2,        10,         10,        10,         10           };</TD></TR><TR><TD CLASS="l">311</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">312</TD><TD>        for (int i=0; i &lt; names.length; i++)</TD></TR><TR><TD CLASS="l">313</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">314</TD><TD>            assertTrue(&#34;Group '&#34; + names[i] + &#34;' for session '&#34; + session[i] + &#34;' was not validated!&#34;, home.validateGroupRegistration(session[i], names[i], grpType[i]));</TD></TR><TR><TD CLASS="l">315</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="13">316</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">317</TD><TD> </TD></TR><TR><TD CLASS="l">318</TD><TD>    public void testNegGroupValidation() throws Exception</TD></TR><TR><TD CLASS="l">319</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">320</TD><TD>        register(&#34;W_MAIN&#34;,   &#34;group1.serverA&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">321</TD><TD>        register(&#34;W_MAIN&#34;,   &#34;group3.serverTSX&#34;); // group type 2</TD></TR><TR CLASS="z"><TD CLASS="l">322</TD><TD>        register(&#34;ONE_MAIN&#34;, &#34;group2.serverB&#34;);</TD></TR><TR><TD CLASS="l">323</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">324</TD><TD>        assertTrue(&#34;group1 validated for ONE_MAIN!&#34;,  !home.validateGroupRegistration(&#34;ONE_MAIN&#34;, &#34;group1&#34;, 10));</TD></TR><TR CLASS="z"><TD CLASS="l">325</TD><TD>        assertTrue(&#34;group2 validated for W_MAIN!&#34;,    !home.validateGroupRegistration(&#34;W_MAIN&#34;,   &#34;group2&#34;, 10));</TD></TR><TR CLASS="z"><TD CLASS="l">326</TD><TD>        assertTrue(&#34;group3 validated for W_MAIN with type 10!&#34;, !home.validateGroupRegistration(&#34;W_MAIN&#34;,   &#34;group3&#34;, 10));</TD></TR><TR CLASS="z"><TD CLASS="l">327</TD><TD>        assertTrue(&#34;groupBlah validated for W_MAIN!&#34;, !home.validateGroupRegistration(&#34;W_MAIN&#34;,   &#34;groupBlah&#34;, 10));</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="e">328</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">329</TD><TD> </TD></TR><TR><TD CLASS="l">330</TD><TD>    public void testGetTSClientForAllSessionName() throws Exception</TD></TR><TR><TD CLASS="l">331</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">332</TD><TD>        String[] clients = new String[] { &#34;g1.sA&#34;, &#34;g2.sB&#34;, &#34;g3.sC&#34;, &#34;g99.sX&#34;, &#34;g99.sY&#34; };</TD></TR><TR><TD CLASS="l">333</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">334</TD><TD>        register(&#34;W_MAIN&#34;,    &#34;clients[0]&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">335</TD><TD>        register(&#34;W_MAIN&#34;,    &#34;clients[1]&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">336</TD><TD>        register(&#34;ONE_MAIN&#34;,  &#34;clients[2]&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">337</TD><TD>        register(null,        &#34;clients[3]&#34;);    // causes three registrations (W_MAIN, ONE_MAIN, and OTHER_MAIN)</TD></TR><TR CLASS="z"><TD CLASS="l">338</TD><TD>        register(null,        &#34;clients[4]&#34;);    // causes three registrations (W_MAIN, ONE_MAIN, and OTHER_MAIN)</TD></TR><TR><TD CLASS="l">339</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">340</TD><TD>        for (int i=0; i &lt; clients.length; i++)</TD></TR><TR><TD CLASS="l">341</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">342</TD><TD>            TradingSessionClient tsc = home.getTradingSessionClientForClient(&#34;W_MAIN&#34;, clients[i]);</TD></TR><TR CLASS="z"><TD CLASS="l">343</TD><TD>            assertTrue(&#34;Unexpected tsc for &#34; + clients[i] + &#34;: &#34; + tsc, tsc == clientMap.get(clients[i]));</TD></TR><TR><TD CLASS="l">344</TD><TD>        }</TD></TR><TR><TD CLASS="l">345</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">346</TD><TD>        TradingSessionClient blahTsc = home.getTradingSessionClientForClient(&#34;W_MAIN&#34;, &#34;blah&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">347</TD><TD>        assertTrue(&#34;Unexpected null tsc for blahClient: &#34; + blahTsc, null == blahTsc);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="a">348</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">349</TD><TD> </TD></TR><TR><TD CLASS="l">350</TD><TD>    public void testGetClientsForAllSessionName() throws Exception</TD></TR><TR><TD CLASS="l">351</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">352</TD><TD>        doTestGetClientsForAllSessions(SessionNameValues.ALL_SESSION_NAME);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="b">353</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">354</TD><TD> </TD></TR><TR><TD CLASS="l">355</TD><TD>    public void testGetClientsForAllSessions() throws Exception</TD></TR><TR><TD CLASS="l">356</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">357</TD><TD>        doTestGetClientsForAllSessions(TradingSessionService.ALL_SESSIONS);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="4">358</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">359</TD><TD> </TD></TR><TR><TD CLASS="l">360</TD><TD>    public void doTestGetClientsForAllSessions(String allSessionsIdentifier) throws Exception</TD></TR><TR><TD CLASS="l">361</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">362</TD><TD>        register(&#34;W_MAIN&#34;,    &#34;g1.sA&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">363</TD><TD>        register(&#34;W_MAIN&#34;,    &#34;g2.sB&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">364</TD><TD>        register(&#34;ONE_MAIN&#34;,  &#34;g3.sC&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">365</TD><TD>        register(null,        &#34;g99.sX&#34;);    // causes three registrations (W_MAIN, ONE_MAIN, and OTHER_MAIN)</TD></TR><TR CLASS="z"><TD CLASS="l">366</TD><TD>        register(null,        &#34;g99.sY&#34;);    // causes three registrations (W_MAIN, ONE_MAIN, and OTHER_MAIN)</TD></TR><TR><TD CLASS="l">367</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">368</TD><TD>        home.updateClientState(&#34;g2.sB&#34;,  null, false);      // inactivate this guy in W_MAIN</TD></TR><TR CLASS="z"><TD CLASS="l">369</TD><TD>        home.updateClientState(&#34;g99.sX&#34;, null, false);      // inactivate this guy in all sessions</TD></TR><TR CLASS="z"><TD CLASS="l">370</TD><TD>        Map activeMap = home.getActiveClientMapForSession(allSessionsIdentifier);</TD></TR><TR><TD CLASS="l">371</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">372</TD><TD>        assertEquals(&#34;Unexpected number of active clients&#34;, 3, activeMap.size());</TD></TR><TR><TD CLASS="l">373</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">374</TD><TD>        String[]  names  = new String[]  { &#34;g1.sA&#34;, &#34;g2.sB&#34;, &#34;g3.sC&#34;, &#34;g99.sX&#34;, &#34;g99.sY&#34; };</TD></TR><TR CLASS="z"><TD CLASS="l">375</TD><TD>        boolean[] expect = new boolean[] { true,    false,   true,    false,    true     };</TD></TR><TR CLASS="z"><TD CLASS="l">376</TD><TD>        for (int i=0; i &lt; names.length; i++)</TD></TR><TR><TD CLASS="l">377</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">378</TD><TD>            assertTrue(&#34;Expected &#34; + names[i] + &#34; to &#34; + (expect[i] ? &#34;be&#34;:&#34;not be&#34;) + &#34; in active map&#34;, expect[i] == activeMap.containsKey(names[i]));</TD></TR><TR><TD CLASS="l">379</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="11">380</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">381</TD><TD> </TD></TR><TR><TD CLASS="l">382</TD><TD>    public void testKeyValuePairs() throws Exception</TD></TR><TR><TD CLASS="l">383</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">384</TD><TD>        register(&#34;W_MAIN&#34;, &#34;g1.sA&#34;);</TD></TR><TR><TD CLASS="l">385</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">386</TD><TD>        TradingSessionRegistration reg = home.findRegistration(&#34;W_MAIN&#34;, &#34;g1.sA&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">387</TD><TD>        KeyValueStruct[] keyVals = reg.getServerDetails();</TD></TR><TR CLASS="z"><TD CLASS="l">388</TD><TD>        assertEquals(&#34;Unexpected initial detail struct sequence.&#34;, 0, keyVals.length);</TD></TR><TR><TD CLASS="l">389</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">390</TD><TD>        KeyValueStruct[] newVals = new KeyValueStruct[] { new KeyValueStruct(&#34;a&#34;,&#34;apple&#34;), new KeyValueStruct(&#34;b&#34;, &#34;bear&#34;) };</TD></TR><TR CLASS="z"><TD CLASS="l">391</TD><TD>        reg.setServerDetails(newVals);</TD></TR><TR><TD CLASS="l">392</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">393</TD><TD>        keyVals = reg.getServerDetails();</TD></TR><TR CLASS="z"><TD CLASS="l">394</TD><TD>        assertEquals(&#34;Unexpected detail struct sequence after setting.&#34;, 2, keyVals.length);</TD></TR><TR><TD CLASS="l">395</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">396</TD><TD>        assertEquals(&#34;1st detail key should be 'a'&#34;, &#34;a&#34;, keyVals[0].key);</TD></TR><TR CLASS="z"><TD CLASS="l">397</TD><TD>        assertEquals(&#34;2nd detail key should be 'b'&#34;, &#34;b&#34;, keyVals[1].key);</TD></TR><TR CLASS="z"><TD CLASS="l">398</TD><TD>        assertEquals(&#34;1st detail value should be 'apple'&#34;, &#34;apple&#34;, keyVals[0].value);</TD></TR><TR CLASS="z"><TD CLASS="l">399</TD><TD>        assertEquals(&#34;2nd detail value should be 'bear'&#34;,  &#34;bear&#34;,  keyVals[1].value);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="18">400</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">401</TD><TD> </TD></TR><TR><TD CLASS="l">402</TD><TD>    public void testUnusualKeyValuePairs() throws Exception</TD></TR><TR><TD CLASS="l">403</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">404</TD><TD>        register(&#34;W_MAIN&#34;, &#34;g1.sA&#34;);</TD></TR><TR><TD CLASS="l">405</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">406</TD><TD>        TradingSessionRegistration reg = home.findRegistration(&#34;W_MAIN&#34;, &#34;g1.sA&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">407</TD><TD>        KeyValueStruct[] keyVals = reg.getServerDetails();</TD></TR><TR CLASS="z"><TD CLASS="l">408</TD><TD>        assertEquals(&#34;Unexpected initial detail struct sequence.&#34;, 0, keyVals.length);</TD></TR><TR><TD CLASS="l">409</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">410</TD><TD>        KeyValueStruct[] newVals = new KeyValueStruct[] { new KeyValueStruct(&#34;\\a&#34;,&#34;ah;h\\\\a&#34;), new KeyValueStruct(&#34;b&#34;, &#34;b=bear=&#34;) };</TD></TR><TR CLASS="z"><TD CLASS="l">411</TD><TD>        reg.setServerDetails(newVals);</TD></TR><TR><TD CLASS="l">412</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">413</TD><TD>        keyVals = reg.getServerDetails();</TD></TR><TR CLASS="z"><TD CLASS="l">414</TD><TD>        assertEquals(&#34;Unexpected detail struct sequence after setting.&#34;, 2, keyVals.length);</TD></TR><TR><TD CLASS="l">415</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">416</TD><TD>        assertEquals(&#34;1st detail key should be '\\a'&#34;, newVals[0].key, keyVals[0].key);</TD></TR><TR CLASS="z"><TD CLASS="l">417</TD><TD>        assertEquals(&#34;2nd detail key should be 'b'&#34;,   newVals[1].key, keyVals[1].key);</TD></TR><TR CLASS="z"><TD CLASS="l">418</TD><TD>        assertEquals(&#34;1st detail value should be 'ah;h\\\\a'&#34;, newVals[0].value, keyVals[0].value);</TD></TR><TR CLASS="z"><TD CLASS="l">419</TD><TD>        assertEquals(&#34;2nd detail value should be 'b=bear='&#34;,   newVals[1].value,  keyVals[1].value);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="19">420</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">421</TD><TD> </TD></TR><TR><TD CLASS="l">422</TD><TD>    public void testUpdateHistoryDetailForClient() throws Exception</TD></TR><TR><TD CLASS="l">423</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">424</TD><TD>        final String svrName  = &#34;g1.sA&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">425</TD><TD>        final String sessName = &#34;g1.sA&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">426</TD><TD>        final short  evtState = 12;</TD></TR><TR CLASS="z"><TD CLASS="l">427</TD><TD>        register(sessName, svrName);</TD></TR><TR><TD CLASS="l">428</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">429</TD><TD>        TradingSessionEventHistoryDetailImpl detail = newDetail(evtState, svrName, sessName);</TD></TR><TR CLASS="z"><TD CLASS="l">430</TD><TD>        home.updateHistoryDetailForClient(sessName, svrName, detail);</TD></TR><TR><TD CLASS="l">431</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">432</TD><TD>        TradingSessionServerEventStateStruct[] eventStates = home.getClientEventStates(sessName);</TD></TR><TR CLASS="z"><TD CLASS="l">433</TD><TD>        assertEquals(&#34;Unexpected number of event states&#34;, 1, eventStates.length);</TD></TR><TR CLASS="z"><TD CLASS="l">434</TD><TD>        assertEquals(&#34;Unexpected event state&#34;, evtState, eventStates[0].eventState);</TD></TR><TR CLASS="z"><TD CLASS="l">435</TD><TD>        assertEquals(&#34;Unexpected server name&#34;, svrName, eventStates[0].serverName);</TD></TR><TR CLASS="z"><TD CLASS="l">436</TD><TD>        assertEquals(&#34;Unexpected session name&#34;, sessName, eventStates[0].sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="1a">437</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">438</TD><TD> </TD></TR><TR><TD CLASS="l">439</TD><TD>    public void testUpdateHistoryDetailForClientForAllSessions() throws Exception</TD></TR><TR><TD CLASS="l">440</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">441</TD><TD>        final String svrName  = &#34;g1.sA&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">442</TD><TD>        final short  evtState = 12;</TD></TR><TR CLASS="z"><TD CLASS="l">443</TD><TD>        register(null, svrName);</TD></TR><TR><TD CLASS="l">444</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">445</TD><TD>        TradingSessionEventHistoryDetailImpl detail = newDetail(evtState, svrName, SessionNameValues.ALL_SESSION_NAME);</TD></TR><TR CLASS="z"><TD CLASS="l">446</TD><TD>        home.updateHistoryDetailForClient(SessionNameValues.ALL_SESSION_NAME, svrName, detail);</TD></TR><TR><TD CLASS="l">447</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">448</TD><TD>        TradingSessionServerEventStateStruct[] eventStates = home.getClientEventStates(SessionNameValues.ALL_SESSION_NAME);</TD></TR><TR CLASS="z"><TD CLASS="l">449</TD><TD>        assertEquals(&#34;Unexpected number of event states&#34;, ALL_SESSIONS.length, eventStates.length);</TD></TR><TR CLASS="z"><TD CLASS="l">450</TD><TD>        for (int i=0; i &lt; ALL_SESSIONS.length; i++)</TD></TR><TR><TD CLASS="l">451</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">452</TD><TD>            assertEquals(&#34;Unexpected event state [&#34;+i+&#34;]&#34;, evtState, eventStates[i].eventState);</TD></TR><TR CLASS="z"><TD CLASS="l">453</TD><TD>            assertEquals(&#34;Unexpected server name [&#34;+i+&#34;]&#34;, svrName, eventStates[i].serverName);</TD></TR><TR><TD CLASS="l">454</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">455</TD><TD>    }</TD></TR><TR><TD CLASS="l">456</TD><TD> </TD></TR><TR><TD CLASS="l">457</TD><TD>    /**</TD></TR><TR><TD CLASS="l">458</TD><TD>     *  This test method is a bit more complicated than most, mostly because we are attempting to</TD></TR><TR><TD CLASS="l">459</TD><TD>     *  validate a complex return type (an array of structs that contains an array of structs) where</TD></TR><TR><TD CLASS="l">460</TD><TD>     *  the resulting arrays have no guaranteed ordering.</TD></TR><TR><TD CLASS="l">461</TD><TD>     */</TD></TR><TR><TD CLASS="l">462</TD><TD>    public void testGetRegisteredGroups() throws Exception</TD></TR><TR><TD CLASS="l"><A NAME="c">463</A></TD><TD>    {</TD></TR><TR><TD CLASS="l">464</TD><TD>        // Set up the registrations:</TD></TR><TR><TD CLASS="l">465</TD><TD>        // using values from ALL_SESSIONS =  &#34;W_MAIN&#34;,    &#34;ONE_MAIN&#34;,  &#34;OTHER_MAIN&#34;</TD></TR><TR><TD CLASS="l">466</TD><TD>        //</TD></TR><TR CLASS="z"><TD CLASS="l">467</TD><TD>        String[][] groups = new String[][] { {&#34;g0&#34;,&#34;g1&#34;}, {&#34;g0&#34;,&#34;g2&#34;}, {&#34;g0&#34;, &#34;g3&#34;} };</TD></TR><TR CLASS="z"><TD CLASS="l">468</TD><TD>        for (int i=0; i &lt; ALL_SESSIONS.length; i++)</TD></TR><TR CLASS="z"><TD CLASS="l">469</TD><TD>            register(ALL_SESSIONS[i], &#34;g&#34;+(i+1)+&#34;.blah&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">470</TD><TD>        register(null, &#34;g0.bletch&#34;);</TD></TR><TR><TD CLASS="l">471</TD><TD> </TD></TR><TR><TD CLASS="l">472</TD><TD>        // Init the lists of expected results, get actual result.</TD></TR><TR><TD CLASS="l">473</TD><TD>        //</TD></TR><TR CLASS="z"><TD CLASS="l">474</TD><TD>        List expectedSessions = asList(ALL_SESSIONS);</TD></TR><TR CLASS="z"><TD CLASS="l">475</TD><TD>        List expectedGroups = asList(groups);       // (has same indexing as expectedSessions: [0] is expected groups for sess [0])</TD></TR><TR CLASS="z"><TD CLASS="l">476</TD><TD>        TradingSessionGroupStruct[] result = home.getRegisteredGroups();</TD></TR><TR CLASS="z"><TD CLASS="l">477</TD><TD>        assertEquals(&#34;Unexpected registered group result size&#34;, 3, result.length);</TD></TR><TR><TD CLASS="l">478</TD><TD> </TD></TR><TR><TD CLASS="l">479</TD><TD>        // Validate results.  Make sure that everything that should be there is there, and no unexpected values exist.</TD></TR><TR><TD CLASS="l">480</TD><TD>        //</TD></TR><TR CLASS="z"><TD CLASS="l">481</TD><TD>        for (int i=0; i &lt; result.length; i++)</TD></TR><TR><TD CLASS="l">482</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">483</TD><TD>            String grpSession = result[i].session.sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">484</TD><TD>            int sessIdx = expectedSessions.indexOf(grpSession);</TD></TR><TR CLASS="z"><TD CLASS="l">485</TD><TD>            assertTrue(&#34;Group result sess '&#34; + grpSession + &#34;' not in original list!&#34;, sessIdx &gt;= 0);</TD></TR><TR CLASS="z"><TD CLASS="l">486</TD><TD>            List grpList = asList((String[])expectedGroups.get(sessIdx));</TD></TR><TR><TD CLASS="l">487</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">488</TD><TD>            for (int j=0; j &lt; result[i].groups.length; j++)</TD></TR><TR><TD CLASS="l">489</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">490</TD><TD>                String grp = result[i].groups[j].groupName;</TD></TR><TR CLASS="z"><TD CLASS="l">491</TD><TD>                assertTrue(&#34;Result '&#34; + grpSession + &#34;' has unexpected grp '&#34;+ grp + &#34;'!&#34;, grpList.contains(grp));</TD></TR><TR CLASS="z"><TD CLASS="l">492</TD><TD>                grpList.remove(grp);</TD></TR><TR><TD CLASS="l">493</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">494</TD><TD>            assertTrue(&#34;Group(s) &#34; + grpList + &#34; was/were not in the result set for sess '&#34; + grpSession + &#34;'!&#34;, grpList.isEmpty());</TD></TR><TR CLASS="z"><TD CLASS="l">495</TD><TD>            expectedSessions.remove(sessIdx);</TD></TR><TR CLASS="z"><TD CLASS="l">496</TD><TD>            expectedGroups.remove(sessIdx);</TD></TR><TR><TD CLASS="l">497</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">498</TD><TD>        assertTrue(&#34;Session(s) &#34; + expectedSessions + &#34; was/were not in the result set!&#34;, expectedSessions.isEmpty());</TD></TR><TR CLASS="z"><TD CLASS="l">499</TD><TD>    }</TD></TR><TR><TD CLASS="l">500</TD><TD> </TD></TR><TR><TD CLASS="l">501</TD><TD>    /**</TD></TR><TR><TD CLASS="l">502</TD><TD>     *  This test method is a bit more complicated than most, mostly because we are attempting to</TD></TR><TR><TD CLASS="l">503</TD><TD>     *  validate a complex return type (an array of structs that contains an array of structs) where</TD></TR><TR><TD CLASS="l">504</TD><TD>     *  the resulting arrays have no guaranteed ordering.</TD></TR><TR><TD CLASS="l">505</TD><TD>     */</TD></TR><TR><TD CLASS="l">506</TD><TD>    public void testGetRegisteredGroupsByType() throws Exception</TD></TR><TR><TD CLASS="l"><A NAME="d">507</A></TD><TD>    {</TD></TR><TR><TD CLASS="l">508</TD><TD>        // Set up the registrations:</TD></TR><TR><TD CLASS="l">509</TD><TD>        // using values from ALL_SESSIONS =  &#34;W_MAIN&#34;,    &#34;ONE_MAIN&#34;,  &#34;OTHER_MAIN&#34;</TD></TR><TR><TD CLASS="l">510</TD><TD>        //</TD></TR><TR CLASS="z"><TD CLASS="l">511</TD><TD>        String[][] groups = new String[][] { {&#34;g0&#34;,&#34;g1&#34;}, {&#34;g0&#34;,&#34;g2&#34;}, {&#34;g0&#34;, &#34;g3&#34;} };</TD></TR><TR CLASS="z"><TD CLASS="l">512</TD><TD>        for (int i=0; i &lt; ALL_SESSIONS.length; i++)</TD></TR><TR CLASS="z"><TD CLASS="l">513</TD><TD>            register(ALL_SESSIONS[i], &#34;g&#34;+(i+1)+&#34;.blah&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">514</TD><TD>        register(null, &#34;g0.bletch&#34;);</TD></TR><TR><TD CLASS="l">515</TD><TD> </TD></TR><TR><TD CLASS="l">516</TD><TD>        // Init the lists of expected results, get actual result.</TD></TR><TR><TD CLASS="l">517</TD><TD>        //</TD></TR><TR CLASS="z"><TD CLASS="l">518</TD><TD>        List expectedSessions = asList(ALL_SESSIONS);</TD></TR><TR CLASS="z"><TD CLASS="l">519</TD><TD>        List expectedGroups = asList(groups);       // (has same indexing as expectedSessions: [0] is expected groups for sess [0])</TD></TR><TR CLASS="z"><TD CLASS="l">520</TD><TD>        TradingSessionGroupStruct[] result = home.getRegisteredGroups();</TD></TR><TR CLASS="z"><TD CLASS="l">521</TD><TD>        assertEquals(&#34;Unexpected registered group result size&#34;, 3, result.length);</TD></TR><TR><TD CLASS="l">522</TD><TD> </TD></TR><TR><TD CLASS="l">523</TD><TD>        // Validate results.  Make sure that everything that should be there is there, and no unexpected values exist.</TD></TR><TR><TD CLASS="l">524</TD><TD>        //</TD></TR><TR CLASS="z"><TD CLASS="l">525</TD><TD>        for (int i=0; i &lt; result.length; i++)</TD></TR><TR><TD CLASS="l">526</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">527</TD><TD>            String grpSession = result[i].session.sessionName;</TD></TR><TR CLASS="z"><TD CLASS="l">528</TD><TD>            int sessIdx = expectedSessions.indexOf(grpSession);</TD></TR><TR CLASS="z"><TD CLASS="l">529</TD><TD>            assertTrue(&#34;Group result sess '&#34; + grpSession + &#34;' not in original list!&#34;, sessIdx &gt;= 0);</TD></TR><TR CLASS="z"><TD CLASS="l">530</TD><TD>            List grpList = asList((String[])expectedGroups.get(sessIdx));</TD></TR><TR><TD CLASS="l">531</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">532</TD><TD>            for (int j=0; j &lt; result[i].groups.length; j++)</TD></TR><TR><TD CLASS="l">533</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">534</TD><TD>                String grp = result[i].groups[j].groupName;</TD></TR><TR CLASS="z"><TD CLASS="l">535</TD><TD>                assertTrue(&#34;Result '&#34; + grpSession + &#34;' has unexpected grp '&#34;+ grp + &#34;'!&#34;, grpList.contains(grp));</TD></TR><TR CLASS="z"><TD CLASS="l">536</TD><TD>                grpList.remove(grp);</TD></TR><TR><TD CLASS="l">537</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">538</TD><TD>            assertTrue(&#34;Group(s) &#34; + grpList + &#34; was/were not in the result set for sess '&#34; + grpSession + &#34;'!&#34;, grpList.isEmpty());</TD></TR><TR CLASS="z"><TD CLASS="l">539</TD><TD>            expectedSessions.remove(sessIdx);</TD></TR><TR CLASS="z"><TD CLASS="l">540</TD><TD>            expectedGroups.remove(sessIdx);</TD></TR><TR><TD CLASS="l">541</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">542</TD><TD>        assertTrue(&#34;Session(s) &#34; + expectedSessions + &#34; was/were not in the result set!&#34;, expectedSessions.isEmpty());</TD></TR><TR CLASS="z"><TD CLASS="l">543</TD><TD>    }</TD></TR><TR><TD CLASS="l">544</TD><TD> </TD></TR><TR><TD CLASS="l">545</TD><TD>}</TD></TR></TABLE><P></P><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="nv">[<A HREF="../coverage.html">all classes</A>][<A HREF="1e.html">com.cboe.businessServices.tradingSessionService</A>]</TD></TR><TR><TD CLASS="tl"><A HREF="http://sourceforge.net/projects/emma">EMMA 2.0.5312</A> (C) Vladimir Roubtsov</TD></TR></TABLE></BODY></HTML>