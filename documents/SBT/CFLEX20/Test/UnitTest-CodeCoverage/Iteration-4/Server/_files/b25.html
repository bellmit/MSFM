<HTML><HEAD><META CONTENT="text/html; charset=UTF-8" HTTP-EQUIV="Content-Type"/><TITLE>EMMA Coverage Report</TITLE><STYLE TYPE="text/css"> TABLE,TD,TH {border-style:solid; border-color:black;} TD,TH {background:white;margin:0;line-height:100%;padding-left:0.5em;padding-right:0.5em;} TD {border-width:0 1px 0 0;} TH {border-width:1px 1px 1px 0;} TR TD.h {color:red;} TABLE {border-spacing:0; border-collapse:collapse;border-width:0 0 1px 1px;} P,H1,H2,H3,TH {font-family:verdana,arial,sans-serif;font-size:10pt;} TD {font-family:courier,monospace;font-size:10pt;} TABLE.hdft {border-spacing:0;border-collapse:collapse;border-style:none;} TABLE.hdft TH,TABLE.hdft TD {border-style:none;line-height:normal;} TABLE.hdft TH.tl,TABLE.hdft TD.tl {background:#6699CC;color:white;} TABLE.hdft TD.nv {background:#6633DD;color:white;} .nv A:link {color:white;} .nv A:visited {color:white;} .nv A:active {color:yellow;} TABLE.hdft A:link {color:white;} TABLE.hdft A:visited {color:white;} TABLE.hdft A:active {color:yellow;} .in {color:#356085;} TABLE.s TD {padding-left:0.25em;padding-right:0.25em;} TABLE.s TD.l {padding-left:0.25em;padding-right:0.25em;text-align:right;background:#F0F0F0;} TABLE.s TR.z TD {background:#FF9999;} TABLE.s TR.p TD {background:#FFFF88;} TABLE.s TR.c TD {background:#CCFFCC;} A:link {color:#0000EE;text-decoration:none;} A:visited {color:#0000EE;text-decoration:none;} A:hover {color:#0000EE;text-decoration:underline;} TABLE.cn {border-width:0 0 1px 0;} TABLE.s {border-width:1px 0 1px 1px;} TD.h {color:red;border-width:0 1px 0 0;} TD.f {border-width:0 1px 0 1px;} TD.hf {color:red;border-width:0 1px 0 1px;} TH.f {border-width:1px 1px 1px 1px;} TR.cis TD {background:#F0F0F0;} TR.cis TD {border-width:1px 1px 1px 0;} TR.cis TD.h {color:red;border-width:1px 1px 1px 0;} TR.cis TD.f {border-width:1px 1px 1px 1px;} TR.cis TD.hf {color:red;border-width:1px 1px 1px 1px;} TD.b {border-style:none;background:transparent;line-height:50%;}  TD.bt {border-width:1px 0 0 0;background:transparent;line-height:50%;} TR.o TD {background:#F0F0F0;}TABLE.it {border-style:none;}TABLE.it TD,TABLE.it TH {border-style:none;}</STYLE></HEAD><BODY><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="tl"><A HREF="http://www.eclemma.org/">EMMA</A> Coverage Report (generated Mon Aug 01 05:29:56 CDT 2011)</TH></TR><TR><TD CLASS="nv">[<A HREF="../Coverage.html">all classes</A>][<A HREF="109.html">com.cboe.proxy.businessServices</A>]</TD></TR></TABLE><H2>COVERAGE SUMMARY FOR SOURCE FILE [<SPAN CLASS="in">UserServiceCachedProxy.java</SPAN>]</H2><TABLE CELLSPACING="0" WIDTH="100%"><TR><TH>name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD>UserServiceCachedProxy.java</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/106)</TD><TD CLASS="h">0%   (0/2219)</TD><TD CLASS="h">0%   (0/473)</TD></TR></TABLE><H3>COVERAGE BREAKDOWN BY CLASS AND METHOD</H3><TABLE CLASS="cn" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="f">name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#0">UserServiceCachedProxy</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/102)</TD><TD CLASS="h">0%   (0/2152)</TD><TD CLASS="h">0%   (0/463)</TD></TR><TR><TD CLASS="f"><A HREF="#0">UserServiceCachedProxy (UserServiceOperations, UserTradingParameterServiceOpe...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/57)</TD><TD CLASS="h">0%   (0/12)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2">acceptFirmDeletion (FirmStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#3">acceptFirmUpdate (FirmStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4">acceptSessionProfileUserUpdate (SessionProfileUserStruct, SessionProfileUserD...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/54)</TD><TD CLASS="h">0%   (0/9)</TD></TR><TR><TD CLASS="f"><A HREF="#5">acceptUserDeletion (UserSummaryStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/28)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6">acceptUserFirmAffiliationDelete (UserFirmAffiliationStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/23)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#7">acceptUserFirmAffiliationUpdate (UserFirmAffiliationStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/23)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#8">acceptUserUpdate (UserStruct, UserDefinitionStruct, UserEnablementStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#9">addSessionProfileUser (SessionProfileUserDefinitionStruct): SessionProfileUse...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#a">addUser (UserDefinitionStruct): UserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/8)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#b">adminDropUser (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#c">adminDropUserMaintenanceCache (): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#d">adminGetDpmsForClass (String, String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#e">adminGetSystemPreferences (String, String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/44)</TD><TD CLASS="h">0%   (0/9)</TD></TR><TR><TD CLASS="f"><A HREF="#f">adminGetSystemPreferencesByPrefix (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#10">adminGetUserByKey (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/13)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#11">adminGetUsersByAssignedClass (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#12">adminGetUsersByRole (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#13">adminGetUsersByType (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#14">adminRemoveSystemPreferencesByPrefix (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#15">deleteUser (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#16">deleteUserFirmAffiliation (UserFirmAffiliationStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/9)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#17">getAffiliatedFirmForUser (ExchangeAcronymStruct): UserFirmAffiliationStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#18">getAllQuoteRiskProfiles (String): UserQuoteRiskManagementProfileStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="f"><A HREF="#19">getAllSessionProfileUsers (): SessionProfileUserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1a">getAllSystemPreferences (String): PreferenceStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#1b">getAllUserAffiliatedFirms (): UserFirmAffiliationStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1c">getAllUserEnablements (): UserEnablementStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#1d">getAllUserPreferences (String): PreferenceStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1e">getAllUsers (): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#1f">getAllUsersSummaries (): UserSummaryStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#20">getDefaultQuoteRiskProfile (String): QuoteRiskManagementProfileStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/21)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="f"><A HREF="#21">getDpmJointAccountForClass (String, int): UserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#22">getDpmParticipantsForClass (int): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#23">getDpmsForClass (String, int): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#24">getDpmsForJointAccount (String): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#25">getProfileOriginTypesForSession (String, char): char []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#26">getQuoteRiskManagementEnabledStatus (String): boolean</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/20)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#27">getQuoteRiskManagementProfileByClass (String, int): QuoteRiskManagementProfil...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/23)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#28">getSessionProfileDpmJointAccountForClass (String, int): SessionProfileUserDef...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#29">getSessionProfileDpmParticipantsForClass (int): SessionProfileUserDefinitionS...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2a">getSessionProfileDpmsForClass (String, int): SessionProfileUserDefinitionStru...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/22)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#2b">getSessionProfileDpmsForJointAccount (String): SessionProfileUserDefinitionSt...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2c">getSessionProfileUserByAcronym (ExchangeAcronymStruct): SessionProfileUserDef...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#2d">getSessionProfileUserByKey (int): SessionProfileUserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2e">getSessionProfileUserByUserId (String): SessionProfileUserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#2f">getSessionProfileUserInformation (String): SessionProfileUserStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/20)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#30">getSessionProfileUserInformationByAcronym (ExchangeAcronymStruct): SessionPro...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/20)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#31">getSessionProfileUserInformationByAcronymV2 (ExchangeAcronymStruct): SessionP...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#32">getSessionProfileUserInformationV2 (String): SessionProfileUserStructV2</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#33">getSessionProfileUsersByAcronym (ExchangeAcronymStruct): SessionProfileUserDe...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#34">getSessionProfileUsersByAssignedClass (int): SessionProfileUserDefinitionStru...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#35">getSessionProfileUsersByRole (char): SessionProfileUserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#36">getSessionProfileUsersByType (short): SessionProfileUserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#37">getSessionProfileUsersInformationByAcronymV2 (ExchangeAcronymStruct): Session...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#38">getSystemPreferences (): PreferenceStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#39">getSystemPreferencesByPrefix (String, String): PreferenceStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3a">getTradingClass (int): TradingClass</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/32)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#3b">getTradingClassHome (): TradingClassHome</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/13)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3c">getUserByAcronym (ExchangeAcronymStruct): UserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#3d">getUserByKey (int): UserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3e">getUserByUserId (String): UserDefinitionStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#3f">getUserEnablement (String): UserEnablementStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#40">getUserIdsByAcronym (ExchangeAcronymStruct): String []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#41">getUserInformation (String): UserStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#42">getUserInformationByAcronym (ExchangeAcronymStruct): UserStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#43">getUserInformationByAcronymV2 (ExchangeAcronymStruct): UserStructV2</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#44">getUserInformationV2 (String): UserStructV2</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#45">getUserPreferencesByPrefix (String, String): PreferenceStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/16)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#46">getUserProfiles (): UserAdminQuoteRiskManagementProfileStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/68)</TD><TD CLASS="h">0%   (0/12)</TD></TR><TR><TD CLASS="f"><A HREF="#47">getUserSummary (String): UserSummaryStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#48">getUsersAssignedToClass (int, short, String): SessionProfileUserDefinitionStr...</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/49)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="f"><A HREF="#49">getUsersByAssignedClass (int): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4a">getUsersByRole (char): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#4b">getUsersByType (short): UserDefinitionStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/5)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4c">getUsersForAffiliatedFirm (String): UserFirmAffiliationStruct []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#4d">initializeUserMaintenanceService (boolean, BOHome, boolean): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/254)</TD><TD CLASS="h">0%   (0/41)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4e">initializeUserTradingParameterServiceCache (boolean): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/49)</TD><TD CLASS="h">0%   (0/12)</TD></TR><TR><TD CLASS="f"><A HREF="#4f">printDpmParticipantCache (): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/21)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#50">printDpmParticipantsForClass (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/60)</TD><TD CLASS="h">0%   (0/9)</TD></TR><TR><TD CLASS="f"><A HREF="#51">printEDPMsForClass (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/97)</TD><TD CLASS="h">0%   (0/17)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#52">printQRMForUser (String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/109)</TD><TD CLASS="h">0%   (0/14)</TD></TR><TR><TD CLASS="f"><A HREF="#53">printUserQRMProfile (QuoteRiskManagementProfileStruct): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/47)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#54">removeAllQuoteRiskProfiles (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/12)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#55">removeQuoteRiskProfile (String, int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#56">removeSystemPreferencesByPrefix (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#57">removeSystemPreferencesForUser (String, String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#58">removeUser (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/24)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="f"><A HREF="#59">removeUserPreference (String, PreferenceStruct []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5a">removeUserPreferencesByPrefix (String, String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#5b">setAffiliatedFirmForUser (UserFirmAffiliationStruct): UserFirmAffiliationStruct</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5c">setQuoteRiskManagementEnabledStatus (String, boolean): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#5d">setQuoteRiskProfile (String, QuoteRiskManagementProfileStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/14)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5e">setSystemPreferences (PreferenceStruct []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/10)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#5f">setSystemPreferencesForUser (String, PreferenceStruct []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#60">setUserEnablement (UserEnablementStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/9)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#61">setUserPreferences (String, PreferenceStruct []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/11)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#62">stringifyStruct (Object, String): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/32)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR><TD CLASS="f"><A HREF="#63">stringifyThrowable (Throwable): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/28)</TD><TD CLASS="h">0%   (0/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#64">throwableToString (Throwable): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/43)</TD><TD CLASS="h">0%   (0/9)</TD></TR><TR><TD CLASS="f"><A HREF="#65">updateSessionProfileUser (SessionProfileUserDefinitionStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/13)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#66">updateUser (UserDefinitionStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/7)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD><TD CLASS="bt"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#67">UserServiceCachedProxy$1</A></TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/67)</TD><TD CLASS="h">0%   (0/11)</TD></TR><TR><TD CLASS="f"><A HREF="#67">UserServiceCachedProxy$1 (UserServiceCachedProxy): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#69">acceptNewGlobalStatusEnabled (String, boolean): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/23)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR><TD CLASS="f"><A HREF="#6a">acceptNewProfile (String, QuoteRiskManagementProfileStruct): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6b">acceptRemoveProfile (String, int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/3)</TD></TR></TABLE><P></P><TABLE CLASS="s" CELLSPACING="0" WIDTH="100%"><TR CLASS="z"><TD CLASS="l"><A NAME="67">1</A></TD><TD>package com.cboe.proxy.businessServices;</TD></TR><TR><TD CLASS="l">2</TD><TD>import com.cboe.interfaces.businessServices.UserTradingParameterService;</TD></TR><TR><TD CLASS="l">3</TD><TD>import com.cboe.interfaces.businessServices.UserService;</TD></TR><TR><TD CLASS="l">4</TD><TD>import com.cboe.interfaces.internalBusinessServices.UserMaintenanceService;</TD></TR><TR><TD CLASS="l">5</TD><TD>import com.cboe.interfaces.events.CacheUpdateConsumer;</TD></TR><TR><TD CLASS="l">6</TD><TD>import com.cboe.infrastructureServices.instrumentationService.*;</TD></TR><TR><TD CLASS="l">7</TD><TD>import com.cboe.infrastructureServices.eventService.*;</TD></TR><TR><TD CLASS="l">8</TD><TD>import com.cboe.infrastructureServices.foundationFramework.*;</TD></TR><TR><TD CLASS="l">9</TD><TD>import com.cboe.infrastructureServices.systemsManagementService.*;</TD></TR><TR><TD CLASS="l">10</TD><TD>import com.cboe.infrastructureServices.foundationFramework.utilities.*;</TD></TR><TR><TD CLASS="l">11</TD><TD>import com.cboe.infrastructureServices.foundationFramework.exceptionHandling.CBOELoggableException;</TD></TR><TR><TD CLASS="l">12</TD><TD>import com.cboe.exceptions.*;</TD></TR><TR><TD CLASS="l">13</TD><TD>import com.cboe.idl.businessServices.UserServiceOperations;</TD></TR><TR><TD CLASS="l">14</TD><TD>import com.cboe.idl.businessServices.UserTradingParameterServiceOperations;</TD></TR><TR><TD CLASS="l">15</TD><TD>import com.cboe.idl.cmiQuote.*;</TD></TR><TR><TD CLASS="l">16</TD><TD>import com.cboe.idl.cmiUser.*;</TD></TR><TR><TD CLASS="l">17</TD><TD>import com.cboe.idl.user.*;</TD></TR><TR><TD CLASS="l">18</TD><TD>import com.cboe.idl.firm.FirmStruct;</TD></TR><TR><TD CLASS="l">19</TD><TD>import com.cboe.idl.internalBusinessServices.UserMaintenanceServiceOperations;</TD></TR><TR><TD CLASS="l">20</TD><TD>import com.cboe.idl.quote.*;</TD></TR><TR><TD CLASS="l">21</TD><TD>import com.cboe.idl.user.UserDefinitionStruct;</TD></TR><TR><TD CLASS="l">22</TD><TD>import com.cboe.idl.user.UserEnablementStruct;</TD></TR><TR><TD CLASS="l">23</TD><TD>import com.cboe.interfaces.events.*;</TD></TR><TR><TD CLASS="l">24</TD><TD>import com.cboe.interfaces.domain.TradingClass;</TD></TR><TR><TD CLASS="l">25</TD><TD>import com.cboe.interfaces.domain.TradingClassHome;</TD></TR><TR><TD CLASS="l">26</TD><TD>import com.cboe.proxy.internalBusinessServices.UserFirmAffiliationCacheManager;</TD></TR><TR><TD CLASS="l">27</TD><TD>import com.cboe.proxy.internalBusinessServices.UserMaintenanceServiceCacheManager;</TD></TR><TR><TD CLASS="l">28</TD><TD>import com.cboe.proxy.internalBusinessServices.UserMaintenanceServiceProxy;</TD></TR><TR><TD CLASS="l">29</TD><TD>import com.cboe.server.events.EventHomes;</TD></TR><TR><TD CLASS="l">30</TD><TD>import com.cboe.util.ChannelKey;</TD></TR><TR><TD CLASS="l">31</TD><TD>import com.cboe.util.ChannelType;</TD></TR><TR><TD CLASS="l">32</TD><TD>import com.cboe.util.ExceptionBuilder;</TD></TR><TR><TD CLASS="l">33</TD><TD>import java.util.*;</TD></TR><TR><TD CLASS="l">34</TD><TD>import com.cboe.idl.user.SessionProfileUserDefinitionStruct;</TD></TR><TR><TD CLASS="l">35</TD><TD>import com.cboe.idl.user.UserSummaryStruct;</TD></TR><TR><TD CLASS="l">36</TD><TD>import com.cboe.idl.cmiUser.SessionProfileUserStruct;</TD></TR><TR><TD CLASS="l">37</TD><TD>import com.cboe.idl.constants.MarketMakerClassAssignmentTypes;</TD></TR><TR><TD CLASS="l">38</TD><TD>import com.cboe.idl.cmiConstants.SessionNameValues;</TD></TR><TR><TD CLASS="l">39</TD><TD>import com.cboe.domain.util.SessionProfileHelper;</TD></TR><TR><TD CLASS="l">40</TD><TD>import com.cboe.domain.util.TradingSessionNameHelper;</TD></TR><TR><TD CLASS="l">41</TD><TD>import com.cboe.idl.cmiErrorCodes.AuthenticationCodes;</TD></TR><TR><TD CLASS="l">42</TD><TD> </TD></TR><TR><TD CLASS="l">43</TD><TD> </TD></TR><TR><TD CLASS="l">44</TD><TD>/**</TD></TR><TR><TD CLASS="l">45</TD><TD> * A cached proxy implementation.  This class is exposed via two homes, UserServiceHomeCachedProxyImpl and</TD></TR><TR><TD CLASS="l">46</TD><TD> * UserTradingParameterServiceHomeCachedProxyImpl, although only UTPS-specific information is cached.</TD></TR><TR><TD CLASS="l">47</TD><TD> * UserMaintenanceService information is now cached as well.  Since changes to this</TD></TR><TR><TD CLASS="l">48</TD><TD> * information is not published, an admin request &#34;dropUserMaintenanceCache&#34; has been added so that the</TD></TR><TR><TD CLASS="l">49</TD><TD> * proxy can be re-synched.</TD></TR><TR><TD CLASS="l">50</TD><TD> *</TD></TR><TR><TD CLASS="l">51</TD><TD> * @author Steven Sinclair</TD></TR><TR><TD CLASS="l">52</TD><TD> */</TD></TR><TR><TD CLASS="l">53</TD><TD>public class UserServiceCachedProxy</TD></TR><TR><TD CLASS="l">54</TD><TD>        extends BObject</TD></TR><TR><TD CLASS="l">55</TD><TD>        implements UserTradingParameterService, UserService, UserMaintenanceService, CacheUpdateConsumer</TD></TR><TR><TD CLASS="l">56</TD><TD>{</TD></TR><TR><TD CLASS="l">57</TD><TD>        // Proxies</TD></TR><TR><TD CLASS="l">58</TD><TD>        //</TD></TR><TR><TD CLASS="l">59</TD><TD>        private UserTradingParameterServiceProxy userTradingParameterServiceProxy;</TD></TR><TR><TD CLASS="l">60</TD><TD>        private UserMaintenanceServiceProxy userMaintenanceServiceProxy;</TD></TR><TR><TD CLASS="l">61</TD><TD>        private UserServiceProxy userServiceProxy;</TD></TR><TR><TD CLASS="l">62</TD><TD>        // Event channels for updating the cache.</TD></TR><TR><TD CLASS="l">63</TD><TD>        //</TD></TR><TR><TD CLASS="l">64</TD><TD>        protected QuoteRiskManagementProfileConsumer quoteRiskProfileEventChannel;</TD></TR><TR><TD CLASS="l">65</TD><TD> </TD></TR><TR><TD CLASS="l">66</TD><TD>        // Cache managers.</TD></TR><TR><TD CLASS="l">67</TD><TD>        //</TD></TR><TR><TD CLASS="l">68</TD><TD>        protected UserTradingParameterServiceCacheManager utpsCacheManager;</TD></TR><TR><TD CLASS="l">69</TD><TD>        protected UserMaintenanceServiceCacheManager maintenanceCacheManager;</TD></TR><TR><TD CLASS="l">70</TD><TD>        protected UserServiceCacheManager userServiceCacheManager;</TD></TR><TR><TD CLASS="l">71</TD><TD>        protected UserPreferenceCacheManager userPreferenceCacheManager;</TD></TR><TR><TD CLASS="l">72</TD><TD>        protected UserPreferenceCacheManager systemPreferenceCacheManager;</TD></TR><TR><TD CLASS="l">73</TD><TD>        protected UserPreferenceCacheManager globalPreferenceCacheManager;</TD></TR><TR><TD CLASS="l">74</TD><TD>        protected UserFirmAffiliationCacheManager userFirmAffiliationCacheManager;</TD></TR><TR><TD CLASS="l">75</TD><TD>    protected static TradingClassHome theTradingClassHome;</TD></TR><TR><TD CLASS="l"><A NAME="0">76</A></TD><TD> </TD></TR><TR><TD CLASS="l">77</TD><TD>        /**</TD></TR><TR><TD CLASS="l">78</TD><TD>         * Create a new instance of ths interceptor for the provided BObject.</TD></TR><TR><TD CLASS="l">79</TD><TD>         */</TD></TR><TR CLASS="z"><TD CLASS="l">80</TD><TD>        public UserServiceCachedProxy(</TD></TR><TR><TD CLASS="l">81</TD><TD>                UserServiceOperations userServiceDelegate,</TD></TR><TR><TD CLASS="l">82</TD><TD>                UserTradingParameterServiceOperations userTradingParameterServiceDelegate,</TD></TR><TR><TD CLASS="l">83</TD><TD>                UserMaintenanceServiceOperations userMaintenanceServiceDelegate)</TD></TR><TR><TD CLASS="l">84</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">85</TD><TD>                userTradingParameterServiceProxy = new UserTradingParameterServiceProxy(userTradingParameterServiceDelegate);</TD></TR><TR CLASS="z"><TD CLASS="l">86</TD><TD>                userMaintenanceServiceProxy = new UserMaintenanceServiceProxy(userMaintenanceServiceDelegate);</TD></TR><TR CLASS="z"><TD CLASS="l">87</TD><TD>                userServiceProxy = new UserServiceProxy(userServiceDelegate);</TD></TR><TR><TD CLASS="l">88</TD><TD> </TD></TR><TR><TD CLASS="l">89</TD><TD>                // create the cache.</TD></TR><TR><TD CLASS="l">90</TD><TD>                //</TD></TR><TR CLASS="z"><TD CLASS="l">91</TD><TD>                utpsCacheManager             = new UserTradingParameterServiceCacheManager();</TD></TR><TR CLASS="z"><TD CLASS="l">92</TD><TD>                maintenanceCacheManager      = new UserMaintenanceServiceCacheManager();</TD></TR><TR CLASS="z"><TD CLASS="l">93</TD><TD>                userServiceCacheManager      = new UserServiceCacheManager();</TD></TR><TR CLASS="z"><TD CLASS="l">94</TD><TD>                userPreferenceCacheManager   = new UserPreferenceCacheManager();</TD></TR><TR CLASS="z"><TD CLASS="l">95</TD><TD>                systemPreferenceCacheManager = new UserPreferenceCacheManager();</TD></TR><TR CLASS="z"><TD CLASS="l">96</TD><TD>                globalPreferenceCacheManager = new UserPreferenceCacheManager(1);</TD></TR><TR CLASS="z"><TD CLASS="l">97</TD><TD>                userFirmAffiliationCacheManager = new UserFirmAffiliationCacheManager();</TD></TR><TR CLASS="z"><TD CLASS="l">98</TD><TD>        }</TD></TR><TR><TD CLASS="l">99</TD><TD> </TD></TR><TR><TD CLASS="l">100</TD><TD>        //</TD></TR><TR><TD CLASS="l">101</TD><TD>        // **************************************************</TD></TR><TR><TD CLASS="l">102</TD><TD>        //</TD></TR><TR><TD CLASS="l">103</TD><TD>        //  user trading parameter service methods</TD></TR><TR><TD CLASS="l">104</TD><TD>        //</TD></TR><TR><TD CLASS="l">105</TD><TD> </TD></TR><TR><TD CLASS="l">106</TD><TD>        /**</TD></TR><TR><TD CLASS="l">107</TD><TD>         *  Return the profile for a specific class.  Throws NotFoundException rather than return the default profile</TD></TR><TR><TD CLASS="l">108</TD><TD>         *  if a profile is not found for the given class.</TD></TR><TR><TD CLASS="l">109</TD><TD>         */</TD></TR><TR><TD CLASS="l">110</TD><TD>        public QuoteRiskManagementProfileStruct getQuoteRiskManagementProfileByClass(String userId, int classKey)</TD></TR><TR><TD CLASS="l"><A NAME="27">111</A></TD><TD>                throws NotFoundException, SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">112</TD><TD>        {</TD></TR><TR><TD CLASS="l">113</TD><TD>                try</TD></TR><TR><TD CLASS="l">114</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">115</TD><TD>                        return utpsCacheManager.getQuoteRiskStruct(userId, classKey);</TD></TR><TR><TD CLASS="l">116</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">117</TD><TD>                catch (org.omg.CORBA.UserException ex)  // second chance: examine the real proxy.</TD></TR><TR><TD CLASS="l">118</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">119</TD><TD>                        Log.debug(this, &#34;Second chance: get QRMP by class using regular proxy&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">120</TD><TD>                        QuoteRiskManagementProfileStruct struct = userTradingParameterServiceProxy.getQuoteRiskManagementProfileByClass(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">121</TD><TD>                        utpsCacheManager.acceptNewProfile(userId, struct);</TD></TR><TR CLASS="z"><TD CLASS="l">122</TD><TD>                        return struct;</TD></TR><TR><TD CLASS="l">123</TD><TD>                }</TD></TR><TR><TD CLASS="l">124</TD><TD>        }</TD></TR><TR><TD CLASS="l">125</TD><TD> </TD></TR><TR><TD CLASS="l">126</TD><TD>        /**</TD></TR><TR><TD CLASS="l">127</TD><TD>         */</TD></TR><TR><TD CLASS="l">128</TD><TD>        public UserQuoteRiskManagementProfileStruct getAllQuoteRiskProfiles(String userId)</TD></TR><TR><TD CLASS="l">129</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">130</TD><TD>        {</TD></TR><TR><TD CLASS="l">131</TD><TD>                // access the cache: it builds all that it can, throws SystemException if no default is found or NotFoundException if nothing is found.</TD></TR><TR><TD CLASS="l"><A NAME="18">132</A></TD><TD>                //</TD></TR><TR><TD CLASS="l">133</TD><TD>                UserQuoteRiskManagementProfileStruct userStruct;</TD></TR><TR><TD CLASS="l">134</TD><TD>                try</TD></TR><TR><TD CLASS="l">135</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">136</TD><TD>                        userStruct = utpsCacheManager.getStructForUser(userId);</TD></TR><TR><TD CLASS="l">137</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">138</TD><TD>                catch (org.omg.CORBA.UserException ex) // second chance: check with the real service</TD></TR><TR><TD CLASS="l">139</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">140</TD><TD>                        Log.debug(this, &#34;Second chance: get QRMP by class using regular proxy&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">141</TD><TD>                        userStruct = userTradingParameterServiceProxy.getAllQuoteRiskProfiles(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">142</TD><TD>                        utpsCacheManager.acceptNewUser(userId, userStruct);</TD></TR><TR><TD CLASS="l">143</TD><TD>                }</TD></TR><TR><TD CLASS="l">144</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">145</TD><TD>                return userStruct;</TD></TR><TR><TD CLASS="l">146</TD><TD>        }</TD></TR><TR><TD CLASS="l">147</TD><TD> </TD></TR><TR><TD CLASS="l">148</TD><TD>        /**</TD></TR><TR><TD CLASS="l">149</TD><TD>         */</TD></TR><TR><TD CLASS="l">150</TD><TD>        public QuoteRiskManagementProfileStruct getDefaultQuoteRiskProfile(String userId)</TD></TR><TR><TD CLASS="l">151</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">152</TD><TD>        {</TD></TR><TR><TD CLASS="l"><A NAME="20">153</A></TD><TD>                // Throws NotFound (no user) or SystemException (no default)</TD></TR><TR><TD CLASS="l">154</TD><TD>                //</TD></TR><TR><TD CLASS="l">155</TD><TD>                try</TD></TR><TR><TD CLASS="l">156</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">157</TD><TD>                        return utpsCacheManager.getDefaultQuoteRiskStruct(userId);</TD></TR><TR><TD CLASS="l">158</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">159</TD><TD>                catch (org.omg.CORBA.UserException ex)</TD></TR><TR><TD CLASS="l">160</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">161</TD><TD>                        Log.debug(this, &#34;Second chance: get default QRMP from regular proxy&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">162</TD><TD>                        QuoteRiskManagementProfileStruct struct = userTradingParameterServiceProxy.getDefaultQuoteRiskProfile(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">163</TD><TD>                        utpsCacheManager.acceptNewProfile(userId, struct);</TD></TR><TR CLASS="z"><TD CLASS="l">164</TD><TD>                        return struct;</TD></TR><TR><TD CLASS="l">165</TD><TD>                }</TD></TR><TR><TD CLASS="l">166</TD><TD>        }</TD></TR><TR><TD CLASS="l">167</TD><TD> </TD></TR><TR><TD CLASS="l">168</TD><TD>        /**</TD></TR><TR><TD CLASS="l">169</TD><TD>         */</TD></TR><TR><TD CLASS="l">170</TD><TD>        public boolean getQuoteRiskManagementEnabledStatus(String userId)</TD></TR><TR><TD CLASS="l"><A NAME="26">171</A></TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">172</TD><TD>        {</TD></TR><TR><TD CLASS="l">173</TD><TD>                try</TD></TR><TR><TD CLASS="l">174</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">175</TD><TD>                        UserQuoteRiskManagementProfileStruct userStruct = getAllQuoteRiskProfiles(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">176</TD><TD>                        return userStruct.globalQuoteRiskManagementEnabled;</TD></TR><TR><TD CLASS="l">177</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">178</TD><TD>                catch (NotFoundException ex)</TD></TR><TR><TD CLASS="l">179</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">180</TD><TD>                        throw ExceptionBuilder.dataValidationException(&#34;User id &#34; + userId + &#34; not found.&#34;, 0);</TD></TR><TR><TD CLASS="l">181</TD><TD>                }</TD></TR><TR><TD CLASS="l">182</TD><TD>        }</TD></TR><TR><TD CLASS="l">183</TD><TD> </TD></TR><TR><TD CLASS="l">184</TD><TD>        /**</TD></TR><TR><TD CLASS="l">185</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="46">186</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">187</TD><TD>        public UserAdminQuoteRiskManagementProfileStruct[] getUserProfiles()</TD></TR><TR><TD CLASS="l">188</TD><TD>                throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">189</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">190</TD><TD>                ArrayList classKeys = utpsCacheManager.getAllUserIds();</TD></TR><TR><TD CLASS="l">191</TD><TD>                UserAdminQuoteRiskManagementProfileStruct[] profiles;</TD></TR><TR CLASS="z"><TD CLASS="l">192</TD><TD>                profiles = new UserAdminQuoteRiskManagementProfileStruct[classKeys.size()];</TD></TR><TR CLASS="z"><TD CLASS="l">193</TD><TD>                for (int i=0; i &lt; classKeys.size(); i++)</TD></TR><TR><TD CLASS="l">194</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">195</TD><TD>                        String id = classKeys.get(i).toString();</TD></TR><TR><TD CLASS="l">196</TD><TD>                        try</TD></TR><TR><TD CLASS="l">197</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">198</TD><TD>                                profiles[i] = new UserAdminQuoteRiskManagementProfileStruct();</TD></TR><TR CLASS="z"><TD CLASS="l">199</TD><TD>                                profiles[i].userId = id;</TD></TR><TR CLASS="z"><TD CLASS="l">200</TD><TD>                                profiles[i].userQuoteRiskProfile = getAllQuoteRiskProfiles(id);</TD></TR><TR><TD CLASS="l">201</TD><TD>                        }</TD></TR><TR CLASS="z"><TD CLASS="l">202</TD><TD>                        catch (NotFoundException ex)</TD></TR><TR><TD CLASS="l">203</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">204</TD><TD>                                throw ExceptionBuilder.systemException(&#34;Struct not found for user &#34; + id + &#34;, even though the userid was given by the same sevice. (NotFoundException)&#34;, 0);</TD></TR><TR><TD CLASS="l">205</TD><TD>                        }</TD></TR><TR CLASS="z"><TD CLASS="l">206</TD><TD>                        catch (DataValidationException ex)</TD></TR><TR><TD CLASS="l">207</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">208</TD><TD>                                throw ExceptionBuilder.systemException(&#34;Struct not found for user &#34; + id + &#34;, even though the userid was given by the same sevice. (DataValidationException)&#34;, 0);</TD></TR><TR><TD CLASS="l">209</TD><TD>                        }</TD></TR><TR><TD CLASS="l">210</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">211</TD><TD>                return profiles;</TD></TR><TR><TD CLASS="l">212</TD><TD>        }</TD></TR><TR><TD CLASS="l">213</TD><TD> </TD></TR><TR><TD CLASS="l">214</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="54">215</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">216</TD><TD>        public void removeAllQuoteRiskProfiles(String userId)</TD></TR><TR><TD CLASS="l">217</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">218</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">219</TD><TD>                userTradingParameterServiceProxy.removeAllQuoteRiskProfiles(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">220</TD><TD>                Log.debug(this, &#34;Manually calling cache's method for removal of all non-default profiles&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">221</TD><TD>                utpsCacheManager.removeNonDefaultProfiles(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">222</TD><TD>        }</TD></TR><TR><TD CLASS="l">223</TD><TD> </TD></TR><TR><TD CLASS="l">224</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="55">225</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">226</TD><TD>        public void removeQuoteRiskProfile(String userId, int classKey)</TD></TR><TR><TD CLASS="l">227</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">228</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">229</TD><TD>                userTradingParameterServiceProxy.removeQuoteRiskProfile(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">230</TD><TD>                Log.debug(this, &#34;Manually calling cache's method for quote risk profile removal.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">231</TD><TD>                utpsCacheManager.acceptRemoveProfile(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">232</TD><TD>        }</TD></TR><TR><TD CLASS="l">233</TD><TD> </TD></TR><TR><TD CLASS="l">234</TD><TD>        /**</TD></TR><TR><TD CLASS="l">235</TD><TD>         *  Set the enabled status for all profiles.</TD></TR><TR><TD CLASS="l">236</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="5c">237</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">238</TD><TD>        public void setQuoteRiskManagementEnabledStatus(String userId, boolean enabledStatus)</TD></TR><TR><TD CLASS="l">239</TD><TD>                throws SystemException, CommunicationException, DataValidationException, AuthorizationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">240</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">241</TD><TD>                userTradingParameterServiceProxy.setQuoteRiskManagementEnabledStatus(userId, enabledStatus);</TD></TR><TR CLASS="z"><TD CLASS="l">242</TD><TD>                Log.debug(this, &#34;Manually calling cache's method for global quote risk enabled status.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">243</TD><TD>                utpsCacheManager.acceptNewGlobalStatusEnabled(userId, enabledStatus);</TD></TR><TR CLASS="z"><TD CLASS="l">244</TD><TD>        }</TD></TR><TR><TD CLASS="l">245</TD><TD> </TD></TR><TR><TD CLASS="l">246</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="5d">247</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">248</TD><TD>        public void setQuoteRiskProfile(String userId, QuoteRiskManagementProfileStruct profileStruct)</TD></TR><TR><TD CLASS="l">249</TD><TD>                throws SystemException, CommunicationException, DataValidationException, AuthorizationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">250</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">251</TD><TD>                userTradingParameterServiceProxy.setQuoteRiskProfile(userId, profileStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">252</TD><TD>                Log.debug(this, &#34;Manually call cache's accept new profile method.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">253</TD><TD>                utpsCacheManager.acceptNewProfile(userId, profileStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">254</TD><TD>        }</TD></TR><TR><TD CLASS="l">255</TD><TD> </TD></TR><TR><TD CLASS="l">256</TD><TD>        /**</TD></TR><TR><TD CLASS="l">257</TD><TD>         */</TD></TR><TR><TD CLASS="l"><A NAME="4e">258</A></TD><TD>        public void initializeUserTradingParameterServiceCache(boolean initCache)</TD></TR><TR><TD CLASS="l">259</TD><TD>                throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">260</TD><TD>        {</TD></TR><TR><TD CLASS="l">261</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">262</TD><TD>        if (initCache)</TD></TR><TR><TD CLASS="l">263</TD><TD>        {</TD></TR><TR><TD CLASS="l">264</TD><TD>            // To initialize we pass the cache manager an array containing *all* of the profile information.</TD></TR><TR><TD CLASS="l">265</TD><TD>            //</TD></TR><TR CLASS="z"><TD CLASS="l">266</TD><TD>            Log.debug(this, &#34;Initialize the UTPS cache: preload the cache&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">267</TD><TD>            UserAdminQuoteRiskManagementProfileStruct[] allUserStructs = userTradingParameterServiceProxy.getUserProfiles();</TD></TR><TR><TD CLASS="l">268</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">269</TD><TD>            utpsCacheManager.initialize(allUserStructs);</TD></TR><TR><TD CLASS="l">270</TD><TD>        }</TD></TR><TR><TD CLASS="l">271</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">272</TD><TD>        Log.debug(this, &#34;Initialize the UTPS cache: connect to the event channel&#34;);</TD></TR><TR><TD CLASS="l">273</TD><TD> </TD></TR><TR><TD CLASS="l">274</TD><TD>                // Create the event channel here.  It would be preferable to use a home pattern to manage the event channels,</TD></TR><TR><TD CLASS="l">275</TD><TD>                // but this will have to do for now.</TD></TR><TR><TD CLASS="l">276</TD><TD>                //</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6a">277</A></TD><TD>                quoteRiskProfileEventChannel = new QuoteRiskManagementProfileConsumer()</TD></TR><TR><TD CLASS="l">278</TD><TD>                        {</TD></TR><TR><TD CLASS="l">279</TD><TD>                                public void acceptNewProfile(String userId, QuoteRiskManagementProfileStruct quoteStruct)</TD></TR><TR><TD CLASS="l">280</TD><TD>                                {</TD></TR><TR CLASS="z"><TD CLASS="l">281</TD><TD>                                        Log.debug(UserServiceCachedProxy.this, &#34;Received event channel notification: acceptNewProfile(&#34; + userId + &#34;,&lt;struct&gt;)&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">282</TD><TD>                                        utpsCacheManager.acceptNewProfile(userId, quoteStruct);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6b">283</A></TD><TD>                                }</TD></TR><TR><TD CLASS="l">284</TD><TD> </TD></TR><TR><TD CLASS="l">285</TD><TD>                                public void acceptRemoveProfile(String userId, int classKey)</TD></TR><TR><TD CLASS="l">286</TD><TD>                                {</TD></TR><TR CLASS="z"><TD CLASS="l">287</TD><TD>                                        Log.debug(UserServiceCachedProxy.this, &#34;Received event channel notification: acceptRemoveProfile(&#34; + userId + &#34;,&lt;struct&gt;)&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">288</TD><TD>                                        utpsCacheManager.acceptRemoveProfile(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="69">289</A></TD><TD>                                }</TD></TR><TR><TD CLASS="l">290</TD><TD> </TD></TR><TR><TD CLASS="l">291</TD><TD>                                public void acceptNewGlobalStatusEnabled(String userId, boolean status)</TD></TR><TR><TD CLASS="l">292</TD><TD>                                {</TD></TR><TR CLASS="z"><TD CLASS="l">293</TD><TD>                                        Log.debug(UserServiceCachedProxy.this, &#34;Received event channel notification: acceptNewGlobalStatusEnabled(&#34; + userId + &#34;,&#34; + status + &#34;)&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">294</TD><TD>                                        utpsCacheManager.acceptNewGlobalStatusEnabled(userId, status);</TD></TR><TR CLASS="z"><TD CLASS="l">295</TD><TD>                                }</TD></TR><TR><TD CLASS="l">296</TD><TD>                        };</TD></TR><TR><TD CLASS="l">297</TD><TD> </TD></TR><TR><TD CLASS="l">298</TD><TD>                try</TD></TR><TR><TD CLASS="l">299</TD><TD>                {</TD></TR><TR><TD CLASS="l">300</TD><TD>                        QuoteRiskManagementProfileConsumerHome eventHome;</TD></TR><TR CLASS="z"><TD CLASS="l">301</TD><TD>                        eventHome = EventHomes.getQuoteRiskManagementProfileConsumerHome();</TD></TR><TR CLASS="z"><TD CLASS="l">302</TD><TD>                        eventHome.addConsumer(quoteRiskProfileEventChannel, new ChannelKey(ChannelType.ALL_QUOTE_RISK_MANAGEMENT_PROFILE, &#34;&#34;));</TD></TR><TR><TD CLASS="l">303</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">304</TD><TD>                catch (Exception ex)</TD></TR><TR><TD CLASS="l">305</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">306</TD><TD>                        throw ExceptionBuilder.systemException(&#34;Exception registering with event channel: &#34; + ex, 0);</TD></TR><TR><TD CLASS="l">307</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">308</TD><TD>        Log.debug(this, &#34;Initialize the UTPS cache: connected to the event channel&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">309</TD><TD>        }</TD></TR><TR><TD CLASS="l">310</TD><TD> </TD></TR><TR><TD CLASS="l">311</TD><TD> </TD></TR><TR><TD CLASS="l">312</TD><TD>        //</TD></TR><TR><TD CLASS="l">313</TD><TD>        // **************************************************</TD></TR><TR><TD CLASS="l">314</TD><TD>        //</TD></TR><TR><TD CLASS="l">315</TD><TD>        // PreferenceStruct methods (UserService)</TD></TR><TR><TD CLASS="l">316</TD><TD>        //</TD></TR><TR><TD CLASS="l">317</TD><TD> </TD></TR><TR><TD CLASS="l">318</TD><TD> </TD></TR><TR><TD CLASS="l">319</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="1a">320</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">321</TD><TD>        public PreferenceStruct [] getAllSystemPreferences(String userName)</TD></TR><TR><TD CLASS="l">322</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">323</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">324</TD><TD>                PreferenceStruct[] prefs = systemPreferenceCacheManager.getPreferences(userName);</TD></TR><TR CLASS="z"><TD CLASS="l">325</TD><TD>                if (prefs == null)</TD></TR><TR><TD CLASS="l">326</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">327</TD><TD>                        prefs = userServiceProxy.getAllSystemPreferences(userName);</TD></TR><TR CLASS="z"><TD CLASS="l">328</TD><TD>                        systemPreferenceCacheManager.setPreferences(userName, prefs);</TD></TR><TR><TD CLASS="l">329</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">330</TD><TD>                return prefs;</TD></TR><TR><TD CLASS="l">331</TD><TD>        }</TD></TR><TR><TD CLASS="l">332</TD><TD> </TD></TR><TR><TD CLASS="l">333</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="1d">334</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">335</TD><TD>        public PreferenceStruct [] getAllUserPreferences(String userName)</TD></TR><TR><TD CLASS="l">336</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">337</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">338</TD><TD>                PreferenceStruct[] prefs = userPreferenceCacheManager.getPreferences(userName);</TD></TR><TR CLASS="z"><TD CLASS="l">339</TD><TD>                if (prefs == null)</TD></TR><TR><TD CLASS="l">340</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">341</TD><TD>                        prefs = userServiceProxy.getAllUserPreferences(userName);</TD></TR><TR CLASS="z"><TD CLASS="l">342</TD><TD>                        userPreferenceCacheManager.setPreferences(userName, prefs);</TD></TR><TR><TD CLASS="l">343</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">344</TD><TD>                return prefs;</TD></TR><TR><TD CLASS="l">345</TD><TD>        }</TD></TR><TR><TD CLASS="l">346</TD><TD> </TD></TR><TR><TD CLASS="l">347</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="39">348</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">349</TD><TD>        public PreferenceStruct [] getSystemPreferencesByPrefix(String userName, String prefix)</TD></TR><TR><TD CLASS="l">350</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">351</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">352</TD><TD>                PreferenceStruct[] prefs = systemPreferenceCacheManager.getPreferencesByPrefix(userName, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">353</TD><TD>                if (prefs == null)</TD></TR><TR><TD CLASS="l">354</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">355</TD><TD>                        prefs = userServiceProxy.getSystemPreferencesByPrefix(userName, prefix);</TD></TR><TR><TD CLASS="l">356</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">357</TD><TD>                return prefs;</TD></TR><TR><TD CLASS="l">358</TD><TD>        }</TD></TR><TR><TD CLASS="l">359</TD><TD> </TD></TR><TR><TD CLASS="l">360</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="45">361</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">362</TD><TD>        public PreferenceStruct [] getUserPreferencesByPrefix(String userName, String prefix)</TD></TR><TR><TD CLASS="l">363</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">364</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">365</TD><TD>                PreferenceStruct[] prefs = userPreferenceCacheManager.getPreferencesByPrefix(userName, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">366</TD><TD>                if (prefs == null)</TD></TR><TR><TD CLASS="l">367</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">368</TD><TD>                        prefs = userServiceProxy.getUserPreferencesByPrefix(userName, prefix);</TD></TR><TR><TD CLASS="l">369</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">370</TD><TD>                return prefs;</TD></TR><TR><TD CLASS="l">371</TD><TD>        }</TD></TR><TR><TD CLASS="l">372</TD><TD> </TD></TR><TR><TD CLASS="l">373</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="59">374</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">375</TD><TD>        public void removeUserPreference(String userName, PreferenceStruct [] prefs)</TD></TR><TR><TD CLASS="l">376</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">377</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">378</TD><TD>                userServiceProxy.removeUserPreference(userName, prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">379</TD><TD>                userPreferenceCacheManager.removePreferences(userName);</TD></TR><TR CLASS="z"><TD CLASS="l">380</TD><TD>        }</TD></TR><TR><TD CLASS="l">381</TD><TD> </TD></TR><TR><TD CLASS="l">382</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="5a">383</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">384</TD><TD>        public void removeUserPreferencesByPrefix(String userName, String prefix)</TD></TR><TR><TD CLASS="l">385</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">386</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">387</TD><TD>                userServiceProxy.removeUserPreferencesByPrefix(userName, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">388</TD><TD>                userPreferenceCacheManager.removePreferencesByPrefix(userName, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">389</TD><TD>        }</TD></TR><TR><TD CLASS="l">390</TD><TD> </TD></TR><TR><TD CLASS="l">391</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="61">392</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">393</TD><TD>        public void setUserPreferences(String userName, PreferenceStruct [] prefs)</TD></TR><TR><TD CLASS="l">394</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">395</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">396</TD><TD>                userServiceProxy.setUserPreferences(userName, prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">397</TD><TD>                userPreferenceCacheManager.setPreferences(userName, prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">398</TD><TD>        }</TD></TR><TR><TD CLASS="l">399</TD><TD> </TD></TR><TR><TD CLASS="l">400</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="41">401</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">402</TD><TD>        public UserStruct getUserInformation(String userId)</TD></TR><TR><TD CLASS="l">403</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">404</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">405</TD><TD>                UserStruct userInformation  = SessionProfileHelper.toUserStruct(getSessionProfileUserInformation(userId));</TD></TR><TR CLASS="z"><TD CLASS="l">406</TD><TD>                return userInformation;</TD></TR><TR><TD CLASS="l">407</TD><TD>        }</TD></TR><TR><TD CLASS="l">408</TD><TD> </TD></TR><TR><TD CLASS="l">409</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="44">410</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">411</TD><TD>        public UserStructV2 getUserInformationV2(String userName)</TD></TR><TR><TD CLASS="l">412</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">413</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">414</TD><TD>        UserStructV2 userInformation = SessionProfileHelper.toUserStructV2(getSessionProfileUserInformationV2(userName));</TD></TR><TR CLASS="z"><TD CLASS="l">415</TD><TD>        return userInformation;</TD></TR><TR><TD CLASS="l">416</TD><TD>        }</TD></TR><TR><TD CLASS="l">417</TD><TD> </TD></TR><TR><TD CLASS="l">418</TD><TD>    /**</TD></TR><TR><TD CLASS="l">419</TD><TD>     * Gets the user given the user's system name.</TD></TR><TR><TD CLASS="l">420</TD><TD>     * @param userId user's system name</TD></TR><TR><TD CLASS="l">421</TD><TD>     * @return user information</TD></TR><TR><TD CLASS="l">422</TD><TD>     * @exception NotFoundException if user is not found</TD></TR><TR><TD CLASS="l"><A NAME="32">423</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">424</TD><TD>    public SessionProfileUserStructV2 getSessionProfileUserInformationV2(String userId)</TD></TR><TR><TD CLASS="l">425</TD><TD>            throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">426</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">427</TD><TD>        SessionProfileUserStructV2 userInformation = userServiceCacheManager.getUserInformation(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">428</TD><TD>        if (userInformation == null)</TD></TR><TR><TD CLASS="l">429</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">430</TD><TD>            userInformation = userServiceProxy.getSessionProfileUserInformationV2(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">431</TD><TD>            userServiceCacheManager.setUserInformation(userId, userInformation);</TD></TR><TR><TD CLASS="l">432</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">433</TD><TD>        return userInformation;</TD></TR><TR><TD CLASS="l">434</TD><TD>    }</TD></TR><TR><TD CLASS="l">435</TD><TD> </TD></TR><TR><TD CLASS="l">436</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="42">437</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">438</TD><TD>        public UserStruct getUserInformationByAcronym(com.cboe.idl.cmiUser.ExchangeAcronymStruct acronym)</TD></TR><TR><TD CLASS="l">439</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">440</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">441</TD><TD>        UserStruct userInformation = SessionProfileHelper.toUserStruct(getSessionProfileUserInformationByAcronym(acronym));</TD></TR><TR CLASS="z"><TD CLASS="l">442</TD><TD>        return userInformation;</TD></TR><TR><TD CLASS="l">443</TD><TD>        }</TD></TR><TR><TD CLASS="l">444</TD><TD> </TD></TR><TR><TD CLASS="l">445</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="43">446</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">447</TD><TD>        public UserStructV2 getUserInformationByAcronymV2(com.cboe.idl.cmiUser.ExchangeAcronymStruct acronym)</TD></TR><TR><TD CLASS="l">448</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">449</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">450</TD><TD>        UserStructV2 userInformation = SessionProfileHelper.toUserStructV2(getSessionProfileUserInformationByAcronymV2(acronym));</TD></TR><TR CLASS="z"><TD CLASS="l">451</TD><TD>        return userInformation;</TD></TR><TR><TD CLASS="l">452</TD><TD>        }</TD></TR><TR><TD CLASS="l">453</TD><TD> </TD></TR><TR><TD CLASS="l">454</TD><TD>        //</TD></TR><TR><TD CLASS="l">455</TD><TD>        // **************************************************</TD></TR><TR><TD CLASS="l">456</TD><TD>        //</TD></TR><TR><TD CLASS="l">457</TD><TD>        // UserMaintenanceService methods</TD></TR><TR><TD CLASS="l">458</TD><TD>        //</TD></TR><TR><TD CLASS="l">459</TD><TD> </TD></TR><TR><TD CLASS="l">460</TD><TD>        /**</TD></TR><TR><TD CLASS="l">461</TD><TD>         *  Admin request to clear the user maintenance service cache,</TD></TR><TR><TD CLASS="l">462</TD><TD>     *  Need to be careful to run this admin request,</TD></TR><TR><TD CLASS="l">463</TD><TD>     *  because the lazy maintaned cache for DPM participants</TD></TR><TR><TD CLASS="l"><A NAME="b">464</A></TD><TD>     *  will not get the user related cache till the user is updated.</TD></TR><TR><TD CLASS="l">465</TD><TD>         */</TD></TR><TR><TD CLASS="l">466</TD><TD>         public String adminDropUser(String userId)</TD></TR><TR><TD CLASS="l">467</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">468</TD><TD>        maintenanceCacheManager.removeUserFromParticipantsForClassMap(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">469</TD><TD>        maintenanceCacheManager.removeUser(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">470</TD><TD>                return &#34;removed &#34; + userId + &#34; from cache.&#34;;</TD></TR><TR><TD CLASS="l">471</TD><TD>        }</TD></TR><TR><TD CLASS="l">472</TD><TD> </TD></TR><TR><TD CLASS="l">473</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="c">474</A></TD><TD>         *  Admin request to clear the user maintenance service cache,</TD></TR><TR><TD CLASS="l">475</TD><TD>         */</TD></TR><TR><TD CLASS="l">476</TD><TD>         public String adminDropUserMaintenanceCache()</TD></TR><TR><TD CLASS="l">477</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">478</TD><TD>                maintenanceCacheManager.clearCache();</TD></TR><TR CLASS="z"><TD CLASS="l">479</TD><TD>                return &#34;cleared user maintenance cache.&#34;;</TD></TR><TR><TD CLASS="l">480</TD><TD>        }</TD></TR><TR><TD CLASS="l">481</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="e">482</A></TD><TD>        public String adminGetSystemPreferences(String user, String prefix)</TD></TR><TR><TD CLASS="l">483</TD><TD>        {</TD></TR><TR><TD CLASS="l">484</TD><TD>                try</TD></TR><TR><TD CLASS="l">485</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">486</TD><TD>                        if (user.equalsIgnoreCase(&#34;none&#34;) &amp;&amp; prefix.equalsIgnoreCase(&#34;none&#34;))</TD></TR><TR><TD CLASS="l">487</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">488</TD><TD>                                return stringifyStruct(getSystemPreferences(), &#34;systemPreferences&#34;);</TD></TR><TR><TD CLASS="l">489</TD><TD>                        }</TD></TR><TR CLASS="z"><TD CLASS="l">490</TD><TD>                        else if (user.equalsIgnoreCase(&#34;none&#34;))</TD></TR><TR><TD CLASS="l">491</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">492</TD><TD>                                return &#34;Can't get non-user system prefs by prefix.  No such method. Try again passing \&#34;none\&#34; for prefix (2nd param).&#34;;</TD></TR><TR><TD CLASS="l">493</TD><TD>                        }</TD></TR><TR CLASS="z"><TD CLASS="l">494</TD><TD>                        else if (prefix.equalsIgnoreCase(&#34;none&#34;))</TD></TR><TR><TD CLASS="l">495</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">496</TD><TD>                                return stringifyStruct(getAllSystemPreferences(user), &#34;getAllSystemPreferences&#34;);</TD></TR><TR><TD CLASS="l">497</TD><TD>                        }</TD></TR><TR><TD CLASS="l">498</TD><TD>                        else</TD></TR><TR><TD CLASS="l">499</TD><TD>                        {</TD></TR><TR CLASS="z"><TD CLASS="l">500</TD><TD>                                return stringifyStruct(getSystemPreferencesByPrefix(user, prefix), &#34;getAllSystemPreferences&#34;);</TD></TR><TR><TD CLASS="l">501</TD><TD>                        }</TD></TR><TR><TD CLASS="l">502</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">503</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">504</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">505</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">506</TD><TD>                }</TD></TR><TR><TD CLASS="l">507</TD><TD>        }</TD></TR><TR><TD CLASS="l">508</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="14">509</A></TD><TD>        public String adminRemoveSystemPreferencesByPrefix(String prefix)</TD></TR><TR><TD CLASS="l">510</TD><TD>        {</TD></TR><TR><TD CLASS="l">511</TD><TD>                try</TD></TR><TR><TD CLASS="l">512</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">513</TD><TD>                        removeSystemPreferencesByPrefix(prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">514</TD><TD>                        return &#34;remove preferences by prefix \&#34;&#34; + prefix +&#34;\&#34;.&#34;;</TD></TR><TR><TD CLASS="l">515</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">516</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">517</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">518</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">519</TD><TD>                }</TD></TR><TR><TD CLASS="l">520</TD><TD>        }</TD></TR><TR><TD CLASS="l">521</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="f">522</A></TD><TD>        public String adminGetSystemPreferencesByPrefix(String prefix)</TD></TR><TR><TD CLASS="l">523</TD><TD>        {</TD></TR><TR><TD CLASS="l">524</TD><TD>                try</TD></TR><TR><TD CLASS="l">525</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">526</TD><TD>                        removeSystemPreferencesByPrefix(prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">527</TD><TD>                        return &#34;remove preferences by prefix \&#34;&#34; + prefix +&#34;\&#34;.&#34;;</TD></TR><TR><TD CLASS="l">528</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">529</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">530</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">531</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">532</TD><TD>                }</TD></TR><TR><TD CLASS="l">533</TD><TD>        }</TD></TR><TR><TD CLASS="l">534</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="10">535</A></TD><TD>        public String adminGetUserByKey(String keyStr)</TD></TR><TR><TD CLASS="l">536</TD><TD>        {</TD></TR><TR><TD CLASS="l">537</TD><TD>                try</TD></TR><TR><TD CLASS="l">538</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">539</TD><TD>                        return stringifyStruct(getSessionProfileUserByKey(Integer.parseInt(keyStr)), &#34;userDef&#34;);</TD></TR><TR><TD CLASS="l">540</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">541</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">542</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">543</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">544</TD><TD>                }</TD></TR><TR><TD CLASS="l">545</TD><TD>        }</TD></TR><TR><TD CLASS="l">546</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="12">547</A></TD><TD>        public String adminGetUsersByRole(String roleCharStr)</TD></TR><TR><TD CLASS="l">548</TD><TD>        {</TD></TR><TR><TD CLASS="l">549</TD><TD>                try</TD></TR><TR><TD CLASS="l">550</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">551</TD><TD>                        return stringifyStruct(getSessionProfileUsersByRole(roleCharStr.charAt(0)), &#34;SessionProfileUsersByRole&#34; + roleCharStr.charAt(0));</TD></TR><TR><TD CLASS="l">552</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">553</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">554</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">555</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">556</TD><TD>                }</TD></TR><TR><TD CLASS="l">557</TD><TD>        }</TD></TR><TR><TD CLASS="l">558</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="13">559</A></TD><TD>        public String adminGetUsersByType(String userTypeStr)</TD></TR><TR><TD CLASS="l">560</TD><TD>        {</TD></TR><TR><TD CLASS="l">561</TD><TD>                try</TD></TR><TR><TD CLASS="l">562</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">563</TD><TD>                        return stringifyStruct(getSessionProfileUsersByType(Short.parseShort(userTypeStr)), &#34;usersByType&#34; + userTypeStr);</TD></TR><TR><TD CLASS="l">564</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">565</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">566</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">567</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">568</TD><TD>                }</TD></TR><TR><TD CLASS="l">569</TD><TD>        }</TD></TR><TR><TD CLASS="l">570</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="d">571</A></TD><TD>        public String adminGetDpmsForClass(String userId, String classKeyStr)</TD></TR><TR><TD CLASS="l">572</TD><TD>        {</TD></TR><TR><TD CLASS="l">573</TD><TD>                try</TD></TR><TR><TD CLASS="l">574</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">575</TD><TD>                        return stringifyStruct(getSessionProfileDpmsForClass(userId, Integer.parseInt(classKeyStr)), &#34;SessionProfileDpmsForClass&#34;);</TD></TR><TR><TD CLASS="l">576</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">577</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">578</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">579</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">580</TD><TD>                }</TD></TR><TR><TD CLASS="l">581</TD><TD>        }</TD></TR><TR><TD CLASS="l">582</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="11">583</A></TD><TD>        public String adminGetUsersByAssignedClass(String classKeyStr)</TD></TR><TR><TD CLASS="l">584</TD><TD>        {</TD></TR><TR><TD CLASS="l">585</TD><TD>                try</TD></TR><TR><TD CLASS="l">586</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">587</TD><TD>                        return stringifyStruct(getSessionProfileUsersByAssignedClass(Integer.parseInt(classKeyStr)), &#34;usersByAssignedClass&#34; + classKeyStr);</TD></TR><TR><TD CLASS="l">588</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">589</TD><TD>                catch (Throwable ex)</TD></TR><TR><TD CLASS="l">590</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">591</TD><TD>                        return stringifyThrowable(ex);</TD></TR><TR><TD CLASS="l">592</TD><TD>                }</TD></TR><TR><TD CLASS="l">593</TD><TD>        }</TD></TR><TR><TD CLASS="l">594</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="62">595</A></TD><TD>        protected String stringifyStruct(Object struct, String prefix)</TD></TR><TR><TD CLASS="l">596</TD><TD>        {</TD></TR><TR><TD CLASS="l">597</TD><TD>                try</TD></TR><TR><TD CLASS="l">598</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">599</TD><TD>                        java.io.StringWriter stringWriter = new java.io.StringWriter();</TD></TR><TR CLASS="z"><TD CLASS="l">600</TD><TD>                        com.cboe.domain.util.ReflectiveStructBuilder.printStruct(struct, prefix, stringWriter);</TD></TR><TR CLASS="z"><TD CLASS="l">601</TD><TD>                        stringWriter.flush();</TD></TR><TR CLASS="z"><TD CLASS="l">602</TD><TD>                        return stringWriter.toString();</TD></TR><TR><TD CLASS="l">603</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">604</TD><TD>                catch (java.io.IOException ex)</TD></TR><TR><TD CLASS="l">605</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">606</TD><TD>                        Log.exception(this, &#34;IOException writing struct to string.  Unexpected. &#34; + ex, ex );</TD></TR><TR CLASS="z"><TD CLASS="l">607</TD><TD>            return &#34;IOException writing struct to string.  Unexpected. &#34; + ex;</TD></TR><TR><TD CLASS="l">608</TD><TD>                }</TD></TR><TR><TD CLASS="l"><A NAME="63">609</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">610</TD><TD> </TD></TR><TR><TD CLASS="l">611</TD><TD>        protected String stringifyThrowable(Throwable ex)</TD></TR><TR><TD CLASS="l">612</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">613</TD><TD>                java.io.StringWriter stringWriter = new java.io.StringWriter();</TD></TR><TR CLASS="z"><TD CLASS="l">614</TD><TD>                java.io.PrintWriter  printWriter  = new java.io.PrintWriter(stringWriter);</TD></TR><TR CLASS="z"><TD CLASS="l">615</TD><TD>                stringWriter.write(&#34;Caught exception: &#34; + ex);</TD></TR><TR CLASS="z"><TD CLASS="l">616</TD><TD>                ex.printStackTrace(printWriter);</TD></TR><TR CLASS="z"><TD CLASS="l">617</TD><TD>                printWriter.flush();</TD></TR><TR CLASS="z"><TD CLASS="l">618</TD><TD>                stringWriter.flush();</TD></TR><TR CLASS="z"><TD CLASS="l">619</TD><TD>                return stringWriter.toString();</TD></TR><TR><TD CLASS="l">620</TD><TD>        }</TD></TR><TR><TD CLASS="l">621</TD><TD> </TD></TR><TR><TD CLASS="l">622</TD><TD>        /**</TD></TR><TR><TD CLASS="l">623</TD><TD>         *  Setup the user maintenance callbacks and init the cache.</TD></TR><TR><TD CLASS="l"><A NAME="4d">624</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">625</TD><TD>        public void initializeUserMaintenanceService(boolean initCache, BOHome userMaintenanceHome, boolean noDropParticipantsCache)</TD></TR><TR><TD CLASS="l">626</TD><TD>            throws SystemException, CommunicationException, AuthorizationException, CBOELoggableException</TD></TR><TR><TD CLASS="l">627</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">628</TD><TD>            Log.information(&#34;Registering user maintenance admin callbacks&#34;);</TD></TR><TR><TD CLASS="l">629</TD><TD> </TD></TR><TR><TD CLASS="l">630</TD><TD>            // use Home to register command callbacks</TD></TR><TR CLASS="z"><TD CLASS="l">631</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;dropUserMaintenanceCache&#34;, &#34;adminDropUserMaintenanceCache&#34;, &#34;drop all cached info re. UserMaintenanceService&#34;, new String[0], new String[0]);</TD></TR><TR><TD CLASS="l">632</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">633</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;dropUser&#34;, &#34;adminDropUser&#34;, &#34;drop all cached info for user w.r.t. UserMaintenanceService&#34;, new String[] { &#34;java.lang.String&#34; }, new String[] { &#34;userId&#34; });</TD></TR><TR><TD CLASS="l">634</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">635</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;getSystemPreferences&#34;, &#34;adminGetSystemPreferences&#34;, &#34;get system preferences&#34;, new String[] { &#34;java.lang.String&#34;, &#34;java.lang.String&#34; }, new String[] { &#34;userId (or \&#34;none\&#34;)&#34;, &#34;prefix ( or \&#34;none\&#34;)&#34; });</TD></TR><TR><TD CLASS="l">636</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">637</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;removeSystemPreference&#34;, &#34;adminRemoveSystemPreferencesByPrefix&#34;, &#34;remove system preferences by prefix&#34;, new String[] { &#34;java.lang.String&#34; }, new String[] { &#34;prefix&#34; });</TD></TR><TR><TD CLASS="l">638</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">639</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;getUserByKey&#34;, &#34;adminGetUserByKey&#34;, &#34;get a user by user key&#34;, new String[] { &#34;java.lang.String&#34; }, new String[] { &#34;userKey&#34; });</TD></TR><TR><TD CLASS="l">640</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">641</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;getUsersByRole&#34;, &#34;adminGetUsersByRole&#34;, &#34;get all users having the given role char&#34;, new String[] { &#34;java.lang.String&#34; }, new String[] { &#34;roleChar&#34; });</TD></TR><TR><TD CLASS="l">642</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">643</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;getUsersByAssignedClass&#34;, &#34;adminGetUsersByAssignedClass&#34;, &#34;get all users assigned the given class key&#34;, new String[] { &#34;java.lang.String&#34; }, new String[] { &#34;classKey&#34; });</TD></TR><TR><TD CLASS="l">644</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">645</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;getUsersByType&#34;, &#34;adminGetUsersByType&#34;, &#34;get all users having the given type&#34;, new String[] { &#34;java.lang.String&#34; }, new String[] { &#34;user type (int)&#34; });</TD></TR><TR><TD CLASS="l">646</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">647</TD><TD>            userMaintenanceHome.registerCommand(this, &#34;getDpmsForClass&#34;, &#34;adminGetDpmsForClass&#34;, &#34;get all DPM users for a given class&#34;, new String[] { &#34;java.lang.String&#34; , &#34;java.lang.String&#34; }, new String[] { &#34;userId&#34;, &#34;classKey&#34; });</TD></TR><TR><TD CLASS="l">648</TD><TD> </TD></TR><TR><TD CLASS="l">649</TD><TD> </TD></TR><TR><TD CLASS="l">650</TD><TD>            // Register command to start the service</TD></TR><TR CLASS="z"><TD CLASS="l">651</TD><TD>            userMaintenanceHome.registerCommand( this,</TD></TR><TR CLASS="z"><TD CLASS="l">652</TD><TD>                                         &#34;printDpmParticipantsForClass&#34;, // External name</TD></TR><TR CLASS="z"><TD CLASS="l">653</TD><TD>                                         &#34;printDpmParticipantsForClass&#34;, // Method name</TD></TR><TR CLASS="z"><TD CLASS="l">654</TD><TD>                                         &#34;Print DPMs for a class&#34;, // Method description</TD></TR><TR CLASS="z"><TD CLASS="l">655</TD><TD>                                         new String[] { &#34;java.lang.String&#34; },</TD></TR><TR CLASS="z"><TD CLASS="l">656</TD><TD>                                         new String[] { &#34;classKey&#34; }</TD></TR><TR><TD CLASS="l">657</TD><TD>                                         );</TD></TR><TR><TD CLASS="l">658</TD><TD> </TD></TR><TR><TD CLASS="l">659</TD><TD>            // Register command to start the service</TD></TR><TR CLASS="z"><TD CLASS="l">660</TD><TD>            userMaintenanceHome.registerCommand( this,</TD></TR><TR CLASS="z"><TD CLASS="l">661</TD><TD>                                         &#34;printEDPMsForClass&#34;, // External name</TD></TR><TR CLASS="z"><TD CLASS="l">662</TD><TD>                                         &#34;printEDPMsForClass&#34;, // Method name</TD></TR><TR CLASS="z"><TD CLASS="l">663</TD><TD>                                         &#34;Print EDPMs for a class&#34;, // Method description</TD></TR><TR CLASS="z"><TD CLASS="l">664</TD><TD>                                         new String[] { &#34;java.lang.String&#34; },</TD></TR><TR CLASS="z"><TD CLASS="l">665</TD><TD>                                         new String[] { &#34;classKey&#34; }</TD></TR><TR><TD CLASS="l">666</TD><TD>                                         );</TD></TR><TR><TD CLASS="l">667</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">668</TD><TD>            userMaintenanceHome.registerCommand(this,</TD></TR><TR CLASS="z"><TD CLASS="l">669</TD><TD>                            &#34;printQRMForUser&#34;,</TD></TR><TR CLASS="z"><TD CLASS="l">670</TD><TD>                            &#34;printQRMForUser&#34;,</TD></TR><TR CLASS="z"><TD CLASS="l">671</TD><TD>                            &#34;Print QRM profiles for user&#34;,</TD></TR><TR CLASS="z"><TD CLASS="l">672</TD><TD>                            new String[] {String.class.getName()},</TD></TR><TR CLASS="z"><TD CLASS="l">673</TD><TD>                            new String[] {&#34;userId&#34;}</TD></TR><TR><TD CLASS="l">674</TD><TD>                            );</TD></TR><TR CLASS="z"><TD CLASS="l">675</TD><TD>            userMaintenanceHome.registerCommand(this,</TD></TR><TR CLASS="z"><TD CLASS="l">676</TD><TD>                    &#34;printDpmParticipantCache&#34;,</TD></TR><TR CLASS="z"><TD CLASS="l">677</TD><TD>                    &#34;printDpmParticipantCache&#34;,</TD></TR><TR CLASS="z"><TD CLASS="l">678</TD><TD>                    &#34;Print all local Cache of Dpm Participants&#34;,</TD></TR><TR CLASS="z"><TD CLASS="l">679</TD><TD>                    new String[0],</TD></TR><TR CLASS="z"><TD CLASS="l">680</TD><TD>                    new String[0]</TD></TR><TR><TD CLASS="l">681</TD><TD>            );</TD></TR><TR><TD CLASS="l">682</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">683</TD><TD>            if (initCache)</TD></TR><TR><TD CLASS="l">684</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">685</TD><TD>                Log.information(&#34;Initializing user maintenance cache&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">686</TD><TD>                getAllSessionProfileUsers(); // this will fill in the user maintenance service cache.</TD></TR><TR CLASS="z"><TD CLASS="l">687</TD><TD>                Log.information(&#34;Initializing user affiliated firm&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">688</TD><TD>                getAllUserAffiliatedFirms();</TD></TR><TR><TD CLASS="l">689</TD><TD> </TD></TR><TR><TD CLASS="l">690</TD><TD>            }</TD></TR><TR><TD CLASS="l">691</TD><TD>            // initialize the noDropParticipantsCacheFlag for   userMaintenanceCacheManager</TD></TR><TR CLASS="z"><TD CLASS="l">692</TD><TD>            maintenanceCacheManager.setDropParticipantsCacheFlag(noDropParticipantsCache);</TD></TR><TR CLASS="z"><TD CLASS="l">693</TD><TD>        }</TD></TR><TR><TD CLASS="l">694</TD><TD> </TD></TR><TR><TD CLASS="l">695</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="a">696</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">697</TD><TD>        public com.cboe.idl.user.UserDefinitionStruct addUser(com.cboe.idl.user.UserDefinitionStruct user)</TD></TR><TR><TD CLASS="l">698</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException, AlreadyExistsException</TD></TR><TR><TD CLASS="l">699</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">700</TD><TD>        SessionProfileUserDefinitionStruct sessionProfileUser = SessionProfileHelper.toSessionProfileUserDefinitionStruct(user);</TD></TR><TR CLASS="z"><TD CLASS="l">701</TD><TD>        return SessionProfileHelper.toUserDefinitionStruct(addSessionProfileUser(sessionProfileUser));</TD></TR><TR><TD CLASS="l"><A NAME="16">702</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">703</TD><TD> </TD></TR><TR><TD CLASS="l">704</TD><TD>    public void deleteUserFirmAffiliation(UserFirmAffiliationStruct userFirmAffiliationStruct) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">705</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">706</TD><TD>        userMaintenanceServiceProxy.deleteUserFirmAffiliation(userFirmAffiliationStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">707</TD><TD>                userFirmAffiliationCacheManager.deleteAffiliation(userFirmAffiliationStruct);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="17">708</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">709</TD><TD> </TD></TR><TR><TD CLASS="l">710</TD><TD>    public UserFirmAffiliationStruct getAffiliatedFirmForUser(ExchangeAcronymStruct exchangeAcronymStruct) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">711</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">712</TD><TD>        UserFirmAffiliationStruct userFirmAffiliationStruct = userFirmAffiliationCacheManager.getAffiliatedFirmForUser(exchangeAcronymStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">713</TD><TD>                if (userFirmAffiliationStruct == null)</TD></TR><TR><TD CLASS="l">714</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">715</TD><TD>                        userFirmAffiliationStruct = userMaintenanceServiceProxy.getAffiliatedFirmForUser(exchangeAcronymStruct);</TD></TR><TR><TD CLASS="l">716</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">717</TD><TD>                return userFirmAffiliationStruct;</TD></TR><TR><TD CLASS="l">718</TD><TD>    }</TD></TR><TR><TD CLASS="l">719</TD><TD> </TD></TR><TR><TD CLASS="l">720</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="1e">721</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">722</TD><TD>        public UserDefinitionStruct[] getAllUsers()</TD></TR><TR><TD CLASS="l">723</TD><TD>                throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">724</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">725</TD><TD>        return SessionProfileHelper.toUserDefinitionStructs(getAllSessionProfileUsers());</TD></TR><TR><TD CLASS="l">726</TD><TD>        }</TD></TR><TR><TD CLASS="l">727</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="38">728</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">729</TD><TD>        public PreferenceStruct [] getSystemPreferences()</TD></TR><TR><TD CLASS="l">730</TD><TD>                throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">731</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">732</TD><TD>                PreferenceStruct[] prefs = globalPreferenceCacheManager.getPreferences(&#34;&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">733</TD><TD>                if (prefs == null)</TD></TR><TR><TD CLASS="l">734</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">735</TD><TD>                        prefs = userMaintenanceServiceProxy.getSystemPreferences();</TD></TR><TR CLASS="z"><TD CLASS="l">736</TD><TD>                        globalPreferenceCacheManager.setPreferences(&#34;&#34;, prefs);</TD></TR><TR><TD CLASS="l">737</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">738</TD><TD>                return prefs;</TD></TR><TR><TD CLASS="l">739</TD><TD>        }</TD></TR><TR><TD CLASS="l">740</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="3d">741</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">742</TD><TD>        public UserDefinitionStruct getUserByKey(int userKey)</TD></TR><TR><TD CLASS="l">743</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">744</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">745</TD><TD>        return SessionProfileHelper.toUserDefinitionStruct(getSessionProfileUserByKey(userKey));</TD></TR><TR><TD CLASS="l">746</TD><TD>        }</TD></TR><TR><TD CLASS="l">747</TD><TD> </TD></TR><TR><TD CLASS="l">748</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="3e">749</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">750</TD><TD>        public UserDefinitionStruct getUserByUserId(String userId)</TD></TR><TR><TD CLASS="l">751</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">752</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">753</TD><TD>        return SessionProfileHelper.toUserDefinitionStruct(getSessionProfileUserByUserId(userId));</TD></TR><TR><TD CLASS="l">754</TD><TD>        }</TD></TR><TR><TD CLASS="l">755</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="49">756</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">757</TD><TD>        public UserDefinitionStruct [] getUsersByAssignedClass(int classKey)</TD></TR><TR><TD CLASS="l">758</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">759</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">760</TD><TD>                return SessionProfileHelper.toUserDefinitionStructs(getSessionProfileUsersByAssignedClass(classKey));</TD></TR><TR><TD CLASS="l">761</TD><TD>        }</TD></TR><TR><TD CLASS="l">762</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="4a">763</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">764</TD><TD>        public UserDefinitionStruct [] getUsersByRole(char roleChar)</TD></TR><TR><TD CLASS="l">765</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">766</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">767</TD><TD>        return SessionProfileHelper.toUserDefinitionStructs(getSessionProfileUsersByRole(roleChar));</TD></TR><TR><TD CLASS="l">768</TD><TD>        }</TD></TR><TR><TD CLASS="l">769</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="56">770</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">771</TD><TD>        public void removeSystemPreferencesByPrefix(String prefix)</TD></TR><TR><TD CLASS="l">772</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">773</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">774</TD><TD>                userMaintenanceServiceProxy.removeSystemPreferencesByPrefix(prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">775</TD><TD>                globalPreferenceCacheManager.removePreferencesByPrefix(&#34;&#34;, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">776</TD><TD>        }</TD></TR><TR><TD CLASS="l">777</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="57">778</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">779</TD><TD>        public void removeSystemPreferencesForUser(String user, String prefix)</TD></TR><TR><TD CLASS="l">780</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">781</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">782</TD><TD>                userMaintenanceServiceProxy.removeSystemPreferencesForUser(user, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5b">783</A></TD><TD>                systemPreferenceCacheManager.removePreferencesByPrefix(user, prefix);</TD></TR><TR CLASS="z"><TD CLASS="l">784</TD><TD>        }</TD></TR><TR><TD CLASS="l">785</TD><TD> </TD></TR><TR><TD CLASS="l">786</TD><TD>    public UserFirmAffiliationStruct setAffiliatedFirmForUser(UserFirmAffiliationStruct userFirmAffiliationStruct) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException {</TD></TR><TR CLASS="z"><TD CLASS="l">787</TD><TD>                UserFirmAffiliationStruct struct = userMaintenanceServiceProxy.setAffiliatedFirmForUser(userFirmAffiliationStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">788</TD><TD>        userFirmAffiliationCacheManager.updateAffiliation(struct);</TD></TR><TR CLASS="z"><TD CLASS="l">789</TD><TD>        return struct;</TD></TR><TR><TD CLASS="l">790</TD><TD>    }</TD></TR><TR><TD CLASS="l">791</TD><TD> </TD></TR><TR><TD CLASS="l">792</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="5e">793</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">794</TD><TD>        public void setSystemPreferences(PreferenceStruct [] prefs)</TD></TR><TR><TD CLASS="l">795</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">796</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">797</TD><TD>                userMaintenanceServiceProxy.setSystemPreferences(prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">798</TD><TD>                globalPreferenceCacheManager.setPreferences(&#34;&#34;, prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">799</TD><TD>        }</TD></TR><TR><TD CLASS="l">800</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="5f">801</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">802</TD><TD>        public void setSystemPreferencesForUser(String user, PreferenceStruct [] prefs)</TD></TR><TR><TD CLASS="l">803</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">804</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">805</TD><TD>                userMaintenanceServiceProxy.setSystemPreferencesForUser(user, prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">806</TD><TD>                systemPreferenceCacheManager.setPreferences(user, prefs);</TD></TR><TR CLASS="z"><TD CLASS="l">807</TD><TD>        }</TD></TR><TR><TD CLASS="l">808</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="60">809</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">810</TD><TD>        public void setUserEnablement(UserEnablementStruct userEnablement)</TD></TR><TR><TD CLASS="l">811</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException</TD></TR><TR><TD CLASS="l">812</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">813</TD><TD>                userMaintenanceServiceProxy.setUserEnablement(userEnablement);</TD></TR><TR CLASS="z"><TD CLASS="l">814</TD><TD>                maintenanceCacheManager.setUserEnablement(userEnablement);</TD></TR><TR CLASS="z"><TD CLASS="l">815</TD><TD>        }</TD></TR><TR><TD CLASS="l">816</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="66">817</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">818</TD><TD>        public void updateUser(UserDefinitionStruct user)</TD></TR><TR><TD CLASS="l">819</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, TransactionFailedException, DataValidationException</TD></TR><TR><TD CLASS="l">820</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">821</TD><TD>        SessionProfileUserDefinitionStruct newUser = SessionProfileHelper.toSessionProfileUserDefinitionStruct(user);</TD></TR><TR CLASS="z"><TD CLASS="l">822</TD><TD>        updateSessionProfileUser(newUser);</TD></TR><TR CLASS="z"><TD CLASS="l">823</TD><TD>        }</TD></TR><TR><TD CLASS="l">824</TD><TD> </TD></TR><TR><TD CLASS="l">825</TD><TD>        /**</TD></TR><TR><TD CLASS="l">826</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="24">827</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">828</TD><TD>        public UserDefinitionStruct[] getDpmsForJointAccount(String userId)</TD></TR><TR><TD CLASS="l">829</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">830</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">831</TD><TD>        return SessionProfileHelper.toUserDefinitionStructs(getSessionProfileDpmsForJointAccount(userId));</TD></TR><TR><TD CLASS="l">832</TD><TD>        }</TD></TR><TR><TD CLASS="l">833</TD><TD> </TD></TR><TR><TD CLASS="l">834</TD><TD>        /**</TD></TR><TR><TD CLASS="l">835</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="21">836</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">837</TD><TD>        public UserDefinitionStruct getDpmJointAccountForClass(String userId, int classKey)</TD></TR><TR><TD CLASS="l">838</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">839</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">840</TD><TD>        return SessionProfileHelper.toUserDefinitionStruct(getSessionProfileDpmJointAccountForClass(userId, classKey));</TD></TR><TR><TD CLASS="l">841</TD><TD> </TD></TR><TR><TD CLASS="l">842</TD><TD>        }</TD></TR><TR><TD CLASS="l">843</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="3c">844</A></TD><TD>    public UserDefinitionStruct getUserByAcronym(com.cboe.idl.cmiUser.ExchangeAcronymStruct acronym)</TD></TR><TR><TD CLASS="l">845</TD><TD>        throws SystemException, CommunicationException, AuthorizationException,</TD></TR><TR><TD CLASS="l">846</TD><TD>        NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">847</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">848</TD><TD>        return SessionProfileHelper.toUserDefinitionStruct(getSessionProfileUserByAcronym(acronym));</TD></TR><TR><TD CLASS="l">849</TD><TD>    }</TD></TR><TR><TD CLASS="l">850</TD><TD> </TD></TR><TR><TD CLASS="l">851</TD><TD>        /**</TD></TR><TR><TD CLASS="l">852</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="22">853</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">854</TD><TD>        public UserDefinitionStruct[] getDpmParticipantsForClass(int classKey)</TD></TR><TR><TD CLASS="l">855</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">856</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">857</TD><TD>       return SessionProfileHelper.toUserDefinitionStructs(getSessionProfileDpmParticipantsForClass(classKey));</TD></TR><TR><TD CLASS="l">858</TD><TD>        }</TD></TR><TR><TD CLASS="l">859</TD><TD> </TD></TR><TR><TD CLASS="l">860</TD><TD>        /**</TD></TR><TR><TD CLASS="l">861</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="4b">862</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">863</TD><TD>        public UserDefinitionStruct[] getUsersByType(short userType)</TD></TR><TR><TD CLASS="l">864</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">865</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">866</TD><TD>        return SessionProfileHelper.toUserDefinitionStructs(getSessionProfileUsersByType(userType));</TD></TR><TR><TD CLASS="l"><A NAME="4c">867</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">868</TD><TD> </TD></TR><TR><TD CLASS="l">869</TD><TD>    public UserFirmAffiliationStruct[] getUsersForAffiliatedFirm(String firm) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">870</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">871</TD><TD>        UserFirmAffiliationStruct[] userFirmAffiliationStruct = userFirmAffiliationCacheManager.getUsersForAffiliatedFirm(firm);</TD></TR><TR CLASS="z"><TD CLASS="l">872</TD><TD>                if (userFirmAffiliationStruct == null)</TD></TR><TR><TD CLASS="l">873</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">874</TD><TD>                        userFirmAffiliationStruct = userMaintenanceServiceProxy.getUsersForAffiliatedFirm(firm);</TD></TR><TR><TD CLASS="l">875</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">876</TD><TD>                return userFirmAffiliationStruct;</TD></TR><TR><TD CLASS="l">877</TD><TD>    }</TD></TR><TR><TD CLASS="l">878</TD><TD> </TD></TR><TR><TD CLASS="l">879</TD><TD>    /**</TD></TR><TR><TD CLASS="l">880</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="23">881</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">882</TD><TD>        public UserDefinitionStruct[] getDpmsForClass(String userId, int classKey)</TD></TR><TR><TD CLASS="l">883</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">884</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">885</TD><TD>        return SessionProfileHelper.toUserDefinitionStructs(getSessionProfileDpmsForClass(userId, classKey));</TD></TR><TR><TD CLASS="l">886</TD><TD>        }</TD></TR><TR><TD CLASS="l">887</TD><TD> </TD></TR><TR><TD CLASS="l">888</TD><TD>        /**</TD></TR><TR><TD CLASS="l">889</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="3f">890</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">891</TD><TD>        public UserEnablementStruct getUserEnablement(String userId)</TD></TR><TR><TD CLASS="l">892</TD><TD>                throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">893</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">894</TD><TD>                UserEnablementStruct enablement = maintenanceCacheManager.getUserEnablement(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">895</TD><TD>                if (enablement == null)</TD></TR><TR><TD CLASS="l">896</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">897</TD><TD>                        enablement = userServiceProxy.getUserEnablement(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">898</TD><TD>                        maintenanceCacheManager.setUserEnablement(enablement);</TD></TR><TR><TD CLASS="l">899</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">900</TD><TD>                return enablement;</TD></TR><TR><TD CLASS="l">901</TD><TD>        }</TD></TR><TR><TD CLASS="l">902</TD><TD> </TD></TR><TR><TD CLASS="l">903</TD><TD>        /**</TD></TR><TR><TD CLASS="l">904</TD><TD>         *</TD></TR><TR><TD CLASS="l"><A NAME="1c">905</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">906</TD><TD>        public UserEnablementStruct[] getAllUserEnablements()</TD></TR><TR><TD CLASS="l">907</TD><TD>                throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">908</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">909</TD><TD>                UserEnablementStruct[] enablements = maintenanceCacheManager.getAllUserEnablements();</TD></TR><TR CLASS="z"><TD CLASS="l">910</TD><TD>                if (enablements == null)</TD></TR><TR><TD CLASS="l">911</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">912</TD><TD>                        enablements = userServiceProxy.getAllUserEnablements();</TD></TR><TR CLASS="z"><TD CLASS="l">913</TD><TD>                        maintenanceCacheManager.setAllUserEnablements(enablements);</TD></TR><TR><TD CLASS="l">914</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">915</TD><TD>                return enablements;</TD></TR><TR><TD CLASS="l">916</TD><TD>        }</TD></TR><TR><TD CLASS="l">917</TD><TD> </TD></TR><TR><TD CLASS="l">918</TD><TD>    /**</TD></TR><TR><TD CLASS="l">919</TD><TD>     * Remove user from all caches.</TD></TR><TR><TD CLASS="l"><A NAME="58">920</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">921</TD><TD>    protected void removeUser(String userId)</TD></TR><TR><TD CLASS="l">922</TD><TD>    {</TD></TR><TR><TD CLASS="l">923</TD><TD>        // utpsCacheManager.removeUser(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">924</TD><TD>        maintenanceCacheManager.removeUser(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">925</TD><TD>        userServiceCacheManager.dropUserInformation(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">926</TD><TD>        userPreferenceCacheManager.removePreferencesByPrefix(userId, &#34;&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">927</TD><TD>        systemPreferenceCacheManager.removePreferencesByPrefix(userId, &#34;&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">928</TD><TD>        globalPreferenceCacheManager.removePreferencesByPrefix(userId, &#34;&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">929</TD><TD>    }</TD></TR><TR><TD CLASS="l">930</TD><TD> </TD></TR><TR><TD CLASS="l">931</TD><TD>    /**</TD></TR><TR><TD CLASS="l">932</TD><TD>     * Update user information in cache.  Removes utps cache information; this will be updated dynamically.</TD></TR><TR><TD CLASS="l"><A NAME="8">933</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">934</TD><TD>    public synchronized void acceptUserUpdate(UserStruct user, UserDefinitionStruct userDef, UserEnablementStruct userEnablement)</TD></TR><TR><TD CLASS="l">935</TD><TD>    {</TD></TR><TR><TD CLASS="l"><A NAME="4">936</A></TD><TD>       //moved to the new event method below</TD></TR><TR CLASS="z"><TD CLASS="l">937</TD><TD>    }</TD></TR><TR><TD CLASS="l">938</TD><TD>    public void acceptSessionProfileUserUpdate(SessionProfileUserStruct user, SessionProfileUserDefinitionStruct userDef, UserEnablementStruct userEnablement)</TD></TR><TR><TD CLASS="l">939</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">940</TD><TD>        removeUser(user.userId);</TD></TR><TR CLASS="z"><TD CLASS="l">941</TD><TD>        maintenanceCacheManager.reSetUserWithDpmParticipantsCache(userDef);</TD></TR><TR CLASS="z"><TD CLASS="l">942</TD><TD>        SessionProfileUserStructV2 v2Struct = new SessionProfileUserStructV2(userDef.userKey, user);</TD></TR><TR CLASS="z"><TD CLASS="l">943</TD><TD>        maintenanceCacheManager.setUser(userDef);</TD></TR><TR CLASS="z"><TD CLASS="l">944</TD><TD>        maintenanceCacheManager.setUserEnablement(userEnablement);</TD></TR><TR CLASS="z"><TD CLASS="l">945</TD><TD>        userServiceCacheManager.setUserInformation(user.userId, v2Struct);</TD></TR><TR CLASS="z"><TD CLASS="l">946</TD><TD>        userServiceCacheManager.setUserInformation(user.userAcronym, v2Struct);</TD></TR><TR><TD CLASS="l">947</TD><TD> </TD></TR><TR><TD CLASS="l">948</TD><TD>        // UTPS updates lazily</TD></TR><TR><TD CLASS="l">949</TD><TD>        // user preferences update lazily</TD></TR><TR><TD CLASS="l">950</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">951</TD><TD>        Log.information(this, &#34;Updated user &#34; + user.userAcronym.exchange+ &#34;:&#34; + user.userId + &#34; cache information.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6">952</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">953</TD><TD> </TD></TR><TR><TD CLASS="l">954</TD><TD>    public void acceptUserFirmAffiliationDelete(UserFirmAffiliationStruct userFirmAffiliationStruct)</TD></TR><TR><TD CLASS="l">955</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">956</TD><TD>       userFirmAffiliationCacheManager.deleteAffiliation(userFirmAffiliationStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">957</TD><TD>       Log.information(this, &#34;Deleted user &#34; + userFirmAffiliationStruct.userAcronym.acronym+ &#34;:&#34; + userFirmAffiliationStruct.affiliatedFirm + &#34; cache information.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="7">958</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">959</TD><TD> </TD></TR><TR><TD CLASS="l">960</TD><TD>    public void acceptUserFirmAffiliationUpdate(UserFirmAffiliationStruct userFirmAffiliationStruct)</TD></TR><TR><TD CLASS="l">961</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">962</TD><TD>        userFirmAffiliationCacheManager.updateAffiliation(userFirmAffiliationStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">963</TD><TD>        Log.information(this, &#34;Updated user &#34; + userFirmAffiliationStruct.userAcronym.acronym+ &#34;:&#34; + userFirmAffiliationStruct.affiliatedFirm + &#34; cache information.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">964</TD><TD>    }</TD></TR><TR><TD CLASS="l">965</TD><TD> </TD></TR><TR><TD CLASS="l">966</TD><TD>    /**</TD></TR><TR><TD CLASS="l">967</TD><TD>     * Remove user from cache</TD></TR><TR><TD CLASS="l">968</TD><TD>     */</TD></TR><TR><TD CLASS="l">969</TD><TD>    /*</TD></TR><TR><TD CLASS="l">970</TD><TD>    public synchronized void acceptUserDeletion(String userId)</TD></TR><TR><TD CLASS="l">971</TD><TD>    {</TD></TR><TR><TD CLASS="l">972</TD><TD>        removeUser(userId);</TD></TR><TR><TD CLASS="l">973</TD><TD>        Log.information(this, &#34;Removed user &#34; + userId + &#34; from cache.&#34;);</TD></TR><TR><TD CLASS="l">974</TD><TD>    }</TD></TR><TR><TD CLASS="l">975</TD><TD>    */</TD></TR><TR><TD CLASS="l">976</TD><TD> </TD></TR><TR><TD CLASS="l">977</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="3">978</A></TD><TD>     * Unused cache consumer method</TD></TR><TR><TD CLASS="l">979</TD><TD>     */</TD></TR><TR><TD CLASS="l">980</TD><TD>    public void acceptFirmUpdate(FirmStruct firm)</TD></TR><TR><TD CLASS="l">981</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">982</TD><TD>    }</TD></TR><TR><TD CLASS="l">983</TD><TD> </TD></TR><TR><TD CLASS="l">984</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="2">985</A></TD><TD>     * Unused cache consumer method</TD></TR><TR><TD CLASS="l">986</TD><TD>     */</TD></TR><TR><TD CLASS="l">987</TD><TD>    public void acceptFirmDeletion(FirmStruct firm)</TD></TR><TR><TD CLASS="l">988</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">989</TD><TD>    }</TD></TR><TR><TD CLASS="l">990</TD><TD> </TD></TR><TR><TD CLASS="l">991</TD><TD>    /**</TD></TR><TR><TD CLASS="l">992</TD><TD>     *  This method is used as a command callback to print the dpm participants for a class</TD></TR><TR><TD CLASS="l">993</TD><TD>     *  @param classKeyString- the user id for whom to get enablement information.</TD></TR><TR><TD CLASS="l">994</TD><TD>     */</TD></TR><TR><TD CLASS="l"><A NAME="50">995</A></TD><TD>    public String printDpmParticipantsForClass(String classKeyString)</TD></TR><TR><TD CLASS="l">996</TD><TD>    {</TD></TR><TR><TD CLASS="l">997</TD><TD>        try</TD></TR><TR><TD CLASS="l">998</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">999</TD><TD>            int classKey = Integer.parseInt(classKeyString);</TD></TR><TR CLASS="z"><TD CLASS="l">1000</TD><TD>            SessionProfileUserDefinitionStruct[] dpms = getSessionProfileDpmParticipantsForClass(classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1001</TD><TD>            String users = &#34;DPMs for class &#34; + classKey + &#34; are&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1002</TD><TD>            for (int i = 0; i &lt; dpms.length; i++) {</TD></TR><TR CLASS="z"><TD CLASS="l">1003</TD><TD>                users = users + &#34;:&#34; + dpms[i].userId;</TD></TR><TR><TD CLASS="l">1004</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">1005</TD><TD>            return users;</TD></TR><TR><TD CLASS="l">1006</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1007</TD><TD>        catch (Exception ex)</TD></TR><TR><TD CLASS="l">1008</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1009</TD><TD>            Log.exception(this, &#34;Error getting DPMs for class&#34; + classKeyString, ex);</TD></TR><TR CLASS="z"><TD CLASS="l">1010</TD><TD>            return &#34;Error getting struct: &#34; + ex;</TD></TR><TR><TD CLASS="l">1011</TD><TD>        }</TD></TR><TR><TD CLASS="l">1012</TD><TD>    }</TD></TR><TR><TD CLASS="l">1013</TD><TD> </TD></TR><TR><TD CLASS="l">1014</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1015</TD><TD>     *  This method is used as a command callback to print the edpm participants for a class</TD></TR><TR><TD CLASS="l">1016</TD><TD>     *  @param classKeyString- the user id for whom to get enablement information.</TD></TR><TR><TD CLASS="l">1017</TD><TD>     */</TD></TR><TR><TD CLASS="l"><A NAME="51">1018</A></TD><TD>    public String printEDPMsForClass(String classKeyString)</TD></TR><TR><TD CLASS="l">1019</TD><TD>    {</TD></TR><TR><TD CLASS="l">1020</TD><TD>        try</TD></TR><TR><TD CLASS="l">1021</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1022</TD><TD>            String message = &#34;&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1023</TD><TD>            int classKey = Integer.parseInt(classKeyString);</TD></TR><TR><TD CLASS="l">1024</TD><TD>            //SessionProfileUserDefinitionStruct[] eDpms = getUsersAssignedToClass(classKey, MarketMakerClassAssignmentTypes.EDPM, SessionNameValues.ALL_SESSION_NAME);</TD></TR><TR CLASS="z"><TD CLASS="l">1025</TD><TD>            TradingClass tradingClass = getTradingClass(classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1026</TD><TD>            if (tradingClass == null)</TD></TR><TR><TD CLASS="l">1027</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">1028</TD><TD>                message = &#34;Error in query EDPMs since there is no tradingClass for classKey=&#34; + classKeyString;</TD></TR><TR><TD CLASS="l">1029</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">1030</TD><TD>            else if (!tradingClass.inTradingSession())</TD></TR><TR><TD CLASS="l">1031</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">1032</TD><TD>                message = &#34;Error in query EDPMs since there is NO_SESSION for classKey=&#34; + classKeyString;</TD></TR><TR><TD CLASS="l">1033</TD><TD>            }</TD></TR><TR><TD CLASS="l">1034</TD><TD>            else</TD></TR><TR><TD CLASS="l">1035</TD><TD>            {</TD></TR><TR CLASS="z"><TD CLASS="l">1036</TD><TD>                String sessionName = tradingClass.getSessionName();</TD></TR><TR CLASS="z"><TD CLASS="l">1037</TD><TD>                SessionProfileUserDefinitionStruct[] eDpms = getUsersAssignedToClass(classKey, MarketMakerClassAssignmentTypes.EDPM, sessionName);</TD></TR><TR CLASS="z"><TD CLASS="l">1038</TD><TD>                message = &#34;EDPMs for class &#34; + classKey + &#34; are&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1039</TD><TD>                for (int i = 0; i &lt; eDpms.length; i++)</TD></TR><TR><TD CLASS="l">1040</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">1041</TD><TD>                    message = message + &#34;:&#34; + eDpms[i].userId;</TD></TR><TR><TD CLASS="l">1042</TD><TD>                }</TD></TR><TR><TD CLASS="l">1043</TD><TD>            }</TD></TR><TR><TD CLASS="l">1044</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1045</TD><TD>            Log.information(this, message);</TD></TR><TR CLASS="z"><TD CLASS="l">1046</TD><TD>            return message;</TD></TR><TR><TD CLASS="l">1047</TD><TD> </TD></TR><TR><TD CLASS="l">1048</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1049</TD><TD>        catch (Exception ex)</TD></TR><TR><TD CLASS="l">1050</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1051</TD><TD>            Log.exception(this, &#34;Error getting EDPMs for class&#34; + classKeyString, ex);</TD></TR><TR CLASS="z"><TD CLASS="l">1052</TD><TD>            return &#34;Error getting struct: &#34; + ex;</TD></TR><TR><TD CLASS="l">1053</TD><TD>        }</TD></TR><TR><TD CLASS="l">1054</TD><TD>    }</TD></TR><TR><TD CLASS="l">1055</TD><TD> </TD></TR><TR><TD CLASS="l">1056</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1057</TD><TD>     * Gets the user given the user's system name.</TD></TR><TR><TD CLASS="l">1058</TD><TD>     * @param userId user's system name</TD></TR><TR><TD CLASS="l">1059</TD><TD>     * @return user information</TD></TR><TR><TD CLASS="l">1060</TD><TD>     * @exception NotFoundException if user is not found</TD></TR><TR><TD CLASS="l"><A NAME="2f">1061</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">1062</TD><TD>    public SessionProfileUserStruct getSessionProfileUserInformation(String userId)</TD></TR><TR><TD CLASS="l">1063</TD><TD>            throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">1064</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1065</TD><TD>        SessionProfileUserStructV2 userInformation = userServiceCacheManager.getUserInformation(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1066</TD><TD>        if (userInformation == null)</TD></TR><TR><TD CLASS="l">1067</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1068</TD><TD>            userInformation = userServiceProxy.getSessionProfileUserInformationV2(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1069</TD><TD>            userServiceCacheManager.setUserInformation(userId, userInformation);</TD></TR><TR><TD CLASS="l">1070</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1071</TD><TD>        return userInformation.userInfo;</TD></TR><TR><TD CLASS="l">1072</TD><TD>    }</TD></TR><TR><TD CLASS="l">1073</TD><TD> </TD></TR><TR><TD CLASS="l">1074</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1075</TD><TD>     * Gets the UserDefinitionStruct given the user's acronym</TD></TR><TR><TD CLASS="l">1076</TD><TD>     *</TD></TR><TR><TD CLASS="l">1077</TD><TD>     * @param acronym - the user's Exchange Acronym Struct</TD></TR><TR><TD CLASS="l">1078</TD><TD>     * @return UserDefinitionStruct</TD></TR><TR><TD CLASS="l">1079</TD><TD>     * @exception NotFoundException if user is not found</TD></TR><TR><TD CLASS="l"><A NAME="30">1080</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">1081</TD><TD>    public SessionProfileUserStruct getSessionProfileUserInformationByAcronym(ExchangeAcronymStruct acronym)</TD></TR><TR><TD CLASS="l">1082</TD><TD>            throws NotFoundException, SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1083</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1084</TD><TD>        SessionProfileUserStructV2 userInformation = userServiceCacheManager.getUserInformation(acronym);</TD></TR><TR CLASS="z"><TD CLASS="l">1085</TD><TD>        if (userInformation == null)</TD></TR><TR><TD CLASS="l">1086</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1087</TD><TD>            userInformation = userServiceProxy.getSessionProfileUserInformationByAcronymV2(acronym);</TD></TR><TR CLASS="z"><TD CLASS="l">1088</TD><TD>            userServiceCacheManager.setUserInformation(acronym, userInformation);</TD></TR><TR><TD CLASS="l">1089</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1090</TD><TD>        return userInformation.userInfo;</TD></TR><TR><TD CLASS="l">1091</TD><TD>    }</TD></TR><TR><TD CLASS="l">1092</TD><TD> </TD></TR><TR><TD CLASS="l">1093</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1094</TD><TD>     * Gets the user given the user's system name.</TD></TR><TR><TD CLASS="l">1095</TD><TD>     * @param acronym - the user's Exchange Acronym Struct</TD></TR><TR><TD CLASS="l">1096</TD><TD>     * @return user information</TD></TR><TR><TD CLASS="l">1097</TD><TD>     * @exception NotFoundException if user is not found</TD></TR><TR><TD CLASS="l"><A NAME="31">1098</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">1099</TD><TD>    public SessionProfileUserStructV2 getSessionProfileUserInformationByAcronymV2(ExchangeAcronymStruct acronym)</TD></TR><TR><TD CLASS="l">1100</TD><TD>            throws SystemException, CommunicationException, AuthorizationException, NotFoundException, DataValidationException</TD></TR><TR><TD CLASS="l">1101</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1102</TD><TD>        SessionProfileUserStructV2 userInformation = userServiceCacheManager.getUserInformation(acronym);</TD></TR><TR CLASS="z"><TD CLASS="l">1103</TD><TD>        if (userInformation == null)</TD></TR><TR><TD CLASS="l">1104</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1105</TD><TD>            userInformation = userServiceProxy.getSessionProfileUserInformationByAcronymV2(acronym);</TD></TR><TR CLASS="z"><TD CLASS="l">1106</TD><TD>            userServiceCacheManager.setUserInformation(acronym, userInformation);</TD></TR><TR><TD CLASS="l">1107</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1108</TD><TD>        return userInformation;</TD></TR><TR><TD CLASS="l"><A NAME="9">1109</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1110</TD><TD>    // added for Hybrid Session Profile for UserMaintenanceService</TD></TR><TR><TD CLASS="l">1111</TD><TD>    public SessionProfileUserDefinitionStruct addSessionProfileUser(SessionProfileUserDefinitionStruct sessionProfileUserStruct) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, TransactionFailedException, AlreadyExistsException</TD></TR><TR><TD CLASS="l">1112</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1113</TD><TD>        SessionProfileUserDefinitionStruct newUser = userMaintenanceServiceProxy.addSessionProfileUser(sessionProfileUserStruct);</TD></TR><TR CLASS="z"><TD CLASS="l">1114</TD><TD>        maintenanceCacheManager.reSetUserWithDpmParticipantsCache(newUser);</TD></TR><TR CLASS="z"><TD CLASS="l">1115</TD><TD>        maintenanceCacheManager.setUser(newUser);</TD></TR><TR CLASS="z"><TD CLASS="l">1116</TD><TD>        return newUser;</TD></TR><TR><TD CLASS="l"><A NAME="19">1117</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1118</TD><TD> </TD></TR><TR><TD CLASS="l">1119</TD><TD>    public SessionProfileUserDefinitionStruct[] getAllSessionProfileUsers() throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">1120</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1121</TD><TD>        SessionProfileUserDefinitionStruct[] allUsers = maintenanceCacheManager.getAllUsers();</TD></TR><TR CLASS="z"><TD CLASS="l">1122</TD><TD>        if (allUsers == null)</TD></TR><TR><TD CLASS="l">1123</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1124</TD><TD>            allUsers = userMaintenanceServiceProxy.getAllSessionProfileUsers();</TD></TR><TR CLASS="z"><TD CLASS="l">1125</TD><TD>            maintenanceCacheManager.initCache(allUsers);</TD></TR><TR><TD CLASS="l">1126</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1127</TD><TD>        return allUsers;</TD></TR><TR><TD CLASS="l"><A NAME="1b">1128</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1129</TD><TD> </TD></TR><TR><TD CLASS="l">1130</TD><TD>    public UserFirmAffiliationStruct[] getAllUserAffiliatedFirms() throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">1131</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1132</TD><TD>        UserFirmAffiliationStruct[] userFirmAffiliationStruct = userFirmAffiliationCacheManager.getAllUserAffiliatedFirms();</TD></TR><TR CLASS="z"><TD CLASS="l">1133</TD><TD>                if (userFirmAffiliationStruct == null)</TD></TR><TR><TD CLASS="l">1134</TD><TD>                {</TD></TR><TR CLASS="z"><TD CLASS="l">1135</TD><TD>                        userFirmAffiliationStruct = userMaintenanceServiceProxy.getAllUserAffiliatedFirms();</TD></TR><TR CLASS="z"><TD CLASS="l">1136</TD><TD>            userFirmAffiliationCacheManager.initialize(userFirmAffiliationStruct);</TD></TR><TR><TD CLASS="l">1137</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1138</TD><TD>                return userFirmAffiliationStruct;</TD></TR><TR><TD CLASS="l">1139</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="28">1140</A></TD><TD> </TD></TR><TR><TD CLASS="l">1141</TD><TD>    public SessionProfileUserDefinitionStruct getSessionProfileDpmJointAccountForClass(String userId, int classKey) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">1142</TD><TD>    {</TD></TR><TR><TD CLASS="l">1143</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1144</TD><TD>        SessionProfileUserDefinitionStruct user = maintenanceCacheManager.getDpmJointAccountForClass(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1145</TD><TD>        if (user == null)</TD></TR><TR><TD CLASS="l">1146</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1147</TD><TD>            user = userMaintenanceServiceProxy.getSessionProfileDpmJointAccountForClass(userId,classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1148</TD><TD>            maintenanceCacheManager.setDpmJointAccountForClass(userId, classKey, user);</TD></TR><TR><TD CLASS="l">1149</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1150</TD><TD>        return user;</TD></TR><TR><TD CLASS="l"><A NAME="29">1151</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1152</TD><TD> </TD></TR><TR><TD CLASS="l">1153</TD><TD>    public SessionProfileUserDefinitionStruct[] getSessionProfileDpmParticipantsForClass(int classKey) throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1154</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1155</TD><TD>        SessionProfileUserDefinitionStruct[] users = maintenanceCacheManager.getDpmParticipantsForClass(classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1156</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1157</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1158</TD><TD>            users = userMaintenanceServiceProxy.getSessionProfileDpmParticipantsForClass(classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1159</TD><TD>            maintenanceCacheManager.setDpmParticipantsForClass(classKey, users);</TD></TR><TR><TD CLASS="l">1160</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1161</TD><TD>        return users;</TD></TR><TR><TD CLASS="l">1162</TD><TD> </TD></TR><TR><TD CLASS="l">1163</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="2a">1164</A></TD><TD> </TD></TR><TR><TD CLASS="l">1165</TD><TD>    public SessionProfileUserDefinitionStruct[] getSessionProfileDpmsForClass(String userId, int classKey)</TD></TR><TR><TD CLASS="l">1166</TD><TD>            throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1167</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1168</TD><TD>        SessionProfileUserDefinitionStruct[] users = maintenanceCacheManager.getDpmsForClass(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1169</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1170</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1171</TD><TD>            users = userMaintenanceServiceProxy.getSessionProfileDpmsForClass(userId, classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1172</TD><TD>            maintenanceCacheManager.setDpmsForClass(userId, classKey, users);</TD></TR><TR><TD CLASS="l">1173</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1174</TD><TD>        return users;</TD></TR><TR><TD CLASS="l"><A NAME="2b">1175</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1176</TD><TD> </TD></TR><TR><TD CLASS="l">1177</TD><TD>    public SessionProfileUserDefinitionStruct[] getSessionProfileDpmsForJointAccount(String userId) throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1178</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1179</TD><TD>        SessionProfileUserDefinitionStruct[] users = maintenanceCacheManager.getDpmsForJointAccount(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1180</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1181</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1182</TD><TD>            users = userMaintenanceServiceProxy.getSessionProfileDpmsForJointAccount(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1183</TD><TD>            maintenanceCacheManager.setDpmsForJointAccount(userId, users);</TD></TR><TR><TD CLASS="l">1184</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1185</TD><TD>        return users;</TD></TR><TR><TD CLASS="l"><A NAME="2c">1186</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1187</TD><TD> </TD></TR><TR><TD CLASS="l">1188</TD><TD>    public SessionProfileUserDefinitionStruct getSessionProfileUserByAcronym(ExchangeAcronymStruct acronym) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">1189</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1190</TD><TD>        SessionProfileUserDefinitionStruct user = maintenanceCacheManager.getUserByAcronym(acronym);</TD></TR><TR CLASS="z"><TD CLASS="l">1191</TD><TD>        if (user == null)</TD></TR><TR><TD CLASS="l">1192</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1193</TD><TD>            user = userMaintenanceServiceProxy.getSessionProfileUserByAcronym(acronym);</TD></TR><TR CLASS="z"><TD CLASS="l">1194</TD><TD>            maintenanceCacheManager.setUser(user);</TD></TR><TR><TD CLASS="l">1195</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1196</TD><TD>        return user;</TD></TR><TR><TD CLASS="l"><A NAME="2d">1197</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1198</TD><TD> </TD></TR><TR><TD CLASS="l">1199</TD><TD>    public SessionProfileUserDefinitionStruct getSessionProfileUserByKey(int userKey) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">1200</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1201</TD><TD>        SessionProfileUserDefinitionStruct userDef = maintenanceCacheManager.getUserByKey(userKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1202</TD><TD>        if (userDef == null)</TD></TR><TR><TD CLASS="l">1203</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1204</TD><TD>            userDef = userMaintenanceServiceProxy.getSessionProfileUserByKey(userKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1205</TD><TD>            maintenanceCacheManager.setUser(userDef);</TD></TR><TR><TD CLASS="l">1206</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1207</TD><TD>        return userDef;</TD></TR><TR><TD CLASS="l"><A NAME="2e">1208</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1209</TD><TD> </TD></TR><TR><TD CLASS="l">1210</TD><TD>    public SessionProfileUserDefinitionStruct getSessionProfileUserByUserId(String userId) throws SystemException, CommunicationException, AuthorizationException, DataValidationException, NotFoundException</TD></TR><TR><TD CLASS="l">1211</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1212</TD><TD>        SessionProfileUserDefinitionStruct userDef = maintenanceCacheManager.getUserById(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1213</TD><TD>        if (userDef == null)</TD></TR><TR><TD CLASS="l">1214</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1215</TD><TD>            userDef = userMaintenanceServiceProxy.getSessionProfileUserByUserId(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1216</TD><TD>            maintenanceCacheManager.setUser(userDef);</TD></TR><TR><TD CLASS="l">1217</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1218</TD><TD>        return userDef;</TD></TR><TR><TD CLASS="l"><A NAME="34">1219</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1220</TD><TD> </TD></TR><TR><TD CLASS="l">1221</TD><TD>    public SessionProfileUserDefinitionStruct[] getSessionProfileUsersByAssignedClass(int classKey) throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1222</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1223</TD><TD>        SessionProfileUserDefinitionStruct[] users = maintenanceCacheManager.getUsersByAssignedClass(classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1224</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1225</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1226</TD><TD>            users = userMaintenanceServiceProxy.getSessionProfileUsersByAssignedClass(classKey);</TD></TR><TR CLASS="z"><TD CLASS="l">1227</TD><TD>            maintenanceCacheManager.setUsersByAssignedClass(classKey, users);</TD></TR><TR><TD CLASS="l">1228</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1229</TD><TD>        return users;</TD></TR><TR><TD CLASS="l"><A NAME="35">1230</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1231</TD><TD> </TD></TR><TR><TD CLASS="l">1232</TD><TD>    public SessionProfileUserDefinitionStruct[] getSessionProfileUsersByRole(char roleChar) throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1233</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1234</TD><TD>        SessionProfileUserDefinitionStruct[] users = maintenanceCacheManager.getUsersByRole(roleChar);</TD></TR><TR CLASS="z"><TD CLASS="l">1235</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1236</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1237</TD><TD>            users = userMaintenanceServiceProxy.getSessionProfileUsersByRole(roleChar);</TD></TR><TR><TD CLASS="l">1238</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1239</TD><TD>        return users;</TD></TR><TR><TD CLASS="l"><A NAME="36">1240</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1241</TD><TD> </TD></TR><TR><TD CLASS="l">1242</TD><TD>    public SessionProfileUserDefinitionStruct[] getSessionProfileUsersByType(short userType) throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1243</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1244</TD><TD>        SessionProfileUserDefinitionStruct[] users = maintenanceCacheManager.getUsersByType(userType);</TD></TR><TR CLASS="z"><TD CLASS="l">1245</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1246</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1247</TD><TD>            users = userMaintenanceServiceProxy.getSessionProfileUsersByType(userType);</TD></TR><TR><TD CLASS="l">1248</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1249</TD><TD>        return users;</TD></TR><TR><TD CLASS="l"><A NAME="65">1250</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1251</TD><TD> </TD></TR><TR><TD CLASS="l">1252</TD><TD>    public void updateSessionProfileUser(SessionProfileUserDefinitionStruct user) throws SystemException, CommunicationException, AuthorizationException, TransactionFailedException, DataValidationException</TD></TR><TR><TD CLASS="l">1253</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1254</TD><TD>        userMaintenanceServiceProxy.updateSessionProfileUser(user);</TD></TR><TR CLASS="z"><TD CLASS="l">1255</TD><TD>        maintenanceCacheManager.reSetUserWithDpmParticipantsCache(user);</TD></TR><TR CLASS="z"><TD CLASS="l">1256</TD><TD>        maintenanceCacheManager.setUser(user);</TD></TR><TR><TD CLASS="l">1257</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1258</TD><TD>    }</TD></TR><TR><TD CLASS="l">1259</TD><TD> </TD></TR><TR><TD CLASS="l">1260</TD><TD> </TD></TR><TR><TD CLASS="l">1261</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1262</TD><TD>     *  &lt;b&gt;NOTE:&lt;b&gt;  Currently the session param is &lt;i&gt;ignored&lt;/i&gt;!  The cache will &lt;i&gt;only&lt;/i&gt; deal with the ALL_SESSION_NAME</TD></TR><TR><TD CLASS="l">1263</TD><TD>     *  session.  We have several issues to resolved (in this cache, the UserService, and the MembershipAdapter) if we ever support</TD></TR><TR><TD CLASS="l">1264</TD><TD>     *  EDPMs-by-session.</TD></TR><TR><TD CLASS="l">1265</TD><TD>     */</TD></TR><TR><TD CLASS="l">1266</TD><TD>    public SessionProfileUserDefinitionStruct[] getUsersAssignedToClass(int classKey, short assignmentType, String session) throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l"><A NAME="48">1267</A></TD><TD>    {</TD></TR><TR><TD CLASS="l">1268</TD><TD>        // session = SessionNameValues.ALL_SESSION_NAME;</TD></TR><TR><TD CLASS="l">1269</TD><TD> </TD></TR><TR><TD CLASS="l">1270</TD><TD>        SessionProfileUserDefinitionStruct[] users;</TD></TR><TR CLASS="z"><TD CLASS="l">1271</TD><TD>        users = maintenanceCacheManager.getUsersAssignedToClass(classKey, assignmentType, session);</TD></TR><TR><TD CLASS="l">1272</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1273</TD><TD>        if (users == null)</TD></TR><TR><TD CLASS="l">1274</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1275</TD><TD>            users = userMaintenanceServiceProxy.getUsersAssignedToClass(classKey, assignmentType, session);</TD></TR><TR CLASS="z"><TD CLASS="l">1276</TD><TD>            Log.debug(this, &#34;Queried global for users assigned to class (&#34; + classKey + &#34;,&#34; + assignmentType + &#34;,&#34; + session + &#34;): got &#34; + users.length + &#34; user(s) as result.  Will updating cache.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">1277</TD><TD>            maintenanceCacheManager.setUsersAssignedToClass(classKey, assignmentType, session, users);</TD></TR><TR><TD CLASS="l">1278</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1279</TD><TD>        return users;</TD></TR><TR><TD CLASS="l">1280</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="4f">1281</A></TD><TD>    public String printDpmParticipantCache()</TD></TR><TR><TD CLASS="l">1282</TD><TD>    {</TD></TR><TR><TD CLASS="l">1283</TD><TD>        try</TD></TR><TR><TD CLASS="l">1284</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1285</TD><TD>           java.io.StringWriter writer = new java.io.StringWriter();</TD></TR><TR CLASS="z"><TD CLASS="l">1286</TD><TD>           String result = maintenanceCacheManager.logCurrentDpmParticipantsCache();</TD></TR><TR CLASS="z"><TD CLASS="l">1287</TD><TD>           writer.write(result);</TD></TR><TR CLASS="z"><TD CLASS="l">1288</TD><TD>           writer.flush();</TD></TR><TR CLASS="z"><TD CLASS="l">1289</TD><TD>           return writer.toString();</TD></TR><TR><TD CLASS="l">1290</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1291</TD><TD>        catch (Exception ex)</TD></TR><TR><TD CLASS="l">1292</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1293</TD><TD>            return throwableToString(ex);</TD></TR><TR><TD CLASS="l">1294</TD><TD>        }</TD></TR><TR><TD CLASS="l">1295</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="64">1296</A></TD><TD>    protected String throwableToString(Throwable ex)</TD></TR><TR><TD CLASS="l">1297</TD><TD>    {</TD></TR><TR><TD CLASS="l">1298</TD><TD>        try</TD></TR><TR><TD CLASS="l">1299</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1300</TD><TD>            java.io.StringWriter writer = new java.io.StringWriter();</TD></TR><TR CLASS="z"><TD CLASS="l">1301</TD><TD>            java.io.PrintWriter printWriter = new java.io.PrintWriter(writer);</TD></TR><TR CLASS="z"><TD CLASS="l">1302</TD><TD>            writer.write(&#34;Error: &#34; + ex + &#34;\n&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">1303</TD><TD>            ex.printStackTrace(printWriter);</TD></TR><TR CLASS="z"><TD CLASS="l">1304</TD><TD>            printWriter.flush();</TD></TR><TR CLASS="z"><TD CLASS="l">1305</TD><TD>            writer.flush();</TD></TR><TR CLASS="z"><TD CLASS="l">1306</TD><TD>            return writer.toString();</TD></TR><TR><TD CLASS="l">1307</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1308</TD><TD>        catch (Exception ioex)</TD></TR><TR><TD CLASS="l">1309</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1310</TD><TD>            return &#34;&lt;&lt;&lt; IO ex writing exception : &#34; + ioex + &#34; &gt;&gt;&gt; &#34; + ex;</TD></TR><TR><TD CLASS="l">1311</TD><TD>        }</TD></TR><TR><TD CLASS="l">1312</TD><TD>    }</TD></TR><TR><TD CLASS="l"><A NAME="52">1313</A></TD><TD> </TD></TR><TR><TD CLASS="l">1314</TD><TD> </TD></TR><TR><TD CLASS="l">1315</TD><TD>    public String printQRMForUser(String userId)</TD></TR><TR><TD CLASS="l">1316</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1317</TD><TD>        String qrmDetails = &#34;&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1318</TD><TD>        UserQuoteRiskManagementProfileStruct profiles = null;</TD></TR><TR><TD CLASS="l">1319</TD><TD>        try</TD></TR><TR><TD CLASS="l">1320</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1321</TD><TD>            profiles = getAllQuoteRiskProfiles(userId);</TD></TR><TR><TD CLASS="l">1322</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">1323</TD><TD>        catch(Exception e)</TD></TR><TR><TD CLASS="l">1324</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1325</TD><TD>            Log.exception(this,&#34;Caught exception&#34;, e);</TD></TR><TR><TD CLASS="l">1326</TD><TD>        }</TD></TR><TR><TD CLASS="l">1327</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1328</TD><TD>        qrmDetails += &#34;\n&#34; + &#34;QRM profile for user : &#34; + userId + &#34;\n&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1329</TD><TD>        qrmDetails +=        &#34;----------------------&#34; + &#34;\n&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1330</TD><TD>        qrmDetails += &#34;globalQuoteRiskManagementEnabled : &#34; + profiles.globalQuoteRiskManagementEnabled;</TD></TR><TR CLASS="z"><TD CLASS="l">1331</TD><TD>        qrmDetails += &#34;\n&#34; + &#34;Default QRM profile is :&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1332</TD><TD>        qrmDetails += printUserQRMProfile(profiles.defaultQuoteRiskProfile);</TD></TR><TR CLASS="z"><TD CLASS="l">1333</TD><TD>        qrmDetails += &#34;\n&#34; + &#34;QRM profiles for classes are : &#34; + profiles.quoteRiskProfiles.length +&#34;\n&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1334</TD><TD>        for(int i=0; i &lt; profiles.quoteRiskProfiles.length; i++)</TD></TR><TR><TD CLASS="l">1335</TD><TD>        {</TD></TR><TR CLASS="z"><TD CLASS="l">1336</TD><TD>            qrmDetails += printUserQRMProfile(profiles.quoteRiskProfiles[i]);</TD></TR><TR><TD CLASS="l">1337</TD><TD>        }</TD></TR><TR><TD CLASS="l">1338</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1339</TD><TD>        return qrmDetails;</TD></TR><TR><TD CLASS="l">1340</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="53">1341</A></TD><TD>    }</TD></TR><TR><TD CLASS="l">1342</TD><TD> </TD></TR><TR><TD CLASS="l">1343</TD><TD>    private String printUserQRMProfile(QuoteRiskManagementProfileStruct profile)</TD></TR><TR><TD CLASS="l">1344</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1345</TD><TD>        String details = &#34;&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1346</TD><TD>        details += &#34;\n&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1347</TD><TD>        details += &#34;classKey : &#34; + &#34;quoteRiskManagementEnabled :&#34; + &#34;timeWindow : &#34; + &#34;volumeThreshold == &#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1348</TD><TD>        details += profile.classKey + &#34; : &#34; + profile.quoteRiskManagementEnabled + &#34; : &#34; + profile.timeWindow + &#34; : &#34; + profile.volumeThreshold;</TD></TR><TR><TD CLASS="l">1349</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1350</TD><TD>        return details;</TD></TR><TR><TD CLASS="l">1351</TD><TD>    }</TD></TR><TR><TD CLASS="l">1352</TD><TD>   /**</TD></TR><TR><TD CLASS="l">1353</TD><TD>     * Gets the list of profile origin codes given the session and user role</TD></TR><TR><TD CLASS="l">1354</TD><TD>     *</TD></TR><TR><TD CLASS="l">1355</TD><TD>     * @param sessionName - the session name</TD></TR><TR><TD CLASS="l">1356</TD><TD>     * @param userRole - the user role</TD></TR><TR><TD CLASS="l"><A NAME="25">1357</A></TD><TD>     * @return char[]</TD></TR><TR><TD CLASS="l">1358</TD><TD>     */</TD></TR><TR><TD CLASS="l">1359</TD><TD>    public char[] getProfileOriginTypesForSession(String sessionName, char userRole) throws SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">1360</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1361</TD><TD>        return userMaintenanceServiceProxy.getProfileOriginTypesForSession(sessionName, userRole);</TD></TR><TR><TD CLASS="l">1362</TD><TD>    }</TD></TR><TR><TD CLASS="l">1363</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="37">1364</A></TD><TD>    //New Method for Single Acronym Scrum</TD></TR><TR><TD CLASS="l">1365</TD><TD>    public SessionProfileUserStructV2[] getSessionProfileUsersInformationByAcronymV2(ExchangeAcronymStruct acronym)throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1366</TD><TD> </TD></TR><TR><TD CLASS="l">1367</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1368</TD><TD>            return userServiceProxy.getSessionProfileUsersInformationByAcronymV2(acronym);</TD></TR><TR><TD CLASS="l">1369</TD><TD>    }</TD></TR><TR><TD CLASS="l">1370</TD><TD> </TD></TR><TR><TD CLASS="l">1371</TD><TD>    //New Method for Single Acronym Scrum</TD></TR><TR><TD CLASS="l"><A NAME="40">1372</A></TD><TD>        //Intended use is for server side, possibly for ar commands.</TD></TR><TR><TD CLASS="l">1373</TD><TD> </TD></TR><TR><TD CLASS="l">1374</TD><TD>        public String[] getUserIdsByAcronym( ExchangeAcronymStruct acronym)throws SystemException, CommunicationException, AuthorizationException, DataValidationException</TD></TR><TR><TD CLASS="l">1375</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1376</TD><TD>        return userMaintenanceServiceProxy.getUserIdsByAcronym(acronym);</TD></TR><TR><TD CLASS="l">1377</TD><TD>    }</TD></TR><TR><TD CLASS="l">1378</TD><TD> </TD></TR><TR><TD CLASS="l">1379</TD><TD>    //New Method for Single Acronym Scrum</TD></TR><TR><TD CLASS="l">1380</TD><TD>    // Intended use of this method is  for returning lightweight user structs so that SA-GUI</TD></TR><TR><TD CLASS="l"><A NAME="1f">1381</A></TD><TD>    // UserMaintenanceScreen will load faster.</TD></TR><TR><TD CLASS="l">1382</TD><TD> </TD></TR><TR><TD CLASS="l">1383</TD><TD>    public UserSummaryStruct[] getAllUsersSummaries() throws  SystemException, CommunicationException, AuthorizationException</TD></TR><TR><TD CLASS="l">1384</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1385</TD><TD>       return userMaintenanceServiceProxy.getAllUsersSummaries();</TD></TR><TR><TD CLASS="l">1386</TD><TD>    }</TD></TR><TR><TD CLASS="l">1387</TD><TD> </TD></TR><TR><TD CLASS="l">1388</TD><TD>    //New Method for Single Acronym Scrum</TD></TR><TR><TD CLASS="l">1389</TD><TD>          //This method will delete the user if there are no orders for the user in SBT.</TD></TR><TR><TD CLASS="l"><A NAME="15">1390</A></TD><TD>           // Intended use of this method is for delete functionality in UserMaintenanceScreen.</TD></TR><TR><TD CLASS="l">1391</TD><TD> </TD></TR><TR><TD CLASS="l">1392</TD><TD>    public void deleteUser( String userId) throws   SystemException,CommunicationException,AuthorizationException,NotAcceptedException,NotFoundException,TransactionFailedException</TD></TR><TR><TD CLASS="l">1393</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1394</TD><TD>        userMaintenanceServiceProxy.deleteUser(userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1395</TD><TD>    }</TD></TR><TR><TD CLASS="l">1396</TD><TD> </TD></TR><TR><TD CLASS="l">1397</TD><TD>     //New Method for Single Acronym Scrum</TD></TR><TR><TD CLASS="l"><A NAME="33">1398</A></TD><TD>    //Will return all the users assciated with that Acronym and Exchange</TD></TR><TR><TD CLASS="l">1399</TD><TD> </TD></TR><TR><TD CLASS="l">1400</TD><TD>     public SessionProfileUserDefinitionStruct[] getSessionProfileUsersByAcronym(ExchangeAcronymStruct acronym) throws SystemException,CommunicationException,AuthorizationException,DataValidationException</TD></TR><TR><TD CLASS="l">1401</TD><TD>     {</TD></TR><TR CLASS="z"><TD CLASS="l">1402</TD><TD>          return userMaintenanceServiceProxy.getSessionProfileUsersByAcronym(acronym);</TD></TR><TR><TD CLASS="l">1403</TD><TD>     }</TD></TR><TR><TD CLASS="l">1404</TD><TD>     /**</TD></TR><TR><TD CLASS="l"><A NAME="5">1405</A></TD><TD>     * @see com.cboe.idl.consumers.CacheUpdateConsumerOperations#acceptUserDeletion(com.cboe.idl.user.UserSummaryStruct)</TD></TR><TR><TD CLASS="l">1406</TD><TD>     */</TD></TR><TR><TD CLASS="l">1407</TD><TD>    public void acceptUserDeletion(UserSummaryStruct deletedUser)</TD></TR><TR><TD CLASS="l">1408</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l">1409</TD><TD>        Log.information(this, &#34;Received user deletion event for '&#34; + deletedUser.userId + &#34;': remove from cache.&#34;);</TD></TR><TR CLASS="z"><TD CLASS="l">1410</TD><TD>        utpsCacheManager.removeUser(deletedUser.userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1411</TD><TD>        maintenanceCacheManager.removeUser(deletedUser.userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1412</TD><TD>        userServiceCacheManager.dropUserInformation(deletedUser.userId);</TD></TR><TR CLASS="z"><TD CLASS="l">1413</TD><TD>    }</TD></TR><TR><TD CLASS="l">1414</TD><TD> </TD></TR><TR><TD CLASS="l">1415</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="47">1416</A></TD><TD>     * @see com.cboe.idl.internalBusinessServices.UserMaintenanceServiceOperations#getUserSummary(java.lang.String)</TD></TR><TR><TD CLASS="l">1417</TD><TD>     */</TD></TR><TR><TD CLASS="l">1418</TD><TD>    public UserSummaryStruct getUserSummary(String userId) throws SystemException, CommunicationException, AuthorizationException, NotFoundException</TD></TR><TR><TD CLASS="l">1419</TD><TD>    {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="3b">1420</A></TD><TD>        return userMaintenanceServiceProxy.getUserSummary(userId);</TD></TR><TR><TD CLASS="l">1421</TD><TD>    }</TD></TR><TR><TD CLASS="l">1422</TD><TD> </TD></TR><TR><TD CLASS="l">1423</TD><TD>    protected synchronized static TradingClassHome getTradingClassHome() {</TD></TR><TR CLASS="z"><TD CLASS="l">1424</TD><TD>         if(theTradingClassHome == null) {</TD></TR><TR><TD CLASS="l">1425</TD><TD>             try {</TD></TR><TR CLASS="z"><TD CLASS="l">1426</TD><TD>                 theTradingClassHome = (TradingClassHome) HomeFactory.getInstance().findHome(TradingClassHome.HOME_NAME);</TD></TR><TR><TD CLASS="l">1427</TD><TD>             }</TD></TR><TR CLASS="z"><TD CLASS="l">1428</TD><TD>             catch (com.cboe.infrastructureServices.foundationFramework.exceptionHandling.CBOELoggableException e) {</TD></TR><TR CLASS="z"><TD CLASS="l">1429</TD><TD>                 Log.alarm(&#34; UserServiceSmartCacheProxy couldn't initialize the static trading class home&#34;);</TD></TR><TR><TD CLASS="l">1430</TD><TD>             }</TD></TR><TR><TD CLASS="l">1431</TD><TD>         }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="3a">1432</A></TD><TD>         return theTradingClassHome;</TD></TR><TR><TD CLASS="l">1433</TD><TD>     }</TD></TR><TR><TD CLASS="l">1434</TD><TD> </TD></TR><TR><TD CLASS="l">1435</TD><TD>    protected TradingClass getTradingClass(int classKey) {</TD></TR><TR CLASS="z"><TD CLASS="l">1436</TD><TD>        TradingClass tradingClass = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1437</TD><TD>        if (getTradingClassHome() != null) {</TD></TR><TR><TD CLASS="l">1438</TD><TD>            try {</TD></TR><TR CLASS="z"><TD CLASS="l">1439</TD><TD>                tradingClass = getTradingClassHome().findByKey(classKey);</TD></TR><TR><TD CLASS="l">1440</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">1441</TD><TD>            catch (NotFoundException e) {</TD></TR><TR CLASS="z"><TD CLASS="l">1442</TD><TD>                String errMsg = &#34; Can not find the trading calss for the classKey=&#34; + classKey;</TD></TR><TR CLASS="z"><TD CLASS="l">1443</TD><TD>                Log.exception(this,  e.getMessage() + errMsg, e);</TD></TR><TR><TD CLASS="l">1444</TD><TD>            }</TD></TR><TR><TD CLASS="l">1445</TD><TD>        }</TD></TR><TR><TD CLASS="l">1446</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1447</TD><TD>        return tradingClass;</TD></TR><TR><TD CLASS="l">1448</TD><TD>    }</TD></TR><TR><TD CLASS="l">1449</TD><TD> </TD></TR><TR><TD CLASS="l">1450</TD><TD>}</TD></TR></TABLE><P></P><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="nv">[<A HREF="../Coverage.html">all classes</A>][<A HREF="109.html">com.cboe.proxy.businessServices</A>]</TD></TR><TR><TD CLASS="tl"><A HREF="http://www.eclemma.org/support.html">EMMA 2.0.5312 EclEmma Fix 2</A> (C) Vladimir Roubtsov</TD></TR></TABLE></BODY></HTML>