TESTSUITENAME,C2 Matching Algorithm Enhancements Test Plan
PRINTOUTPUTHEADING,
STARTPOINT,
SALOGIN,$SA1,$SA1,TRUE,TRUE,Comment


COMMENT, Test Cases:18

COMMENT, Test Environment Setup
SELECTCLASSESANDPRODUCTS,$SA1,$SESSION1,7,1,CLASS,1,PRODUCT,$HYBRIDCLASSLIST1,TRUE,TRUE,Comment
VERIFYSESSIONSTATE,$SA1,$SESSION1,2,TRUE,TRUE,Comment

COMMENT, User Setup
CREATEUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,M,1,Automated API $MM2 User,FALSE,TRUE,TRUE,New User for Clearing Firm "695" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$MM2EXCHANGE,$MM2,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,X,1,Automated API $CUST1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "939" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$CUST1EXCHANGE,$CUST1,X,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,M,1,Automated API $MM3 User,FALSE,TRUE,TRUE,New User for Clearing Firm "695" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$MM3EXCHANGE,$MM3,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,M,1,Automated API $MM4 User,FALSE,TRUE,TRUE,New User for Clearing Firm "695" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$MM4EXCHANGE,$MM4,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,X,1,Automated API $CUST2 User,FALSE,TRUE,TRUE,New User for Clearing Firm "939" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$CUST2EXCHANGE,$CUST2,X,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,M,1,Automated API $MM1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "695" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$MM1EXCHANGE,$MM1,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$MM5,$MM5EXCHANGE,$MM5EXECFIRM,M,1,Automated API $MM5 User,FALSE,TRUE,TRUE,New User for Clearing Firm "695" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$MM5EXCHANGE,$MM5,M,TRUE,TRUE,TRUE,Comment
CREATEUSER,$SA1,$HOMT1,$HOMT1EXCHANGE,$HOMT1EXECFIRM,A,1,Automated API $HOMT1 User,FALSE,TRUE,TRUE,New User for Clearing Firm "671" and Exchange "CBOE2" !
VERIFYUSEREXISTENCE,$SA1,$HOMT1EXCHANGE,$HOMT1,A,TRUE,TRUE,TRUE,Comment
TRADERLOGIN,$MM2,$MM2,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$CUST1,$CUST1,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$MM3,$MM3,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$MM4,$MM4,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$CUST2,$CUST2,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$MM1,$MM1,$CASANDPORT,TRUE,TRUE,Comment
TRADERLOGIN,$MM5,$MM5,$CASANDPORT,TRUE,TRUE,Comment
OMTLOGIN,$HOMT1,$HOMT1,$CASANDPORT,TRUE,TRUE,Comment


COMMENT, Trading Property Setup
SETAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,4:false;-8:false;5:false,TRUE,TRUE,Comment
PAUSE,2000
VERIFYAUCTIONENABLED,$SA1,$SESSION1,$CLASS1,4:false;-8:false;5:false,TRUE,TRUE,Comment
SETPDPMRIGHTSSCALES,$SA1,$SESSION1,$CLASS1,0-1:1.00;1-2:0.50;2-9999:0.40,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPDPMRIGHTSSCALES,$SA1,$SESSION1,$CLASS1,0-1:1.00;1-2:0.50;2-9999:0.40,TRUE,TRUE,Comment
SETALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,0=1;4;22,TRUE,TRUE,Comment
PAUSE,2000
VERIFYALLOCATIONSTRATEGIES,$SA1,$SESSION1,$CLASS1,0=1;4;22,TRUE,TRUE,Comment
PAUSE,2000
REFRESHALLOCATIONSTRATEGYFORCLASS,$SA1,$SESSION1,$CLASS1,TRUE,TRUE,Comment

COMMENT, Routing Property Setup
SETHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM3EXCHANGE,$CUST2EXECFIRM,$CLASS1,$HOMT1,TRUE,TRUE,Comment
PAUSE,2000
VERIFYHELPDESKDEFAULTDESTINATION,$SA1,$SESSION1,$MM3EXCHANGE,$CUST2EXECFIRM,$CLASS1,$HOMT1:7,TRUE,TRUE,Comment
SETELIGIBLEPDPM,$SA1,$SESSION1,C,TRUE,TRUE,TRUE,Comment
PAUSE,2000
VERIFYELIGIBLEPDPM,$SA1,$SESSION1,C,TRUE,TRUE,TRUE,Comment

COMMENT, Pre-Test Settings
SUBSCRIBECURRENTMARKETV4,$MM1,$CLASS1,$CLASS1PRODUCT1,0,TRUE,TRUE,Comment
SUBSCRIBECURRENTMARKET,$MM1,$SESSION1,$CLASS1,$CLASS1PRODUCT1,TRUE,TRUE,Comment

COMMENT, Test Case 1:Enter MM1 order first then PMM(Primary Market maker) Order then enter a customer Order Verify that trading and allocation is taking place based on allocation stratergy ie customer first then PMM 50% allocation then price time
SETAFFILIATEDFIRMFORUSER,$SA1,$MM1,$MM1EXCHANGE,$MM1AFFILIATE,TRUE,TRUE,$SA1 sets Firm Affiliation for user $MM1
SETAFFILIATEDFIRMFORUSER,$SA1,$MM2,$MM2EXCHANGE,$MM2AFFILIATE,TRUE,TRUE,$SA1 sets Firm Affiliation for user $MM2
SETPDPMASSIGNMENT,$SA1,$CUST1,$SESSION1,$MM3EXCHANGE,$CUST2EXECFIRM,$CLASS1,JIN,Default,ALL,TRUE,TRUE,Comment
PAUSE,2000
VERIFYPDPMASSIGNMENT,$SA1,$CUST1,$SESSION1,$MM3EXCHANGE,$CUST2EXECFIRM,$CLASS1,JIN,Default,ALL,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,1,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,1,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,2,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,3,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,3,TRUE,TRUE,Comment
SETPRODUCTSTATEBYPRODUCT,$SA1,$SESSION1,$CLASS1PRODUCT1,$CLASS1,4,TRUE,TRUE,Comment
PRODUCTSTATEQUERY,$SA1,$SESSION1,$CLASS1PRODUCT1,4,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,WOX,3807,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TXT,1814,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,KQD,436,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,KGJ,4610,JIN,*,$CUST1EXCHANGE,$CUST1,200,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,KQD,436,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TXT,1814,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,WOX,3807,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TXT,1814,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,WOX,3807,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment

COMMENT, Test Case 2:Enter a customer Order then enter MM3 order then MM4 order then enter a PMM order Verify that trading and allocation is taking place based on allocation stratergy ie customer allocate first(100%) then PMM 40% allocation then price-time allocation(in this case Market maker came first so he will get all the contracts then only PMM will particiapte again)
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$CUST2
CLEARALLCALLBACKS,$MM3
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,OFD,9963,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,VRT,2837,ABC,*,$MM3EXCHANGE,$MM3,150,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,EPL,8578,ABC,*,$MM4EXCHANGE,$MM4,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOS,9090,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,FWJ,2376,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,OFD,9963,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOS,9090,ABC,*,0,20,1,80,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,VRT,2837,ABC,*,0,30,1,120,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SOS,9090,ABC,*,20,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,EPL,8578,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,VRT,2837,ABC,*,30,$SESSION1,1,TRUE,TRUE,Comment

COMMENT, Test Case 3:Quote enter first and then Customer then PDPM user enter order. verify allocation takes place based on c2 algorithim ie customer first then PMM get 50% allocation then price time allocation will takes place
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM3
QUOTE,$MM3,2,1,20,100,2,1,30,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,VJC,2677,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MWO,9672,ABC,*,$MM1EXCHANGE,$MM1,300,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,500,2,1,20,100,2,1,30,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,MOT,9174,JIN,*,$CUST1EXCHANGE,$CUST1,400,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,VJC,2677,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MWO,9672,ABC,*,0,100,1,200,1,2,1,20,TRUE,TRUE,Comment
QUOTEFILLVERIFICATION,$MM3,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id..,TRUE,TRUE,Comment
QUOTECANCEL,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MWO,9672,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 4:Enter 2 regular Market Maker order then 1 PMM order then enter a customer Order Verify that trading and allocation is taking place based on allocation stratergy ie customer allocate first (100%) then 40% allocation for PMM then price time PMM should not participate in the price time alloactiion
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM5,2,1,20,100,2,1,30,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,BPU,5758,ABC,*,$MM4EXCHANGE,$MM4,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DBH,9876,ABC,*,$MM1EXCHANGE,$MM1,200,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,QYK,8100,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,YMS,5389,JIN,*,$CUST1EXCHANGE,$CUST1,400,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,QYK,8100,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DBH,9876,ABC,*,0,80,1,120,1,2,1,20,TRUE,TRUE,Comment
QUOTEFILLVERIFICATION,$MM5,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id..,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,BPU,5758,ABC,*,0,20,1,80,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,DBH,9876,ABC,*,80,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,BPU,5758,ABC,*,20,$SESSION1,1,TRUE,TRUE,Comment
QUOTECANCEL,$MM5,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM5,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 5:Enter a customer Order then enter a PMM order then enter two regular MM orders. Verify that trading and allocation is taking place based on allocation stratergy ie customer allocate first(100%) then PMM 40% allocation then price-time allocation(in this case PMM came first so PMM willget 44 contrancts for being first and MM1 get 40 contracts for being second in time sequence
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$CUST2
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$MM3
CLEARALLCALLBACKS,$MM4
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,XVH,2512,ABC,*,$CUST2EXCHANGE,$CUST2,10,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SYM,116,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,MCC,3282,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RUF,6916,ABC,*,$MM4EXCHANGE,$MM4,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,SJU,2790,JIN,*,$CUST1EXCHANGE,$CUST1,150,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,XVH,2512,ABC,*,0,0,3,10,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,SYM,116,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,MCC,3282,ABC,*,0,60,1,40,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,MCC,3282,ABC,*,60,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,RUF,6916,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 6:Enter a customer Order then enter a PMM order then enter MM3 order. Customer enter an Incoming Sell Order. Verify that trading and allocation is taking place based on allocation stratergy ie customer allocate first(100%) then PMM 40% allocation then price-time allocation(in this case PMM came first so he will get all the rest of the orders there is no incomming the market maker can particiapte)
CLEARALLCALLBACKS,$MM4
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$CUST2
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,GPH,3671,ABC,*,$CUST2EXCHANGE,$CUST2,10,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JOR,8591,ABC,*,$MM1EXCHANGE,$MM1,150,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,IYC,6026,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,F,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,RCJ,8510,JIN,*,$CUST1EXCHANGE,$CUST1,150,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,GPH,3671,ABC,*,0,0,3,10,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JOR,8591,ABC,*,0,10,1,140,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,JOR,8591,ABC,*,10,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,IYC,6026,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 7:Enter two customer Order and a PMM order. Both customer will get allocation first and then remaining will goes to PMM
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$CUST2
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$MM2
CLEARALLCALLBACKS,$MM3
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HOZ,3071,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,KRV,6716,JIN,*,$CUST1EXCHANGE,$CUST1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,DBQ,5204,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,DHD,6316,ABC,*,$CUST1EXCHANGE,$CUST1,250,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,KRV,6716,JIN,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,DBQ,5204,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HOZ,3071,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,HOZ,3071,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment

COMMENT, Test Case 8:Customer at top of the book enter more than one PMM orders and 1 MM order. Customer gets all then PDPM gets 40% and the allocations one PMM will participants other one will cancel
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,TQS,5948,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,FEC,6462,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RTX,1974,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,QFA,4476,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,TOL,8082,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,FEC,6462,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,RTX,1974,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,TQS,5948,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,QFA,4476,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 9:Customer is AON. PDPM is same price point. Customer AON will not get allocated and not tradable
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,NIN,6009,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,2,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NOR,6417,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,BEQ,8735,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,BWE,1647,ABC,*,$CUST1EXCHANGE,$CUST1,250,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,NOR,6417,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,BEQ,8735,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,NIN,6009,ABC,*,0,50,1,50,1,2,1,20,FALSE,TRUE,Comment
ORDERCANCELNOWAIT,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,BWE,1647,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,NIN,6009,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 10:PDPM is AON. PDPM is same price point as customer and MM1. PDPM will get allocated only after MM1
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$MM3
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PRF,7600,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,2,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,HDX,6390,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,RMQ,2109,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,GSA,3638,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,HDX,6390,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,RMQ,2109,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,PRF,7600,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 11:Incomming 2 customer order in sell side with differnt price point Customer PMM I-order and MM Order in buy side will get allocation based on PMM allocation and Price time allocation
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$MM2
CLEARALLCALLBACKS,$MM3
CLEARALLCALLBACKS,$MM4
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,OFK,8690,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KUH,5424,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,I,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,MLC,3620,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,VTE,9511,ABC,*,$MM4EXCHANGE,$MM4,100,$CLASS1PRODUCT1,S,2,1,30,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,FEX,4527,JIN,*,$CUST1EXCHANGE,$CUST1,200,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,MLC,3620,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KUH,5424,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,OFK,8690,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,KUH,5424,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,OFK,8690,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,VTE,9511,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 12:PDPM at multiple price point Verify that c2 allcoation willtakes place
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,GQH,8341,JIN,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,IXW,985,ABC,*,$MM4EXCHANGE,$MM4,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,UQC,7012,JIN,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,15,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,BKQ,7188,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,I,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,IEA,9545,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,UQC,7012,JIN,*,0,0,3,100,1,2,1,15,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,IXW,985,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,GQH,8341,JIN,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,BKQ,7188,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 13:Enter two PMM with AON contingency and Incomming order IOC will trade with One MM and PMM
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$MM3
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AUT,2244,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,2,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,PUM,5189,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,2,1,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,UOE,6056,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,PQY,9023,JIN,*,$CUST1EXCHANGE,$CUST1,200,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,4,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,UOE,6056,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,AUT,2244,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,PUM,5189,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
CURRENTMARKETV4BESTMARKETQUERY,$MM1,CBOE2,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 14:Incoming marketable order with FOK contingency. Order trades and Follow the c2 allocation stratergy(PMM allocation Price -time allocation) and FOK will cancel
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
QUOTE,$MM4,2,1,20,100,2,1,30,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,DPJ,1338,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MAH,3621,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,ZKN,4741,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,3,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,KOE,1030,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,DPJ,1338,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MAH,3621,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
QUOTEFILLVERIFICATION,$MM4,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,20,User Assigned Id..,TRUE,TRUE,Comment
QUOTECANCEL,$MM4,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM4,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 15:Resting order with Reserve contingency. Incoming order trades based on c2 allocation stratergy and Price time
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$CUST1
QUOTE,$MM3,2,1,00,100,2,1,20,100,$CLASS1PRODUCT1,$SESSION1,User Assigned Id..,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,XGB,2624,ABC,*,$CUST2EXCHANGE,$CUST2,200,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,16,1,0,00,100,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TEV,6822,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,VEC,9451,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,TEV,6822,ABC,*,0,0,3,100,1,2,1,00,TRUE,TRUE,Comment
QUOTEFILLVERIFICATION,$MM3,$CLASS1PRODUCT1,$SESSION1,0,100,1,2,1,00,User Assigned Id..,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,XGB,2624,ABC,*,0,100,1,100,1,2,1,00,TRUE,TRUE,Comment
QUOTECANCEL,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
QUOTECANCELVERIFICATION,$MM3,$SESSION1,$CLASS1PRODUCT1,2,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,XGB,2624,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 16:Two Regular Market Maker enter sell order and customer enter a Reserve order then PMM and Customer enter sell order. Verify the Allocation strategy
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,OHH,479,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,DKO,9347,ABC,*,$MM4EXCHANGE,$MM4,200,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,16,1,0,00,100,-,-,-,$MM4,$MM4,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FNT,8859,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,SDJ,3805,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,ERQ,2022,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,SDJ,3805,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,DKO,9347,ABC,*,0,100,1,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FNT,8859,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,OHH,479,ABC,*,0,50,1,50,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FNT,8859,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,OHH,479,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,DKO,9347,ABC,*,100,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case 17:Enter MM1 order first then two PMM(Primary Market maker) Order then enter a customer Order Verify that trading and allocation is taking place based on allocation stratergy ie customer first then PMM 40% allocation then price time and allocated pmm orders will be divided based on time
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$CUST2
CLEARALLCALLBACKS,$MM1
CLEARALLCALLBACKS,$MM2
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,DDU,1049,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM3,$MM3,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FLZ,3147,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,QCJ,5087,ABC,*,$MM4EXCHANGE,$MM4,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM4,$MM4,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,RLO,6823,ABC,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$MM2,$MM2,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,VOY,4921,ABC,*,$CUST2EXCHANGE,$CUST2,100,$CLASS1PRODUCT1,S,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST2,$CUST2,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,YRT,2452,JIN,*,$CUST1EXCHANGE,$CUST1,400,$CLASS1PRODUCT1,B,2,1,20,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$CUST2,$CUST2EXCHANGE,$CUST2EXECFIRM,VOY,4921,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,FLZ,3147,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,RLO,6823,ABC,*,0,80,1,20,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,DDU,1049,ABC,*,0,0,3,100,1,2,1,20,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,QCJ,5087,ABC,*,0,20,1,80,1,2,1,20,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,RLO,6823,ABC,*,80,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,QCJ,5087,ABC,*,20,$SESSION1,1,TRUE,TRUE,Comment

COMMENT, Test Case 18:PDPM at multiple price point Verify that c2 allcoation willtakes place. All orders have contingency Reserve orders
CLEARALLCALLBACKS,$CUST1
CLEARALLCALLBACKS,$MM1
ORDER,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,CBK,6958,ABC,*,$MM4EXCHANGE,$MM4,200,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,16,1,0,00,50,-,-,-,$MM4,$MM4,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MDQ,2034,ABC,*,$MM1EXCHANGE,$MM1,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,16,1,0,00,80,-,-,-,$MM1,$MM1,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,ZPE,6111,JIN,*,$MM2EXCHANGE,$MM2,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,16,1,0,00,50,-,-,-,$MM2,$MM2,C,FALSE,M,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,IBQ,4087,ABC,*,$MM3EXCHANGE,$MM3,100,$CLASS1PRODUCT1,B,2,1,00,D,21/12/2003 6:00:00.0,16,1,0,00,50,-,-,-,$MM3,$MM3,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDER,$CUST1,$CUST1EXCHANGE,$CUST1EXECFIRM,HYU,3601,JIN,*,$CUST1EXCHANGE,$CUST1,300,$CLASS1PRODUCT1,S,2,1,00,D,21/12/2003 6:00:00.0,1,1,0,00,0,-,-,-,$CUST1,$CUST1,C,FALSE,C,U,0,-,-,$SESSION1,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,IBQ,4087,ABC,*,0,50,1,50,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MDQ,2034,ABC,*,0,20,1,80,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,ZPE,6111,JIN,*,0,50,1,50,1,2,1,00,TRUE,TRUE,Comment
ORDERFILLVERIFICATION,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,CBK,6958,ABC,*,0,80,1,120,1,2,1,00,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM3,$MM3EXCHANGE,$MM3EXECFIRM,IBQ,4087,ABC,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM1,$MM1EXCHANGE,$MM1EXECFIRM,MDQ,2034,ABC,*,20,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM2,$MM2EXCHANGE,$MM2EXECFIRM,ZPE,6111,JIN,*,50,$SESSION1,1,TRUE,TRUE,Comment
ORDERCANCELNOWAIT,$MM4,$MM4EXCHANGE,$MM4EXECFIRM,CBK,6958,ABC,*,80,$SESSION1,1,TRUE,TRUE,Comment
TOPOFBOOKVERIFICATION,$MM1,$SESSION1,$CLASS1PRODUCT1,0,1,0,00,0,1,0,00,TRUE,TRUE,Comment

COMMENT, Test Case:Cleaning Up Task
TRADERLOGOUT,$MM3,TRUE,TRUE,Comment
TRADERLOGOUT,$MM2,TRUE,TRUE,Comment
TRADERLOGOUT,$MM1,TRUE,TRUE,Comment
TRADERLOGOUT,$MM4,TRUE,TRUE,Comment
TRADERLOGOUT,$MM5,TRUE,TRUE,Comment
OMTLOGOUT,$HOMT1,TRUE,TRUE,Comment
TRADERLOGOUT,$CUST2,TRUE,TRUE,Comment
TRADERLOGOUT,$CUST1,TRUE,TRUE,Comment

SALOGOUT,$SA1,TRUE,TRUE,Comment
ENDPOINT,
PRINTOUTPUTSUMMARY,