





Ratio Spreads Test Plan







11/5/2008 2:20:00 PM
Christopher Hield
Ashraf Ansari


Table of Contents

1.	POSITIVE TESTS: W_MAIN/HYBRID, 2 LEG OPTION STRATEGIES, COA ON	16
1.1.	Default Pre-Test Conditions	16
Section 1: COA on Defined Side	16
1.2.	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, COA Does Not Start, Order Books	16
1.3.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books	17
1.4.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs	17
1.5.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	18
1.6.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1	20
1.7.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely, Order Books	21
1.8.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other	22
1.9.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books	23
Section 2: Re-COA on Defined Side	23
1.10.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books	24
1.11.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds with MKT Order, Re-COA Ends, Order Trades with Auction Response	25
1.12.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books	26
1.13.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades	28
Section 3:  COA on Opposite Side	29
1.14.	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, COA Does Not Start, Order Books	29
1.15.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books	29
1.16.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs	30
1.17.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order	31
1.18.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price	32
1.19.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely	33
1.20.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other	34
1.21.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books	35
Section 4:  Re-COA on Opposite Side	36
1.22.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books	36
1.23.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds, Re-COA Ends, Order Trades with Auction Response	37
1.24.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books	39
1.25.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades	40
Section 5:  AIM	41
1.26.	2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, AIM auction ends, Order Trades With Quotes on Legs	41
1.27.	2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Auction Response, AIM auction ends, Auction Response Trades against Order	42
1.28.	2-Leg Strategy, Setup Valid Leg Market, Enter AIM Order, AIM auction begins, MM2 Updates Quote on Legs, AIM auction ends prematurely, AIM order Trades	43
1.29.	2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Better-Priced AIM order on Strategy, AIM auction ends prematurely, ORD1 Trades, Second AIM Auction Starts and Ends, ORD2 Trades	45
1.30.	2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, Product moves to closed state, AIM auction ends prematurely, Order Trades at Ended Price	47
Section 6:  Cross-Products	48
1.31.	Default Pre-test conditions	48
1.32.	2-leg Strategy, No Valid Leg Market, Enter Same Side Strategy Order, Order Routes to PAR	48
1.33.	2-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, During Auction Enter Subsequent Opposite Side Strategy Order, ORD1 Trades with ORD2	49
1.34.	2-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, MM2 Enters Auction Response, COA Ends, Order Trades With Auction Response	50
1.35.	2-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Trades with Quotes on Legs	51
1.36.	2-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Starts, Enter Same Side Order During Auction, Order Joins Auction, Auction Ends, Orders Trade	52
1.37.	2-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, AIM Auction Ends, Orders Trade	53
1.38.	2-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, MM2 Enters Auction Response, AIM Auction Ends, Auction Response Trades against Order	54
1.39.	2-leg Strategy, Setup Valid Leg Market, Enter AON Orders on Both Legs, AON Orders Book, Enter Same-Side Strategy Order, COA Starts, COA Ends, Strategy Order Trades with AON Orders	55
1.40.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite-Side IOC Contingency Strategy Order, COA Starts, COA Ends, Order Trades Partially, Remaining Quantity Cancels	56
2.	POSITIVE TESTS: W_MAIN/HYBRID, 3 LEG OPTION STRATEGIES, COA ON	58
2.1.	Default Pre-Test Conditions	58
Section 1: COA on Defined Side	58
2.2.	3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, COA Does Not Start, Order Books	58
2.3.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books	59
2.4.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs	60
2.5.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	61
2.6.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price	62
2.7.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely, Order Books	63
2.8.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other	64
2.9.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books	65
Section 2: Re-COA on Defined Side	66
2.10.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books	66
2.11.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds with MKT Order, Re-COA Ends, Order Trades with Auction Response	68
2.12.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books	69
2.13.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades	71
Section 3:  COA on Opposite Side	72
2.14.	3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, COA Does Not Start, Order Books	72
2.15.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books	73
2.16.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs	73
2.17.	3-Leg Strategy, Opposite Side Order, Valid Leg Market, COA Begins, No Responses, Order Books, Enter Subsequent Same  Side Order to Trade with the Resting Opposite Side Order	75
2.18.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price	76
2.19.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely	77
2.20.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other	78
2.21.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books	79
Section 4:  Re-COA on Opposite Side	80
2.22.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books	80
2.23.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds, Re-COA Ends, Order Trades with Auction Response	82
2.24.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books	83
2.25.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades	85
Section 5:  AIM	86
2.26.	3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, AIM auction ends, Order Trades With Quotes on Legs	86
2.27.	3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Auction Response, AIM auction ends, Auction Response Trades against Order	87
2.28.	3-Leg Strategy, Setup Valid Leg Market, Enter AIM Order, AIM auction begins, MM2 Updates Quote on Legs, AIM auction ends prematurely, AIM order Trades	89
2.29.	3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Better-Priced AIM order on Strategy, AIM auction ends prematurely, ORD1 Trades, Second AIM Auction Starts and Ends, ORD2 Trades	90
2.30.	3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, Product moves to closed state, AIM auction ends prematurely, Order Trades at Ended Price	92
Section 6:  Cross-Products	93
2.31.	Default Pre-test conditions	93
2.32.	3-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, COA Ends, Order Routes to PAR	94
2.33.	3-leg Strategy, Setup Valid Leg Market, Enter Same-Side Strategy Order, COA Starts, COA Ends, Order Trades with Quotes on Legs	95
2.34.	3-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, MM2 Enters Auction Response, COA Ends, Order Trades With Auction Response	96
2.35.	3-leg Strategy, Setup Valid Leg Market, Enter Opposite-Side Strategy Order, COA Starts, During Auction Enter Subsequent Same-Side Strategy Order, COA Ends, Orders Trade with Each Other	97
2.36.	3-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Starts, Enter Same Side Order During Auction, Order Joins Auction, Auction Ends, Orders Trade	98
2.37.	3-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, AIM Auction Ends, Orders Trade	99
2.38.	3-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, MM2 Enters Auction Response, AIM Auction Ends, Auction Response Trades against Order	100
2.39.	3-leg Strategy, Setup Valid Leg Market, Enter AON Orders on Both Legs, AON Orders Book, Enter Same-Side Strategy Order, COA Starts, COA Ends, Strategy Order Trades with AON Orders	102
2.40.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite-Side IOC Contingency Strategy Order, COA Starts, COA Ends, Order Trades Partially, Remaining Quantity Cancels	103
3.	POSITIVE TESTS: W_MAIN/HYBRID, 4 LEG OPTION STRATEGIES, COA ON	105
3.1.	Default Pre-Test Conditions	105
Section 1: COA on Defined Side	105
3.2.	4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, COA Does Not Start, Order Books	105
3.3.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books	106
3.4.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs	107
3.5.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	108
3.6.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends Prematurely, Auction Response Trades with Order	110
3.7.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely, Order Books	111
3.8.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other	112
3.9.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books	113
Section 2: Re-COA on Defined Side	114
3.10.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books	114
3.11.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds with MKT Order, Re-COA Ends, Order Trades with Auction Response	116
3.12.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books	118
3.13.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades	119
Section 3:  COA on Opposite Side	120
3.14.	4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, COA Does Not Start, Order Books	121
3.15.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books	121
3.16.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs	122
3.17.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order	123
3.18.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price	125
3.19.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely	126
3.20.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other	127
3.21.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books	128
Section 4:  Re-COA on Opposite Side	129
3.22.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books	130
3.23.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds, Re-COA Ends, Order Trades with Auction Response	131
3.24.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books	133
3.25.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades	134
Section 5:  AIM	136
3.26.	4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, AIM auction ends, Order Trades With Quotes on Legs	136
3.27.	4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Auction Response, AIM auction ends, Auction Response Trades against Order	137
3.28.	4-Leg Strategy, Setup Valid Leg Market, Enter AIM Order, AIM auction begins, MM2 Updates Quote on Legs, AIM auction ends prematurely, AIM order Trades	139
3.29.	4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Better-Priced AIM order on Strategy, AIM auction ends prematurely, ORD1 Trades, Second AIM Auction Starts and Ends, ORD2 Trades	140
3.30.	4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, Product moves to closed state, AIM auction ends prematurely, Order Trades at Ended Price	142
Section 6:  Cross-Products	144
3.31.	Default Pre-test conditions	144
3.32.	4-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, COA Ends, Order Routes to PAR	144
3.33.	4-leg Strategy, Setup Valid Leg Market, Enter Same-Side Strategy Order, COA Starts, COA Ends, Order Trades with Quotes on Legs	145
3.34.	4-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, MM2 Enters Auction Response, COA Ends, Order Trades With Auction Response	146
3.35.	4-leg Strategy, Setup Valid Leg Market, Enter Opposite-Side Strategy Order, COA Starts, During Auction Enter Subsequent Same-Side Strategy Order, COA Ends, Orders Trade with Each Other	147
3.36.	4-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Starts, Enter Same Side Order During Auction, Order Joins Auction, Auction Ends, Orders Trade	149
3.37.	4-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, AIM Auction Ends, Orders Trade	150
3.38.	4-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, MM2 Enters Auction Response, AIM Auction Ends, Auction Response Trades against Order	151
3.39.	4-leg Strategy, Setup Valid Leg Market, Enter AON Orders on Both Legs, AON Orders Book, Enter Same-Side Strategy Order, COA Starts, COA Ends, Strategy Order Trades with AON Orders	152
3.40.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite-Side IOC Contingency Strategy Order, COA Starts, COA Ends, Order Trades Partially, Remaining Quantity Cancels	154
4.	ONE_MAIN	156
PART ONE:  2-LEG SCENARIOS	156
4.1.	Default Pre-test Conditions	156
Section 1:  Defined Side	156
4.2.	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	156
4.3.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	156
4.4.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	157
4.5.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	158
Section 2:  Opposite Side	159
4.6.	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	159
4.7.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	159
4.8.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	160
4.9.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order	161
PART TWO:  3-LEG SCENARIOS	162
4.10.	Default Pre-Test Conditions	162
Section 1: Defined Side	162
4.11.	3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	162
4.12.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	163
4.13.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	164
4.14.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	165
Section 2:  Opposite Side	166
4.15.	3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	166
4.16.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	166
4.17.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	167
4.18.	3-Leg Strategy, Opposite Side Order, Valid Leg Market, Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order	168
PART THREE: 4-LEG SCENARIOS	169
4.19.	Default Pre-Test Conditions	169
Section 1: Defined Side	169
4.20.	4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	169
4.21.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	170
4.22.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	171
4.23.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order - Split Price	172
Section 2:  Opposite Side	173
4.24.	4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	173
4.25.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	174
4.26.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	175
4.27.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price	176
5.	CFE_MAIN	178
PART ONE:  2-LEG SCENARIOS	178
5.1.	Default Pre-test Conditions	178
Section 1:  Defined Side	178
5.2.	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	178
5.3.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	178
5.4.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	179
5.5.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	180
Section 2:  Opposite Side	181
5.6.	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	181
5.7.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	182
5.8.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	182
5.9.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order	183
PART TWO:  3-LEG SCENARIOS	184
5.10.	Default Pre-Test Conditions	184
Section 1: Defined Side	184
5.11.	3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	184
5.12.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	185
5.13.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	186
5.14.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	187
Section 2:  Opposite Side	188
5.15.	3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	188
5.16.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	188
5.17.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	189
5.18.	3-Leg Strategy, Opposite Side Order, Valid Leg Market, Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price	190
PART THREE: 4-LEG SCENARIOS	191
5.19.	Default Pre-Test Conditions	191
Section 1: Defined Side	191
5.20.	4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	192
5.21.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	192
5.22.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	193
5.23.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order - Split Price	194
Section 2:  Opposite Side	195
5.24.	4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	195
5.25.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	196
5.26.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	197
5.27.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price	198
6.	COF_MAIN	200
PART ONE:  2-LEG SCENARIOS	200
6.1.	Default Pre-test Conditions	200
Section 1:  Defined Side	200
6.2.	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	200
6.3.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	200
6.4.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	201
6.5.	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	202
Section 2:  Opposite Side	203
6.6.	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	203
6.7.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	204
6.8.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	204
6.9.	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order	205
PART TWO:  3-LEG SCENARIOS	206
6.10.	Default Pre-Test Conditions	206
Section 1: Defined Side	206
6.11.	3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	206
6.12.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	207
6.13.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	208
6.14.	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order	209
Section 2:  Opposite Side	210
6.15.	3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	210
6.16.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	210
6.17.	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	211
6.18.	3-Leg Strategy, Opposite Side Order, Valid Leg Market, Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price	212
PART THREE: 4-LEG SCENARIOS	213
6.19.	Default Pre-Test Conditions	213
Section 1: Defined Side	213
6.20.	4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books	214
6.21.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books	214
6.22.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs	215
6.23.	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order - Split Price	216
Section 2:  Opposite Side	217
6.24.	4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books	217
6.25.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books	218
6.26.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs	219
6.27.	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price	220
7.	MISCELLANEOUS CHECKS	222
7.1.	Creating a new strategy when there is an existing Strategy	222
7.2.	Creating a new strategy of a higher-denomination when an existing Strategy of a lower-common-denominator exists	222
7.3.	Testing Leg Limits: Create an 8-leg strategy, Fill All Legs, Enter Same-Side Strategy MKT Order, Order is Rejected, Strategy Product Remains in "Closed" State	223
7.4.	Product States:  3-Leg Strategy, Product in Pre-Open State, Setup Valid Leg Market, Enter Same Side Order, Order Should Book	223
7.5.	Leg Testing:  4-Leg Strategy, Setup Valid Leg Market on 2 legs ONLY and No Market on Other 2 legs, Enter Same Side Order, Order Should Book	224
7.6.	Split-Pricing:  Strategy Order Fill with Split Pricing should NOT result in either Split Price being outside BBO	225



1. Positive Tests: W_MAIN/Hybrid, 2 Leg Option Strategies, COA On
1.1.  	Default Pre-Test Conditions
* Set StrategyRatioValidatorHome.xml to allow ratio spreads by editing this property:
* <isValidatorOn>false</isValidatorOn>
* Routing Properties: COA Enabled for Strategy
* Set "COA Eligible" to "True" and "OriginCode" to "[*]"

* Trading Properties:
* Auction Enabled for Strategy
* Set to "True"
* Auction Enabled for Internalization
* Set to "True"

* BD1 Create Strategy Product
* Option Leg 1: Buy 13
* Option Leg 2: Sell 7
* Results:  Creation should be successful

Section 1: COA on Defined Side
1.2.  	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, COA Does Not Start, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
* COA does not start

Check 'Market Display'
==>
* Strategy Order books at:  -$42.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


1.3.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display' for Strategy
==>
* COA Auction ends with no responses
* Strategy Order books at: -$42.00x10 - $0.00x0
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


1.4.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$43.80 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$43.60x10
* MM1 receives quote fill for Option Leg 1: $8.20x130
* MM1 receives quote fill for Option Leg 2: $9.00x70
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x870
* Resulting Option Leg 1 market: $9.00x930 & $9.20x1000
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


1.5.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$41.60 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Market Display'
==>
* Strategy Order books at -$41.60x10 - $0.00x0
6
BD2 Enter Opposite Side Strategy Order
ORD2: $41.60 @ Qty:5, Origin = 'C'
* COA Begins - MM1 receives auction notification
7
Check 'Status Window'
==>
* COA Ends with no responses
* Strategy Order Trades with resting same-side order
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: -$41.60x5 - $0.00x0
9
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty


1.6.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receives Auction Notification
4
MM2 Enters Auction Response
OPPOSITE SIDE: $39.80 @ Qty:10, Origin = 'C'

5

==>
* COA Ends
6
Check 'Status Window' & 'Market Display'
==>
* Auction Response Trades with ORD1
* BD1 Receives Fill for Leg 1:  Buy 130 @ $8.01
* BD1 Receives Fill for Leg 2:  Sell 70 @ $9.19
* Leg 1 Current Market Unchanged:  $8.00x1000 & $8.20x1000
* Leg 2 Current Market Unchanged:  $9.00x1000 & $9.20x1000
7
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order:         -$39.80x10
* MM2 receives Auction Response fill for the strategy order: $39.80x10
8
MM1 Cancels Quotes
==>
* Leg 1 Current Market is: 0.00x0 - 0.00x0
* Leg 2 Current Market is: 0.00x0 - 0.00x0


1.7.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM2 Enters Better-Priced Quote During COA Auction
Leg 1:
Bid: $7.00x1000
Ask: $7.20x1000
Current Market for Leg 1 is $7.00x1000 - $7.20x1000

Check 'Market Display'
==>
* COA ends prematurely
* ORD1 Books
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0

1.8. 	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM1 Enters Opposite-Side MKT Order
ORD2:  MKT @ Qty: 10, Origin = 'C'
* COA Auction ends prematurely
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives ORD fill notification:  Defined 10 @ $-39.61
* MM1 receives ORD fill notification:  Opposite 10 @ $39.61
6
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00 x 0 - $0.00 x 0
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
7
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Leg 1 & Leg 2 is clear: $0.00x0 - $0.00x0

 	
1.9.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'

* COA auction begins
* MM1 receive Auction Notification
4
HD user Closes Strategy Product from SA GUI
==>
* COA Auction ends prematurely
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Strategy is: -$42.00 x 10 - $0.00 x 0
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
6
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
7
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Leg 1 & Leg 2 is clear: $0.00x0 - $0.00x0


Section 2: Re-COA on Defined Side

1.10. 2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $1.00x1000
Ask:  $1.20x1000
Current Market is 1.00 x 1000 - 1.20 x 1000


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
4
BD1 Enters Same Side Strategy Order
ORD1:  -$124.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 0 - 0.00 x 0

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: -$124.00x100 - $0.00x0
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
6
MM1 updates Quote on Leg 1
Bid: $10.00 x 1000
Ask: $10.10 x 1000
* Current Market for Leg 1 is: $10.00x1000 - $10.10x1000
* Derived Quote: Defined -$121.60 / Opposite $124.30
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
Check 'Status Window'
==>
* Re-COA ends
* ORD1 books
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.10x1000
* Leg 2: $1.00x1000 - $1.20x1000
9
BD1 Cancels ORD1
==>
* ORD1 is cancelled
* Strategy product Current Market: $0.00x0 - $0.00x0
10
MM1 Cancels quotes on Legs 1 & 2
==>
* Leg 1 and Leg 2 Current Market: $0.00x0 - $0.00x0



1.11. 2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds with MKT Order, Re-COA Ends, Order Trades with Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $1.00x1000
Ask:  $1.20x1000
Current Market is 1.00 x 1000 - 1.20 x 1000


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
4
BD1 Enters Same Side Strategy Order
ORD1:  -$124.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: -$124.00x100 - $0.00x0
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
6
MM1 updates Quote on Leg 1
Bid: $10.00 x 1000
Ask: $10.10 x 1000
* Current Market for Leg 1 is: $10.00x1000 - $10.10x1000
* Derived Quote: Defined -$121.60 / Opposite $124.30
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1, MM1, & MM2 receive Auction Notification
8
MM2 Responds to Re-COA Auction
Opposite Side: $124 @ Qty: 100, Origin = 'C'
* Re-COA Auction continues
9
Check 'Status Window' & 'Market Display'
==>
* Re-COA Auction ends
* BD1 receives fill notification for ORD1: -$124.00 @ 100
* MM2 receives fill notification for Auction Response:  $124.00 @ 100
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1:  $10.00x1000 - $10.10x1000
* Leg 2:  $1.00x1000 - $1.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1 & Leg 2 is clear


1.12. 2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $1.00x1000
Ask:  $1.20x1000
Current Market is 1.00 x 1000 - 1.20 x 1000


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
4
BD1 Enters Same Side Strategy Order
ORD1:  -$124.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 0 - 0.00 x 0

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Strategy is: -$124.00x100 - $0.00x0
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
6
MM1 updates Quote on Leg 1
Bid: $10.00 x 1000
Ask: $10.10 x 1000
* Current Market for Leg 1 is: $10.00x1000 - $10.10x1000
* Derived Quote: Defined -$121.60 / Opposite $124.30
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive Auction Notification
8
HD user Closes Strategy Product from SA GUI
==>
* Re-COA Auction ends prematurely
9
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.10x1000
* Leg 2: $1.00x1000 - $1.20x1000
10
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
11
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Leg 1 & Leg 2 is clear: $0.00x0 - $0.00x0


1.13. 2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: -$42.00x10 - $0.00x0
5
BD1 enters Cancel/Replace on ORD1
ORD2:  -$43.80 @ Qty:10, Origin = 'C'
* ORD1 cancels
* COA Auction begins for ORD2
* MM1 receives Auction Notification
6
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$43.60x10
* MM1 receives quote fill for Option Leg 1: $8.20x130
* MM1 receives quote fill for Option Leg 2: $9.00x70
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x870
* Resulting Option Leg 1 market: $9.00x930 & $9.20x1000
* Resulting spread market clear/empty
7
MM1 Cancels Quotes
==>
* Current Market for Leg 1 & Leg 2 is clear/empty



Section 3:  COA on Opposite Side

1.14.  2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, COA Does Not Start, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $39.80 @ Qty:10, Origin = 'C'
* COA does not start


==>
* Strategy Order books at:  $0.00x0 - $39.80x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



1.15.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.80 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: $0.00x0 - $39.80x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


1.16.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $39.60x10
* MM1 receives quote fill for Option Leg 1: $8.00x130
* MM1 receives quote fill for Option Leg 2: $9.20x70
* Resulting Option Leg 1 market: $8.00x8.70 & $8.20x1000
* Resulting Option Leg 1 market: $9.00x1000 & $9.20x930
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


1.17.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $41.60 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Market Display' for Strategy
==>
* Strategy Order books at $0.00x0 - $41.60x10
6
BD2 Enter Same-Side Strategy Order
ORD2: -$43.50 @ Qty:5, Origin = 'C'
* COA Begins - MM1 receives auction notification
7
Check 'Status Window' & 'Market Display'
==>
* COA Ends with no responses
* Strategy Order Trades with resting opposite-side order
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: -$41.60x5 - $0.00x0
9
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty


1.18. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receives Auction Notification
4
MM2 Enters Auction Response
SAME SIDE: -$43.60 @ Qty:10, Origin = 'C'

5

==>
* COA Ends
6
Check 'Status Window' & 'Market Display'
==>
* Auction Response Trades with ORD1
* BD1 Receives Fill for Leg 1:  Buy 70 @ $9.00
* BD1 Receives Fill for Leg 2:  Sell 10 @ $8.19
* BD1 Receives Fill for Leg 2:  Sell 120 @ $8.20
* Resulting Leg 1 Current Market:  $8.00x1000 & $8.20x1000
* Resulting Leg 2 Current Market:  $9.00x1000 & $9.20x1000
7
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: $43.59x10
* MM2 receives Auction Response fill for the strategy order: -$43.59x10
8
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty

1.19. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000


==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM2 Enters Better-Priced Quote During COA Auction
Leg 1:
Bid: $7.00x1000
Ask: $7.20x1000
Current Market for Leg 1 is $7.00x1000 - $7.20x1000

Check 'Auction Display'
==>
* COA ends prematurely
* ORD1 Books
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0



1.20. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM1 Enters Opposite-Side MKT Order
ORD2:  MKT @ Qty: 10, Origin = 'C'
* COA Auction ends prematurely
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives ORD fill notification:  Defined 10 @ $43.59
* MM1 receives ORD fill notification:  Opposite 10 @ -$43.59
6
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00 x 0 - $0.00 x 0
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
7
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Leg 1 & Leg 2 is clear: $0.00x0 - $0.00x0



1.21. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
4
HD user Closes Strategy Product from SA GUI
==>
* COA Auction ends prematurely
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
6
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
7
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Leg 1 & Leg 2 is clear: $0.00x0 - $0.00x0

Section 4:  Re-COA on Opposite Side

1.22. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $1.00x1000
Ask:  $1.20x1000
Current Market is 1.00 x 1000 - 1.20 x 1000


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $123.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 - $123.00x100
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
6
MM1 updates Quote on Leg 1
Bid: $10.10 x 1000
Ask: $10.20 x 1000
* Current Market for Leg 1 is: $10.10x1000 - $10.20x1000
* Derived Quote: Defined -$122.90 / Opposite $125.60
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive Auction Notification
8
Check 'Status Window'
==>
* Re-COA ends
* ORD1 books
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.10x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
9
BD1 Cancels ORD1
==>
* ORD1 is cancelled
* Strategy product Current Market: $0.00x0 - $0.00x0
10
MM1 Cancels quotes on Legs 1 & 2
==>
* Leg 1 and Leg 2 Current Market: $0.00x0 - $0.00x0



1.23. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds, Re-COA Ends, Order Trades with Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $1.00x1000
Ask:  $1.20x1000
Current Market is 1.00 x 1000 - 1.20 x 1000


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $123.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 - $123.00x100
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
6
MM1 updates Quote on Leg 1
Bid: $10.10 x 1000
Ask: $10.20 x 1000
* Current Market for Leg 1 is: $10.10x1000 - $10.20x1000
* Derived Quote: Defined -$122.90 / Opposite $125.60
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive Auction Notification
8
MM2 Responds to Re-COA Auction
Same Side: -$123.00 @ Qty: 100, Origin = 'C'
* Re-COA Auction continues
9
Check 'Status Window' & 'Market Display'
==>
* Re-COA Auction ends
* BD1 receives fill notification for ORD1: $123.00 @ 100
* MM2 receives fill notification for Auction Response: -$123.00 @ 100
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1:  $10.10x1000 - $10.20x1000
* Leg 2:  $1.00x1000 - $1.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1 & Leg 2 is clear



1.24. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $1.00x1000
Ask:  $1.20x1000
Current Market is 1.00 x 1000 - 1.20 x 1000



Derived Quote:
Defined: -$121.60 / Opposite: $125.60
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $123.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 - $123.00x100
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
6
MM1 updates Quote on Leg 1
Bid: $10.10 x 1000
Ask: $10.20 x 1000
* Current Market for Leg 1 is: $10.10x1000 - $10.20x1000
* Derived Quote: Defined -$122.90 / Opposite $125.60
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive Auction Notification
8
HD user Closes Strategy Product from SA GUI
==>
* Re-COA Auction ends prematurely
9
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $1.00x1000 - $1.20x1000
10
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
11
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Leg 1 & Leg 2 is clear: $0.00x0 - $0.00x0



1.25. 2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
* Strategy Order books at: $0.00x0 - $42.00x10
5
BD1 enters Cancel/Replace on ORD1
ORD2:  $39.50 @ Qty:10, Origin = 'C'
* ORD1 cancels
* COA Auction begins
* MM1 receives Auction Notification
6
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$39.60x10
* MM1 receives quote fill for Option Leg 1: $8.00x130
* MM1 receives quote fill for Option Leg 2: $9.20x70
* Resulting Option Leg 1 market: $8.00x870 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x930
* Resulting spread market clear/empty
7
MM1 Cancels Quotes
==>
* Current Market for Leg 1 & Leg 2 is clear/empty



Section 5:  AIM

1.26. 2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, AIM auction ends, Order Trades With Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Paired AIM Order
ORD1:
PO Same:-$42.00 @ Qty:10, Origin = 'C'
MO Opposite:$42.00 @ Qty: 10, Origin = 'F'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* AIM Auction begins
* MM1 receives Auction Notification
4
Check 'Status Window' & 'Market Display'
==>
* AIM Auction ends with no responses
* PO trades with MO
* BD1 receives fill notification for PO1: -$42.00x10
* BD1 receives fill notification for MO1: $42.00x10
* Leg 1 Current Market: $8.00x1000-$8.20x1000
* Leg 2 Current Market: $9.00x1000-$9.20x1000
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



1.27. 2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Auction Response, AIM auction ends, Auction Response Trades against Order

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid: 10.00 x 100
Ask: 10.20 x 100
Current Market is 10.00 x 100 - 10.20 x 100
2
MM1 enters quote on Leg2
Bid: 1.00 x 100
Ask: 1.20 x 100
Current Market is 1.00 x 100 - 1.20 x 100


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ -122.00

MO1: Origin = F, OPPOSITE 100 @ +122.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -122.00
5
MM2 enters Auction Response
ORD2: Origin = C, OPPOSITE 200 @ +122.00
AIM auction continues


==>
* MMs remain at original quote
* Auction ends normally at -122.00
* 100 contracts are traded at -122.00
6
Check Status Window
==>
* MO1 is CANCELLED
* ORD2 remaining 100 quantity is CANCELLED
* The auction trade allocation is as follows:
ORD2 = 100 @ +122.00
MO1 = 0
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with ORD2 for 100 @ -122.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1 is 10.00 x 100 - 10.20 x 100
* Current Market for Leg2 is 1.00 x 100 - 1.20 x 100



1.28. 2-Leg Strategy, Setup Valid Leg Market, Enter AIM Order, AIM auction begins, MM2 Updates Quote on Legs, AIM auction ends prematurely, AIM order Trades

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid: 10.00 x 100
Ask: 10.20 x 100
Current Market is 10.00 x 100 - 10.20 x 100
2
MM1 enters quote on Leg2
Bid: 1.00 x 100
Ask: 1.20 x 100
Current Market is 1.00 x 100 - 1.20 x 100


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ -122.00

MO1: Origin = F, OPPOSITE 100 @ +122.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -122.00
5
MM2 enters quote on Leg2
Bid: 1.10 x 100
Ask: 1.20 x 100
AIM auction prematurely ends


==>
* MMs remain at original quote
* Auction prematurely ends at -122.00
* 100 contracts are traded at -122.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +122.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -122.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1 is 10.00 x 100 - 10.20 x 100
* Current Market for Leg2 is 1.00 x 100 - 1.20 x 100
9
Check 'Market Display' Window of Legs
==>
* Incoming quote is updated after the AIM auction allocation ends
* Current Market for Leg2 is 1.10 x 100 - 1.20 x 200



1.29. 2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Better-Priced AIM order on Strategy, AIM auction ends prematurely, ORD1 Trades, Second AIM Auction Starts and Ends, ORD2 Trades

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid: 10.00 x 100
Ask: 10.20 x 100
Current Market is 10.00 x 100 - 10.20 x 100
2
MM1 enters quote on Leg2
Bid: 1.00 x 100
Ask: 1.20 x 100
Current Market is 1.00 x 100 - 1.20 x 100


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ MKT

MO1: Origin = F, OPPOSITE 100 @ +122.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -122.00
5
MM2 enters AIM Order
PO2: Origin = C, SAME 100 @ MKT

MO2: Origin = F, OPPOSITE 100 @ +121.00
* The AIM Order is submitted
* First AIM auction prematurely ends


==>
* MMs remain at original quote
* First AIM Auction prematurely ends at -122.00
* 100 contracts are traded at -122.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +122.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -122.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1 is 10.00 x 100 - 10.20 x 100
* Current Market for Leg2 is 1.00 x 100 - 1.20 x 100
9
Check 'Auction Display' Window
==>
The second AIM auction is started at -121.61


==>
* MMs remain at original quote
* Second AIM Auction ends normally at -121.61
* 100 contracts are traded at -121.61
10
Check Status Window
==>
* The auction trade allocation is as follows:
MO2 = 100 @ +121.61
11
Check 'Market Display' Window of Strategy
==>
* PO2 trades with MO2 for 100 @ -121.61
* Current Market is 0.00 x 0 - 0.00 x 0
12
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1 is 10.00 x 100 - 10.20 x 100
* Current Market for Leg2 is 1.00 x 100 - 1.20 x 100




1.30. 2-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, Product moves to closed state, AIM auction ends prematurely, Order Trades at Ended Price

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid: 10.00 x 100
Ask: 10.20 x 100
Current Market is 10.00 x 100 - 10.20 x 100
2
MM1 enters quote on Leg2
Bid: 1.00 x 100
Ask: 1.20 x 100
Current Market is 1.00 x 100 - 1.20 x 100


==>
Derived Quote:
Defined: -$121.60 / Opposite: $125.60
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ MKT

MO1: Origin = F, OPPOSITE 100 @ +122.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -122.00
5
HD user closes Leg 2 in SA GUI
==>
AIM auction prematurely ends


==>
* MMs remain at original quote
* AIM Auction prematurely ends at -122.00
* 100 contracts are traded at -122.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +122.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -122.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1 is 10.00 x 100 - 10.20 x 100
* Current Market for Leg2 is 1.00 x 100 - 1.20 x 100
9
Check 'Market Display' Window of Legs
==>
* Leg2 product state changes to CLOSED
* Current Market for Leg2 is 0.00 x 0 - 0.00 x 0



Section 6:  Cross-Products  
1.31. Default Pre-test conditions
* Routing Properties: COA Enabled for Strategy
* Set "COA Eligible" to "True" and "OriginCode" to "[*]"

* Trading Properties:
* Auction Enabled for Strategy
* Set to "True"
* Auction Enabled for Internalization
* Set to "True"

* BD1 Create Strategy Product
* Option Leg 1: Buy 13
* Stock Leg 2: Sell 700
* Results:  Creation should be successful


1.32. 2-leg Strategy, No Valid Leg Market, Enter Same Side Strategy Order, Order Routes to PAR

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
* COA does not start

Check 'Order History'
==>
* Strategy Order routes to PAR
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0



1.33. 2-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, During Auction Enter Subsequent Opposite Side Strategy Order, ORD1 Trades with ORD2

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$63.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
BD2 Enter Opposite Side Strategy Order
ORD2: MKT @ Qty:10, Origin = 'C'
* COA Auction ends prematurely
* ORD2 trades with ORD1
* BD1 receives strategy order fill for the strategy order: -$58.80x10
* BD2 receives strategy order fill for the strategy order: $58.80x10
5
Check 'Market Display'
==>
* No Change to Leg 1 market: $10.00x1000 & $10.20x1000
* No Change to Leg 2 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $0.00x0
6
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty



1.34. 2-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, MM2 Enters Auction Response, COA Ends, Order Trades With Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* Leg 1 & Leg 2 are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
4
BD1 Enters Same Side Strategy Order
ORD1:  -$62.60 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
MM2 Responds to Auction
Opposite Side: $60.60 @ Qty: 10, Origin = 'C'
* Auction continues
6
Check 'Status Window' & 'Market Display'
==>
* Auction ends
* BD1 receives fill notification for ORD1: -$60.60 @ 10
* MM2 receives fill notification for Auction Response:  $60.60 @ 10
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1:  $10.00x1000 - $10.20x1000
* Leg 2:  $10.00x1000 - $10.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1 & Leg 2 is clear



1.35. 2-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x10000
Ask:  $9.20x10000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 0 - 0.00 x 0

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $39.60x1
* MM1 receives quote fill for Option Leg 1: $8.00x13
* MM1 receives quote fill for Stock Leg 2: $9.20x700
* Resulting Option Leg 1 market: $8.00x987 & $8.20x1000
* Resulting Stock Leg 2 market: $9.00x1000 & $9.20x300
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0

1.36. 2-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Starts, Enter Same Side Order During Auction, Order Joins Auction, Auction Ends, Orders Trade

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $58.60 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
MM2 Enters Auction Response
Same-Side:  -$62.60 @ 20, Origin = 'C'
* COA Auction continues
6
BD2 Enters Opposite-Side Strategy Order
ORD2:  $58.60 @ Qty:5, Origin = 'C'
* ORD2 joins Auction, Auction quantity is now 15
7
Check 'Auction Display'
==>
* COA Auction Ends
8
Check 'Status Window'
==>
* ORD1 trades with Auction Response $62.40 @ 10
* ORD2 trades with Auction Response $62.40 @ 5
* Remaining Auction Response quantity of 5 is cancelled
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $10.00x1000 - $10.20x1000
9
MM1 Cancels quotes on Legs 1 & 2
==>
* Leg 1 and Leg 2 Current Market: $0.00x0 - $0.00x0


1.37. 2-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, AIM Auction Ends, Orders Trade

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
3
BD1 Enters Paired AIM Order
ORD1:
PO Same:-$62.00 @ Qty:10, Origin = 'C'
MO Opposite:$62.00 @ Qty: 10, Origin = 'F'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* AIM Auction begins
* MM1 receives Auction Notification
4
Check 'Status Window' & 'Market Display'
==>
* AIM Auction ends with no responses
* PO trades with MO
* BD1 receives fill notification for PO1: -$62.00x10
* BD1 receives fill notification for MO1: $62.00x10
* Leg 1 Current Market: $10.00x1000-$10.20x1000
* Leg 2 Current Market: $10.00x1000-$10.20x1000
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



1.38. 2-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, MM2 Enters Auction Response, AIM Auction Ends, Auction Response Trades against Order

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000
2
MM1 enters quote on Leg2
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
3
BD1 enters AIM Order
ORD1:
PO Same:-$62.00 @ Qty:10, Origin = 'C'
MO Opposite:$62.00 @ Qty: 10, Origin = 'F'
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
* AIM Auction begins
* MM1 receives Auction Notification
5
MM2 enters Auction Response
ORD2: Origin = F, OPPOSITE 10 @ +$62.00
AIM auction continues
6
Check 'Status Window'
==>
* AIM Auction ends
* PO trades with MO and Auction Response
* BD1 receives fill notification for PO1: -$62.00x10
* BD1 receives fill notification for MO1: $62.00x5
* MM2 receives fill notification for Auction Response:  $62.00x5
* MO1 remaining quantity of 5 is cancelled
* Auction Response remaining quantity of 5 is cancelled
* Leg 1 Current Market: $10.00x1000-$10.20x1000
* Leg 2 Current Market: $10.00x1000-$10.20x1000



1.39. 2-leg Strategy, Setup Valid Leg Market, Enter AON Orders on Both Legs, AON Orders Book, Enter Same-Side Strategy Order, COA Starts, COA Ends, Strategy Order Trades with AON Orders

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.40x1000
Current Market is $10.00x1000 - $10.40x1000

MM1 Enters Quote on Leg 2
Bid:  $9.80x1000
Ask:  $10.20x1000
Current Market is $9.80x1000 - $10.20x1000
3
BD1 Enters AON Order on Leg 1
ORD1:  Sell 13 @ $10.20, Contingency = AON
* Order books
* Current Market is $10.00x1000 - $10.20x13

BD1 Enters AON Order on Leg 2
ORD2:  Buy 700 @ $10.00, Contingency = AON
* Order books
* Current Market is $10.00x700 - $10.20x1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
4
BD2 Enters Same-Side Order on Strategy Product
ORD3:  1 @ MKT, Origin='C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* Auction subscribers receive Auction Notification
5
Check 'Status Window' & 'Market Display'
==>
* COA Auction ends with no responses
* ORD3 trades with ORD1 & ORD2
* BD1 receives fill notification for ORD1: Sell 13 @ $10.20
* BD1 receives fill notification for ORD2: Buy 700 @ $10.00
* BD2 receives fill notification for ORD3:  Defined 1 @ -$62.60
* Leg 1 Current Market: $10.00x1000-$10.40x1000
* Leg 2 Current Market: $9.80x1000-$10.20x1000
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


1.40.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite-Side IOC Contingency Strategy Order, COA Starts, COA Ends, Order Trades Partially, Remaining Quantity Cancels

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
MM1 Enters Quote on Leg 1
Bid:  $10.00x100
Ask:  $10.20x100
Current Market is 10.00 x 100 - 10.20 x 100

MM1 Enters Quote on Leg 2
Bid:  $10.00x10,000
Ask:  $10.20x10,000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
* Strategy product is in 'Open' state
* Derived Quote:  Defined -$58.60 / Opposite:  $62.60
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $56.60 @ Qty:10, Origin = 'C', Contingency='IOC'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
Check 'Status Window'
==>
* COA auction ends
* ORD1 Trades with Leg 1: Sell 91 IOC @ 10.00; leaves 39 
* ORD1 Trades with Leg 2: Buy 4,900 IOC @ 10.20; leaves 2,100
* Remaining ORD quantity for Leg 1 cancels: 39 canceled
* Remaining ORD quantity for Leg 2 cancels:  2,100 canceled
6
Check 'Market Display'
==>
* Current Market for Leg 1:  $10.00x9 - $10.20x100
* Current Market for Leg 2:  $10.00x10,000 - $10.20x5,100
* Current Market for Strategy:  $0.00x0 - $0.00x0
7
MM1 Cancels Quotes
==>
* Current Market for L1 & L2 is clear: $0.00x0 - $0.00x0



2. Positive Tests: W_MAIN/Hybrid, 3 Leg Option Strategies, COA On
2.1.  	Default Pre-Test Conditions
* Routing Properties: COA Enabled for Strategy
* Set "COA Eligible" to "True" and "OriginCode" to "[*]"

* Trading Properties:
* Auction Enabled for Strategy
* Set to "True"
* Auction Enabled for Internalization
* Set to "True"

* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 13
* Option Leg 3:  Buy 19
* Result: Creation should be successful

Section 1: COA on Defined Side

2.2.  	3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, COA Does Not Start, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
* COA does not start


==>
* Strategy Order books at:  -$133.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


2.3.   	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>

2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display' for Strategy
==>
* COA Auction ends with no responses
* Strategy Order books at: -$133.00x10 - $0.00x0
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0




2.4.  	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$135.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$134.20x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x130
* MM1 receives quote fill for Option Leg 3: $10.20x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x870 & $9.20x1000
* Resulting Option Leg 3 market: $10.00x1000 $ $10.20x810
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


2.5. 	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$130.30 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Market Display'
==>
* Strategy Order books at -$130.30x10 - $0.00x0
6
BD2 Enter Opposite Side Strategy Order
ORD2: $128.00 @ Qty:5, Origin = 'C'
* COA Begins - MM1 receives auction notification
7
Check 'Status Window'
==>
* COA Ends with no responses
* Strategy Order Trades with resting same-side order
* BD1 receives strategy order fill for the strategy order: -$130.30x5
* BD2 receives strategy order fill for the strategy order: $130.30x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 2 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: -$130.30x5 on Defined Side ($0.00x0 on the Opposite Side)
9
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0




2.6.  	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receives Auction Notification
4
MM2 Enters Auction Response
OPPOSITE SIDE: $127.00 @ Qty:10, Origin = 'C'

5

==>
* COA Ends
6
Check 'Status Window' & 'Market Display'
==>
* Auction Response Trades with ORD1
* BD1 Receives Fill for Leg 1:  Buy 70 @ $8.02
* BD1 Receives Fill for Leg 2:  Sell 130 @ $9.18
* BD1 Receives Fill for Leg 3:  Buy 10 @ $10.02
* BD1 Receives Fill for Leg 3:  Buy 180 @ $10.01
* Leg 1 Current Market Unchanged:  $8.00x1000 & $8.20x1000
* Leg 2 Current Market Unchanged:  $9.00x1000 & $9.20x1000
* Leg 3 Current Market Unchanged:  $10.00x1000 & $10.20x1000
7
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$127.00x10
* MM2 receives Auction Response fill for the strategy order: $127.00x10
8
MM1 Cancels Quotes
==>
* Leg 1 Current Market is: 0.00x0 - 0.00x0
* Leg 2 Current Market is: 0.00x0 - 0.00x0
* Leg 3 Current Market is: 0.00x0 - 0.00x0


2.7.  	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM2 Enters Better-Priced Quote During COA Auction
Leg 1:
Bid: $7.00x1000
Ask: $7.20x1000
Current Market for Leg 1 is $7.00x1000 - $7.20x1000


==>
* COA ends prematurely
* ORD1 Books
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0



2.8.  	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM1 Enters Opposite-Side MKT Order
ORD2:  MKT @ Qty: 10, Origin = 'C'
* COA Auction ends prematurely
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives ORD fill notification:  Defined 10 @ $-126.41
* MM1 receives ORD fill notification:  Opposite 10 @ $126.41
6
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00 x 0 - $0.00 x 0
* Current Market for Leg 1, 2 & 3 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x1000 - $10.20x1000
7
MM1 cancels Quotes on Legs 1, 2, & 3
==>
* Current Market for Leg 1, 2, & 3 is clear: $0.00x0 - $0.00x0



2.9.  	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
4
HD user Closes Strategy Product from SA GUI
==>
* COA Auction ends prematurely
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Strategy is: -$133.00 x 10 - $0.00 x 0
* Current Market for Leg 1, 2 & 3 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x1000 - $10.20x1000
6
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
7
MM1 cancels Quotes on Legs 1, 2, & 3
==>
* Current Market for Leg 1, 2, & 3 is clear: $0.00x0 - $0.00x0



Section 2: Re-COA on Defined Side

2.10. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
4
BD1 Enters Same Side Strategy Order
ORD1:  -$132.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* BD1 & MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: -$132.00x100 - $0.00x0
* Current Market for Legs is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x100 - $10.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.00 x 1000
Ask: $8.10 x 1000
* Current Market for Leg 1 is: $8.00x1000 - $8.10x1000
* Derived Quote: Defined -$126.40 / Opposite $133.50
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
Check 'Status Window'
==>
* Re-COA ends
* ORD1 books
* Current Market for Legs is unchanged:
* Leg 1: $8.00x1000 - $8.10x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x100 - $10.20x1000
9
BD1 cancels ORD1
==>
* ORD1 is cancelled
* Strategy Current Market is clear/empty: $0.00x0
10
MM1 cancels Quotes
==>
* Quotes are cancelled
* Leg Markets are clear/empty:  $0.00x0



2.11. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds with MKT Order, Re-COA Ends, Order Trades with Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
4
BD1 Enters Same Side Strategy Order
ORD1:  -$132.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: -$132.00x100 - $0.00x0
* Current Market for Legs is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.00 x 1000
Ask: $8.10 x 1000
* Current Market for Leg 1 is: $8.00x1000 - $8.10x1000
* Derived Quote: Defined -$126.40 / Opposite $133.50
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
MM2 Responds to Re-COA Auction
Opposite Side: $132.00 @ Qty: 100, Origin = 'C'
* Re-COA Auction continues
9
Check 'Status Window'
==>
* Re-COA Auction ends
* BD1 receives fill notification for ORD1:  -$132.00 @ 100
* MM2 receives fill notification for Auction Response: $132.00 @ 100
* Current Market for Leg 1 & Leg 2 is unchanged:
* Leg 1:  $8.00x1000 - $8.10x1000
* Leg 2:  $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1, 2 & 3 is clear:
* 0.00x0 - 0.00x0



2.12. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
4
BD1 Enters Same Side Strategy Order
ORD1:  -$132.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: -$132.00x100 - $0.00x0
* Current Market for Legs is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x100 - $10.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.00 x 1000
Ask: $8.10 x 1000
* Current Market for Leg 1 is: $8.00x1000 - $8.10x1000
* Derived Quote: Defined -$126.40 / Opposite $133.50
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
HD user Closes Strategy Product from SA GUI
==>
* Re-COA Auction ends prematurely
9
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Legs is unchanged:
* Leg 1: $8.00x1000 - $8.10x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x100 - $10.20x1000
10
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
11
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Legs is clear: $0.00x0 - $0.00x0



2.13. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: -$133.00x10 - $0.00x0
5
BD1 enters Cancel/Replace on ORD1
ORD2:  -$133.80 @ Qty:10, Origin = 'C'
* ORD1 cancels
* COA Auction begins for ORD2
* MM1 receives Auction Notification
6
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$134.20x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x130
* MM1 receives quote fill for Option Leg 3:  $10.20x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x870 & $9.20x1000
* Resulting Option Leg 3 market: $10.00x1000 & $10.20x810
* Resulting spread market clear/empty
7
MM1 Cancels Quotes
==>
* Current Market for Leg 1, 2,  & 3 is clear/empty



Section 3:  COA on Opposite Side


2.14. 3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, COA Does Not Start, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* COA does not start


==>
* Strategy Order books at:  $0.00x0 - $127.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0


2.15.  3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: $0.00x0 - $127.00x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


2.16. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $125.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $126.40x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x130
* MM1 receives quote fill for Option Leg 3:  $10.00x190
* Resulting Option Leg 1 market: $8.00x9.30 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x870
* Resulting Option Leg 3 market: $10.00x810 & $10.20x1000
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0



2.17. 3-Leg Strategy, Opposite Side Order, Valid Leg Market, COA Begins, No Responses, Order Books, Enter Subsequent Same  Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Market Display'
==>
* Strategy Order books at $0.00x0 - $127.00x10
6
BD2 Enter Same-Side Strategy Order
ORD2: -$133.00 @ Qty:5, Origin = 'C'
* COA Begins - MM1 receives auction notification
7
Check 'Status Window'
==>
* COA Ends with no responses
* Strategy Order Trades with resting opposite-side order
* BD1 receives strategy order fill for the strategy order: -$127.00x5
* BD2 receives strategy order fill for the strategy order: $127.00x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $127.00x5
9
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0



2.18. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receives Auction Notification
4
MM2 Enters Auction Response
ORD2: -$133.00 @ Qty:5, Origin = 'C'

5

==>
* COA Ends
6
Check 'Status Window' & 'Market Display'
==>
* Auction Response Trades with ORD1
* BD1 Receives Fill for Leg 1:  Sell 35 @ $8.17
* BD1 Receives Fill for Leg 2:  Buy 65 @ $9.03
* BD1 Receives Fill for Leg 3:  Sell 80 @ $10.17
* BD1 Receives Fill for Leg 3:  Sell 15 @ $10.16
* Resulting Leg 1 Current Market:  $8.00x1000 & $8.20x1000
* Resulting Leg 2 Current Market:  $9.00x1000 & $9.20x1000
* Resulting Leg 3 Current Market: $10.00x100 & 10.20x1000
7
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: $133.00x5
* MM2 receives strategy order fill for the strategy order: -$133.00x5
8
BD1 Cancels ORD1 remaining quantity
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty
* ORD1 cancels leaving spread market clear/empty



2.19. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM2 Enters Better-Priced Quote During COA Auction
Leg 1:
Bid: $7.00x1000
Ask: $7.20x1000
Current Market for Leg 1 is $7.00x1000 - $7.20x1000


==>
* COA ends prematurely
* ORD1 Books
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0



2.20. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM1 Enters Opposite-Side MKT Order
ORD2:  MKT @ Qty: 10, Origin = 'C'
* COA Auction ends prematurely
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives ORD fill notification:  Opposite 10 @ $134.19
* MM1 receives ORD fill notification:  Defined 10 @ -134.19
6
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00 x 0 - $0.00 x 0
* Current Market for Leg 1, 2, & 3 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x1000 - $10.20x1000
7
MM1 cancels Quotes on Legs 1, 2, & 3
==>
* Current Market for Leg 1, 2 & 3 is clear: $0.00x0 - $0.00x0


2.21. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000



Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
4
HD user Closes Strategy Product from SA GUI
==>
* COA Auction ends prematurely
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1, 2, & 3 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x1000 - $10.20x1000
6
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
7
MM1 cancels Quotes on Legs 1, 2, & 3
==>
* Current Market for Leg 1, 2, & 3 is clear: $0.00x0 - $0.00x0



Section 4:  Re-COA on Opposite Side


2.22. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $128.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 0 - 0.00 x 0

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 - $128.00x100
* Current Market for Legs is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.10 x 1000
Ask: $8.20 x 1000
* Current Market for Leg 1 is: $8.10x1000 - $8.20x1000
* Derived Quote: Defined -$127.10 / Opposite $134.20
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive auction notification
8
Check 'Status Window'
==>
* Re-COA ends
* ORD1 books
* Current Market for Legs is unchanged:
* Leg 1: $8.10x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
9
BD1 Cancels ORD1
==>
* ORD1 is cancelled
* Strategy product Current Market: $0.00x0 - $0.00x0
10
MM1 Cancels quotes on Legs
==>
* Leg 1 Current Market: $0.00x0 - $0.00x0
* Leg 2 Current Market: $0.00x0 - $0.00x0
* Leg 3 Current Market: $0.00x0 - $0.00x0



2.23. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds, Re-COA Ends, Order Trades with Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $128.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 - $128.00x100
* Current Market for Leg 1, 2,  & 3 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3: $10.00x1000 - $10.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.10 x 1000
Ask: $8.20 x 1000
* Current Market for Leg 1 is: $8.10x1000 - $8.20x1000
* Derived Quote: Defined -$127.10 / Opposite $134.20
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive auction notification
8
MM2 Responds to Re-COA Auction
Same Side: -$128.00 @ Qty: 100, Origin = 'C'
* Re-COA Auction continues
9
Check 'Status Window' & 'Market Display'
==>
* Re-COA Auction ends
* BD1 receives fill notification for ORD1:  $128.00 @ 100
* MM2 receives fill notification for Auction Response: -$128.00 @ 100
* Current Market for Leg 1, 2  & 3 is unchanged:
* Leg 1:  $8.10x1000 - $8.20x1000
* Leg 2:  $9.00x1000 - $9.20x1000
* Leg 3: $10.00x1000 - $10.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1, 2,  & 3 is clear



2.24. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $128.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 - $128.00x100
* Current Market for Leg 1, 2 & 3 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.10 x 1000
Ask: $8.20 x 1000
* Current Market for Leg 1 is: $8.10x1000 - $8.20x1000
* Derived Quote: Defined -$127.10 / Opposite $134.20
7
Check 'Auction Display' Window
==>
* Re-COA starts
* BD1 & MM1 receive auction notification
8
HD user Closes Strategy Product from SA GUI
==>
* Re-COA Auction ends prematurely
9
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1 is: $8.10x1000 - $8.20x1000
* Derived Quote: Defined -$127.10 / Opposite $134.20
10
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
11
MM1 cancels Quotes on Legs 1 & 2
==>
* Current Market for Legs is clear: $0.00x0 - $0.00x0


2.25. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
* Strategy Order books at: $0.00x0 - $127.00x10
5
BD1 enters Cancel/Replace on ORD1
ORD2:  $123.80 @ Qty:10, Origin = 'C'
* ORD1 cancels
* COA Auction begins for ORD2
* MM1 receives Auction Notification
6
Check 'Status Window' & 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$126.40x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x130
* MM1 receives quote fill for Option Leg 3:  $10.00x190
* Resulting Option Leg 1 market: $8.00x930 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x870
* Resulting Option Leg 3 market:  $10.00x810 & $10.20x1000
* Resulting spread market clear/empty
7
MM1 Cancels Quotes
==>
* Current Market for Leg 1, 2, & 3 is clear/empty



Section 5:  AIM

2.26. 3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, AIM auction ends, Order Trades With Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Paired AIM Order
ORD1:
PO:-$127.00 @ Qty:10, Origin = 'C'
MO:$127.00 @ Qty: 10, Origin = 'F'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* AIM Auction begins
* MM1 receives Auction Notification
4
Check 'Status Window' & 'Market Display'
==>
* AIM Auction ends with no responses
* PO trades with MO
* BD1 receives fill notification for PO1:  -$127.00x10
* BD1 receives fill notification for MO1: $127.00x10
* Leg 1 Current Market Unchanged:  $8.00x1000-$8.20x1000
* Leg 2 Current Market Unchanged:  $9.00x1000-$9.20x1000
* Leg 3 Current Market Unchanged:  $10.00x1000-$10.20x1000
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0



2.27. 3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Auction Response, AIM auction ends, Auction Response Trades against Order

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization


1
MM1 enters quote on Leg 1
Bid: 8.00 x 1000
Ask: 8.20 x 1000
Current Market is 8.00x1000 - 8.20x1000
2
MM1 enters quote on Leg 2
Bid: 9.00 x 1000
Ask: 9.20 x 1000
Current Market is 9.00x1000 - 9.20x1000

MM1 enters quote on Leg 3
Bid: 10.00 x 1000
Ask: 10.20 x 1000
Current Market is 10.00x1000 - 10.20x1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ -127.00

MO1: Origin = F, OPPOSITE 100 @ +127.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -127.00
5
MM2 enters Auction Response
ORD2: Origin = C, OPPOSITE 200 @ +127.00
AIM auction continues


==>
* MMs remain at original quote
* Auction ends normally at -127.00
* 100 contracts are traded at -127.00
7
Check Status Window
==>
* MO1 is CANCELLED
* ORD2 remaining 100 quantity is CANCELLED
* The auction trade allocation is as follows:
ORD2 = 100 @ +127.00
MO1 = 0
8
Check 'Market Display' Window of Strategy
==>
* PO1 trades with ORD2 for 100 @ -127.00
* Current Market is 0.00 x 0 - 0.00 x 0
9
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1: 8.00 x 100 - 8.20 x 100
* Current Market for Leg2: 9.00 x 100 - 9.20 x 100
* Current Market for Leg3:  10.00x100 - 10.20x100



2.28. 3-Leg Strategy, Setup Valid Leg Market, Enter AIM Order, AIM auction begins, MM2 Updates Quote on Legs, AIM auction ends prematurely, AIM order Trades

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid: 8.00 x 1000
Ask: 8.20 x 1000
Current Market is 8.00 x 1000 - 8.20 x 1000
2
MM1 enters quote on Leg2
Bid: 9.00 x 1000
Ask: 9.20 x 1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 enters quote on Leg3
Bid: 10.00 x 1000
Ask: 10.20 x 1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @-127.00

MO1: Origin = F, OPPOSITE 100 @ +127.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -127.00
5
MM2 enters quote on Leg2
Bid: 9.10 x 1000
Ask: 9.20 x 1000
AIM auction prematurely ends


==>
* MMs remain at original quote
* Auction prematurely ends at -127.00
* 100 contracts are traded at -127.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +127.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -127.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1: 8.00 x 1000 - 8.20 x 1000
* Current Market for Leg2: 9.00 x 1000 - 9.20 x 1000
* Current Market for Leg3: 10.00 x 1000 - 10.20 x 1000
9
Check 'Market Display' Window of Legs
==>
* Incoming quote is updated after the AIM auction allocation ends
* Current Market for Leg2 is 9.10 x 1000 - 9.20 x 1000


2.29. 3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Better-Priced AIM order on Strategy, AIM auction ends prematurely, ORD1 Trades, Second AIM Auction Starts and Ends, ORD2 Trades

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid: 8.00 x 1000
Ask: 8.20 x 1000
Current Market is 8.00 x 1000 - 8.20 x 1000
2
MM1 enters quote on Leg2
Bid: 9.00 x 1000
Ask: 9.20 x 1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 enters quote on Leg3
Bid: 10.00 x 1000
Ask: 10.20 x 1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ MKT

MO1: Origin = F, OPPOSITE 100 @ +127.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -127.00
5
MM2 enters AIM Order
PO2: Origin = C, SAME 100 @ MKT

MO2: Origin = F, OPPOSITE 100 @ +126.00
* The AIM Order is submitted
* First AIM auction prematurely ends


==>
* MMs remain at original quote
* First AIM Auction prematurely ends at -127.00
* 100 contracts are traded at -127.00
6
Check 'Status Window'
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +127.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -127.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1: 8.00 x 1000 - 8.20 x 1000
* Current Market for Leg2: 9.00 x 1000 - 9.20 x 1000
* Current Market for Leg3: 10.00 x 1000 - 10.20 x 1000
9
Check 'Auction Display' Window
==>
The second AIM auction is started at -126.41


==>
* MMs remain at original quote
* Second AIM Auction ends normally at -126.41
* 100 contracts are traded at -126.41
10
Check Status Window
==>
* The auction trade allocation is as follows:
MO2 = 100 @ +126.41
11
Check 'Market Display' Window of Strategy
==>
* PO2 trades with MO2 for 100 @ -126.41
* Current Market is 0.00 x 0 - 0.00 x 0
12
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1: 8.00 x 1000 - 8.20 x 1000
* Current Market for Leg2: 9.00 x 1000 - 9.20 x 1000
* Current Market for Leg3: 10.00 x 1000 - 10.20 x 1000



2.30. 3-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, Product moves to closed state, AIM auction ends prematurely, Order Trades at Ended Price

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg 1
Bid: 8.00 x 1000
Ask: 8.20 x 1000
Current Market:  8.00x1000 - 8.20x1000

MM1 enters quote on Leg 2
Bid: 9.00 x 1000
Ask: 9.20 x 1000
Current Market: 9.00x1000 - 9.20x1000

MM1 enters quote on Leg 3
Bid: 10.00 x 1000
Ask: 10.20 x 1000
Current Market: 10.00x1000 - 10.20x1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
2
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ MKT

MO1: Origin = F, OPPOSITE 100 @ +127.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -127.00
5
HD user closes Leg 2 in SA GUI
==>
AIM auction prematurely ends


==>
* MMs remain at original quote
* Auction prematurely ends at -127.00
* 100 contracts are traded at -127.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +127.00
MM1 = 0
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -127.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
* Current Market for Leg1: 8.00x1000 - 8.20x1000
* Current Market for Leg2: 9.00x1000 - 9.20x1000
* Current Market for Leg3: 10.00x1000 - 10.20x1000
9
Check 'Market Display' Window of Legs
==>
* Leg2 product state changes to CLOSED
* Current Market for Leg2 is 0.00 x 0 - 0.00 x 0





Section 6:  Cross-Products  

2.31. Default Pre-test conditions
* Routing Properties: COA Enabled for Strategy
* Set "COA Eligible" to "True" and "OriginCode" to "[*]"

* Trading Properties:
* Auction Enabled for Strategy
* Set to "True"
* Auction Enabled for Internalization
* Set to "True"

* BD1 Create Strategy Product
* Option Leg 1: Buy 13
* Stock Leg 2: Sell 700
* Option Leg 3:  Buy 19
* Results:  Creation should be successful


2.32. 3-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, COA Ends, Order Routes to PAR

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  -$248.60 / Opposite: $256.40
* Strategy Product is in "Open" state
3
BD1 Enters Same Side Strategy Order
ORD1:  -$254.40 @ Qty:1, Origin = 'C'
* COA Auction begins



* COA Auction ends with no responses
4
Check 'Order History'
==>
* Strategy Order routes to PAR
5
MM1 cancels quotes
==>
* Current Market for all Legs is Clear: $0.00x0 - $0.00x0
6
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



2.33. 3-leg Strategy, Setup Valid Leg Market, Enter Same-Side Strategy Order, COA Starts, COA Ends, Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
3
BD1 Enters Same Side Strategy Order
ORD1:  -$258.40 @ Qty:1, Origin = 'C'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* COA Auction begins
4
Check 'Status Window'
==>
* COA Auction ends with no responses
* ORD1 trades with legs
* BD1 receives strategy order fill for the strategy order: -$256.40x1
5
Check 'Market Display'
==>
* Current Market for L1 is: $10.00x1000 & $10.20x987
* Current Market for L2 is: $10.00x9,300 & $10.20x10,000
* Current Market for L3 is: $10.00x1000 & $10.20x981
* Resulting spread market: $0.00x0 - $0.00x0
6
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty



2.34. 3-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, MM2 Enters Auction Response, COA Ends, Order Trades With Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
4
BD1 Enters Same Side Strategy Order
ORD1:  -$258.40 @ Qty:1, Origin = 'C'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
MM2 Responds to Auction
Opposite Side: $245.40 @ Qty: 1, Origin = 'C'
* Auction continues
6
Check 'Status Window' & 'Market Display'
==>
* Auction ends
* BD1 receives fill notification for ORD1: -$248.99 @ 1
* MM2 receives fill notification for Auction Response:  $248.99 @ 1
* Current Market for Legs is unchanged:
* Leg 1:  $10.00x1000 - $10.20x1000
* Leg 2:  $10.00x10,000 - $10.20x10,000
* Leg 3:  $10.00x1000 - $10.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for all Legs is clear



2.35. 3-leg Strategy, Setup Valid Leg Market, Enter Opposite-Side Strategy Order, COA Starts, During Auction Enter Subsequent Same-Side Strategy Order, COA Ends, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $248.60 @ Qty:1, Origin = 'C'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* COA Auction begins
4
BD2 Enters Same-Side Strategy Order
ORD2:  -$258.40 @ Qty:1, Origin = 'C'
* COA Auction continues
5
Check 'Status Window' & 'Market Display'
==>
* COA Auction ends
* ORD2 trades with ORD1
* BD1 receives strategy order fill for the strategy order: $256.01x1
* BD2 receives strategy order fill for the strategy order: -$256.01x1
* No Change to Leg 1 market: $10.00x1000 & $10.20x1000
* No Change to Leg 2 market: $10.00x10,000 & $10.20x10,000
* No Change to Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $0.00x0
6
MM1 Cancels Quotes
==>
* Current Market for all Legs is clear



2.36. 3-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Starts, Enter Same Side Order During Auction, Order Joins Auction, Auction Ends, Orders Trade

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $248.60 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
MM2 Enters Auction Response
Same-Side:  -$256.40 @ 20, Origin = 'C'
* COA Auction continues
6
BD2 Enters Opposite-Side Strategy Order
ORD2:  $248.60 @ Qty:5, Origin = 'C'
* ORD2 joins Auction, Auction quantity is now 15
7
Check 'Auction Display'
==>
* COA Auction Ends
8
Check 'Status Window'
==>
* ORD1 trades with Auction Response $256.01 @ 10
* ORD2 trades with Auction Response $256.01 @ 5
* Remaining Auction Response quantity of 5 is cancelled
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $10.00x10,000 - $10.20x10,000
* Leg 3: $10.00x1000 - $10.20x1000
9
MM1 Cancels quotes on all Legs
==>
* L1, L2, & L3 Current Market: $0.00x0 - $0.00x0



2.37. 3-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, AIM Auction Ends, Orders Trade

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
4
BD1 Enters Paired AIM Order
ORD1:
PO Same:-$256.01 @ Qty:1, Origin = 'C'
MO Opposite:$256.01 @ Qty: 1, Origin = 'F'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* AIM Auction begins
4
Check 'Status Window' & 'Market Display'
==>
* AIM Auction ends with no responses
* PO trades with MO
* BD1 receives fill notification for PO1: -$256.01x1
* BD1 receives fill notification for MO1: $256.01x1
* Current Market for L1 is: $10.00x1000 - $10.20x1000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000
* Current Market for L3 is: $10.00x1000 - $10.20x1000
5
MM1 Cancels Quotes
==>
* Current Market for L1 is: $0.00x0 - $0.00x0
* Current Market for L2 is: $0.00x0 - $0.00x0
* Current Market for L3 is: $0.00x0 - $0.00x0



2.38. 3-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, MM2 Enters Auction Response, AIM Auction Ends, Auction Response Trades against Order

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.


1
In SA GUI set AuctionTimeToLive to 30000 for Internalization.


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Option Leg 1
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L1 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
4
BD1 Enters Paired AIM Order
ORD1:
PO Same:-$256.01 @ Qty:10, Origin = 'C'
MO Opposite:$256.01 @ Qty: 10, Origin = 'F'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* AIM Auction begins
5
MM2 enters Auction Response
ORD2: Origin = F, OPPOSITE 10 @ +$256.01
* AIM auction continues
6
Check 'Status Window'
==>
* AIM Auction ends
* PO trades with MO and Auction Response
* BD1 receives fill notification for PO1: -$256.01x10
* BD1 receives fill notification for MO1: $256.01x5
* MM2 receives fill notification for Auction Response:  $256.01x5
* MO1 remaining quantity of 5 is cancelled
* Auction Response remaining quantity of 5 is cancelled
* Current Market for L1 is: $10.00x1000 - $10.20x1000
* Current Market for L2 is: $10.00x10,000 - $10.20x10,000
* Current Market for L3 is: $10.00x1000 - $10.20x1000
7
MM1 Cancels Quotes
==>
* Current Market for Legs is Clear: $0.00x0 - $0.00x0



2.39. 3-leg Strategy, Setup Valid Leg Market, Enter AON Orders on Both Legs, AON Orders Book, Enter Same-Side Strategy Order, COA Starts, COA Ends, Strategy Order Trades with AON Orders

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $10.00x1000
Ask:  $10.40x1000
Current Market is $10.00x1000 - $10.40x1000

MM1 Enters Quote on Leg 2
Bid:  $9.80x1000
Ask:  $10.20x1000
Current Market is $9.80x1000 - $10.20x1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.40x1000
Current Market is $10.00x1000 - $10.40x1000
3
BD1 Enters AON Order on Leg 1
ORD1:  Sell 13 @ $10.20, Contingency = AON
* Order books
* Current Market is $10.00x1000 - $10.20x13

BD1 Enters AON Order on Leg 2
ORD2:  Buy 700 @ $10.00, Contingency = AON
* Order books
* Current Market is $10.00x700 - $10.20x1000

BD1 Enters AON Order on Leg 3
ORD3:  Sell 19 @ $10.20, Contingency = AON
* Order books
* Current Market is $10.00x1000 - $10.20x19


==>
* Strategy Product is in "Open" state 
* Derived Quote is:  Defined:  -$248.60 / Opposite: $256.40
4
BD2 Enters Same-Side Order on Strategy Product
ORD4:  1 @ MKT, Origin='C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* Auction subscribers receive Auction Notification
5
Check 'Status Window' & 'Market Display'
==>
* COA Auction ends with no responses
* ORD3 trades with ORD1 & ORD2
* BD1 receives fill notification for ORD1: Sell 13 @ $10.20
* BD1 receives fill notification for ORD2: Buy 700 @ $10.00
* BD1 receives fill notification for ORD3:  Sell 19 @ $10.20
* BD2 receives fill notification for ORD4:  Defined 1 @ -$256.40
* Leg 1 Current Market: $10.00x1000-$10.40x1000
* Leg 2 Current Market: $9.80x1000-$10.20x1000
* Leg 3 Current Market: $10.00x1000-$10.40x1000
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


2.40.  	3-Leg Strategy, Setup Valid Leg Market, Enter Opposite-Side IOC Contingency Strategy Order, COA Starts, COA Ends, Order Trades Partially, Remaining Quantity Cancels

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
MM1 enters quote on Option Leg 1
Bid:  $10.00x100
Ask:  $10.20x100
Current Market is 10.00 x 100 - 10.20 x 100

MM1 enters quote on Stock Leg 2
Bid:  $10.00x10,000
Ask:  $10.20x10,000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  -$248.60 / Opposite: $256.40
* Strategy Product is in "Open" state
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  $246.60 @ Qty:10, Origin = 'C', Contingency='IOC'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
Check 'Status Window'
==>
* COA auction ends
* ORD1 Trades with Leg 1: Buy 4,900 IOC @ 10.20; leaves 2,100
* ORD1 Trades with Leg 2: Sell 91 IOC @ 10.00; leaves 39
* ORD1 Trades with Leg 3:  Sell 133 IOC @ 10.00; leaves 57 
* Remaining ORD quantity for Leg 1 cancels: 2,100 cancelled
* Remaining ORD quantity for Leg 2 cancels:  39 cancelled
* Remaining ORD quantity for Leg 3 cancels:  57 cancelled
6
Check 'Market Display'
==>
* Current Market for Leg 1:  $10.00x10,000 - $10.20x5,100
* Current Market for Leg 2:  $10.00x9 - $10.20x100
* Current Market for Leg 3:  $10.00x867 - $10.20x1000
* Current Market for Strategy:  $0.00x0 - $0.00x0
7
MM1 Cancels Quotes
==>
* Current Market for all Legs is clear: $0.00x0 - $0.00x0



3. Positive Tests: W_MAIN/Hybrid, 4 Leg Option Strategies, COA On
3.1.   	Default Pre-Test Conditions
* Routing Properties: COA Enabled for Strategy
* Set "COA Eligible" to "True" and "OriginCode" to "[*]"

* Trading Properties:
* Auction Enabled for Strategy
* Set to "True"
* Auction Enabled for Internalization
* Set to "True"

* BD1 Create Strategy Product
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 15
* Option Leg 3:  Buy 21
* Option Leg 4:  Sell 19
* Results:  Creation should be successful


Section 1: COA on Defined Side


3.2. 	4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, COA Does Not Start, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* COA does not start


==>
* Strategy Order books at:  $73.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


3.3.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receive Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: $73.00x10 - $0.00x0
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.4.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $71.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receive Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $72.40x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x150
* MM2 receives quote fill for Option Leg 3:  $10.20x210
* MM2 receives quote fill for Option Leg 4:  $11.00x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x850 & $9.20x1000
* Resulting Option Leg 3 market:  $10.00x1000 & $10.20x790
* Resulting Option Leg 4 market:  $11.00x810 & $11.20x1000
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.5.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receive Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Market Display'
==>
* Strategy Order books at $73.00x10 - $0.00x0
6
BD2 Enter Opposite Side Strategy Order
ORD2: -$82.00 @ Qty:5, Origin = 'C'
* COA Begins - MM1 & MM2 receive auction notification
7
Check 'Status Window'
==>
* COA Ends with no responses
* Strategy Order Trades with resting same-side order
* BD1 receives strategy order fill for the strategy order: -$73.00x5
* BD2 receives strategy order fill for the strategy order: $73.00x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: $73.00x5 on Defined Side ($0.00x0 on the Opposite Side)
9
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
11
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.6.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends Prematurely, Auction Response Trades with Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask:  $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receives Auction Notification
4
MM2 Enters Auction Response
OPPOSITE SIDE: -$73.00 @ Qty:10, Origin = 'C'

5

==>
* COA Ends
6
Check 'Status Window' & 'Market Display'
==>
* Auction Response Trades with ORD1
* BD1 Receives Fill for Leg 1:  Buy 70 @ $8.19
* BD1 Receives Fill for Leg 2:  Sell 150 @ $9.01
* BD1 Receives Fill for Leg 3:  Buy 20 @ $10.20
* BD1 Receives Fill for Leg 4:  Sell 190 @ $11.01
* Leg 1 Current Market Unchanged:  $8.00x1000 & $8.20x1000
* Leg 2 Current Market Unchanged:  $9.00x1000 & $9.20x1000
* Leg 3 Current Market Unchanged:  $10.00x1000 & $10.20x1000
* Leg 4 Current Market Unchanged:  $11.00x1000 & $11.20x1000
7
Check 'Status Window'
==>
* MM1 receives strategy order fill for the strategy order: -$73.00x10
* BD1 receives strategy order fill for the strategy order: $73.00x10
8
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.7.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM2 Enters Better-Priced Quote During COA Auction
Leg 1:
Bid: $7.00x1000
Ask: $7.20x1000
Current Market for Leg 1 is $7.00x1000 - $7.20x1000


==>
* COA ends prematurely
* ORD1 Books
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.8.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask:  $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM1 Enters Opposite-Side MKT Order
ORD2:  MKT @ Qty: 10, Origin = 'C'
* COA Auction ends prematurely
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives ORD fill notification:  Defined 10 @ $84.79
* MM1 receives ORD fill notification:  Opposite 10 @ -$84.79
6
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00 x 0 - $0.00 x 0
* Current Market for Leg 1, 2, 3 & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
7
MM1 cancels Quotes on Legs 1, 2, 3 & 4
==>
* Current Market for Legs 1, 2, 3 & 4 is clear: $0.00x0 - $0.00x0



3.9.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
4
HD user Closes Strategy Product from SA GUI
==>
* COA Auction ends prematurely
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
6
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
7
MM1 cancels Quotes on Legs 1, 2, 3, & 4
==>
* Current Market for Leg 1, 2, 3 & 4 is clear: $0.00x0 - $0.00x0



Section 2: Re-COA on Defined Side


3.10. 4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00x1000 - 8.20x1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00x1000 - 9.20x1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
4
BD1 Enters Same Side Strategy Order
ORD1:  $74.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $74.00x100 - $0.00x0
* Current Market for Leg 1, 2, 3 & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.00 x 1000
Ask: $8.10 x 1000
* Current Market for Leg 1 is: $8.00x1000 - $8.10x1000
* Derived Quote: Defined $84.45 / Opposite -$73.10
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
Check 'Status Window'
==>
* Re-COA ends
* ORD1 books
* Current Market for Leg 1, 2, 3 & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.10x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
9
BD1 cancels ORD1
==>
* ORD1 is cancelled
* Strategy Current Market is clear/empty: $0.00x0
10
MM1 cancels quotes on Legs
==>
* Quotes are cancelled
* Leg Markets are clear/empty:  $0.00x0



3.11. 4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds with MKT Order, Re-COA Ends, Order Trades with Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask:  $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
4
BD1 Enters Same Side Strategy Order
ORD1:  $74.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Strategy is: $74.00x100 - $0.00x0
* Current Market for Leg 1, 2, 3, & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.00 x 1000
Ask: $8.10 x 1000
* Current Market for Leg 1 is: $8.00x1000 - $8.10x1000
* Derived Quote: Defined $84.45 / Opposite -$73.10
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
MM2 Responds to Re-COA Auction
Opposite Side: -$74.00 @ Qty: 100, Origin = 'C'
* Re-COA Auction continues
9
Check 'Status Window' & 'Market Display'
==>
* Re-COA Auction ends
* BD1 receives fill notification for ORD1:  $74.00 @ 100
* MM2 receives fill notification for Auction Response: -$74.00 @ 100
* Current Market for Leg 1, 2, 3 & 4 is unchanged:
* Leg 1:  $8.00x1000 - $8.10x1000
* Leg 2:  $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1, 2, 3, & 4 is clear



3.12. 4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask:  $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
4
BD1 Enters Same Side Strategy Order
ORD1:  $74.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $74.00x100 - $0.00x0
* Current Market for Leg 1, 2, 3, & 4 is unchanged:
* Leg 1:  $8.00x1000 - $8.20x1000
* Leg 2:  $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
6
MM1 updates Quote on Leg 1
Bid: $8.00 x 1000
Ask: $8.10 x 1000
* Current Market for Leg 1 is: $8.00x1000 - $8.10x1000
* Derived Quote: Defined $84.45 / Opposite -$73.10
7
Check 'Auction Display' Window
==>
* Re-COA starts for ORD1
* BD1 & MM1 receive Auction Notification
8
HD user Closes Strategy Product from SA GUI
==>
* Re-COA Auction ends prematurely
9
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1, 2, 3, & 4 is unchanged:
* Leg 1:  $8.00x1000 - $8.10x1000
* Leg 2:  $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
10
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
11
MM1 cancel quotes
==>
* Current Market for Leg 1, 2, 3, & 4 is clear



3.13. 4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
Current Market is 10.00x1000 - 10.20x1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask:  $11.20x1000
Current Market is 11.00x1000 - 11.20x1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4

==>
* COA Auction ends with no responses
* Strategy Order books at: -$42.00x10 - $0.00x0
5
BD1 enters Cancel/Replace on ORD1
ORD2:  $71.00 @ Qty:10, Origin = 'C'
* ORD1 cancels
* COA Auction begins for ORD2
* MM1 receives Auction Notification
6
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $72.40x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x150
* MM2 receives quote fill for Option Leg 3:  $10.20x210
* MM2 receives quote fill for Option Leg 4:  $11.00x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x850 & $9.20x1000
* Resulting Option Leg 3 market:  $10.00x1000 & $10.20x790
* Resulting Option Leg 4 market:  $11.00x810 & $11.20x1000
* Resulting spread market clear/empty
7
MM1 Cancels Quotes
==>
* Current Market for Leg 1, 2, 3, & 4 is clear



Section 3:  COA on Opposite Side


3.14.  4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, COA Does Not Start, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions

* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* COA does not start


==>
* Strategy Order books at:  $0.00x0 / -$83.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



3.15.  4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receive Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: $0.00x0 / -$83.00x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.16.  4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM2 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$86.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receive Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Status Window' and 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$84.80x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x150
* MM2 receives quote fill for Option Leg 3:  $10.00x210
* MM2 receives quote fill for Option Leg 4:  $11.20x190
* Resulting Option Leg 1 market: $8.00x930 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x850
* Resulting Option Leg 3 market:  $10.00x790 & $10.20x1000
* Resulting Option Leg 4 market:  $11.00x1000 & $11.20x810
* Resulting spread market clear/empty
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.17. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receive Auction Notification
4

==>
* COA Auction ends with no responses
5
Check 'Market Display' for Strategy
==>
* Strategy Order books at $0.00x0 / -$83.10x10
6
BD2 Enter Same-Side Strategy Order
ORD2: $73.00 @ Qty:5, Origin = 'C'
* COA Begins - MM1 & MM2 receive auction notification
7
Check 'Status Window' & 'Market Display'
==>
* COA Ends with no responses
* Strategy Order Trades with resting opposite-side order
* BD1 receives strategy order fill for the strategy order: -$83.00x5
* BD2 receives strategy order fill for the strategy order: $83.00x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: -$83.00x5 on Opposite Side ($0.00x0 on the Same Side)
9
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.18. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Auction Response, COA Ends, Auction Response Trades with ORD1, Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 & MM2 receives Auction Notification
4
MM2 Enters Auction Response
SAME SIDE: $71.00 @ Qty:10, Origin = 'C'

5

==>
* COA Ends
6
Check 'Status Window' & 'Market Display'
==>
* Auction Response Trades with ORD1
* BD1 Receives Fill for Leg 1:  Sell 70 @ $8.20
* BD1 Receives Fill for Leg 2:  Buy 150 @ $9.00
* BD1 Receives Fill for Leg 3:  Sell 10 @ $10.19
* BD1 Receives Fill for Leg 3:  Sell 200 @ $10.20
* BD1 Receives Fill for Leg 4:  Buy 190 @ $11.00
* Leg 1 Current Market Unchanged:  $8.00x1000 & $8.20x1000
* Leg 2 Current Market Unchanged:  $9.00x1000 & $9.20x1000
* Leg 3 Current Market Unchanged:  $10.00x1000 & $10.20x1000
* Leg 4 Current Market Unchanged:  $11.00x1000 & $11.20x1000
7
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$72.41x10
* MM2 receives strategy order fill for the strategy order: $72.41x10
8
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.19. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Better Quote, COA Ends Prematurely

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM2 Enters Better-Priced Quote During COA Auction
Leg 1:
Bid: $7.00x1000
Ask: $7.20x1000
Current Market for Leg 1 is $7.00x1000 - $7.20x1000


==>
* COA ends prematurely
* ORD1 Books
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
7
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



3.20. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, MM2 Enters Opposite-Side MKT Order, COA Ends Prematurely, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 & MM2 receive Auction Notification
4
MM1 Enters Opposite-Side MKT Order
ORD2:  MKT @ Qty: 10, Origin = 'C'
* COA Auction ends prematurely
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives ORD fill notification:  Defined 10 @ $84.79
* MM1 receives ORD fill notification:  Opposite 10 @ -$84.79
6
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00 x 0 - $0.00 x 0
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
7
MM1 cancels Quotes on All Legs
==>
* Current Market for Leg 1, 2, 3,  & 4 is clear: $0.00x0 - $0.00x0



3.21. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, Product State Changes to Closed, COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$73.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
4
HD user Closes Strategy Product from SA GUI
==>
* COA Auction ends prematurely
5
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
6
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
7
MM1 cancels Quotes on All Legs
==>
* Current Market for Leg 1, 2, 3,  & 4 is clear: $0.00x0 - $0.00x0



Section 4:  Re-COA on Opposite Side

3.22. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Re-COA Ends, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$81.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000


==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* Current Market for Strategy is: $0.00x0 / -$81.00x100
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
6
MM1 updates Quote on Leg 1 & Leg 2
Leg 2: Ask: $9.10 x 1000
Leg 3:  Bid:  $10.10x1000
* Current Market for Leg 2 is: $9.00x1000 - $9.10x1000
* Current Market for Leg 3 is:  $10.10x1000 - $10.20x1000
* Derived Quote: Defined $81.20 / Opposite -$72.40
7
Check 'Auction Display' Window
==>
* Re-COA starts 
8
Check 'Status Window'
==>
* Re-COA ends
* ORD1 books
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.10x1000
* Leg 3:  $10.10x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
9
BD1 cancels ORD1
==>
* ORD1 is cancelled
* Strategy Current Market is clear/empty: $0.00x0
10
MM1 cancels quotes on Legs
==>
* Quotes are cancelled
* Leg Markets are clear/empty:  $0.00x0


3.23. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, MM2 Responds, Re-COA Ends, Order Trades with Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$81.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 0 - 0.00 x 0

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 / -$81.00x100
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
6
MM1 updates Quote on Leg 1 & Leg 2
Leg 2: Ask: $9.10 x 1000
Leg 3:  Bid:  $10.10x1000
* Current Market for Leg 2 is: $9.00x1000 - $9.10x1000
* Current Market for Leg 3 is:  $10.10x1000 - $10.20x1000
* Derived Quote: Defined $81.20 / Opposite -$72.40
7
Check 'Auction Display' Window
==>
* Re-COA starts 
8
MM2 Responds to Re-COA Auction
Same Side: $81.00 @ Qty: 100, Origin = 'C'
* Re-COA Auction continues
9
Check 'Status Window' & 'Market Display'
==>
* Re-COA Auction ends
* BD1 receives fill notification for ORD1:  -$81.00 @ 100
* MM2 receives fill notification for Auction Response:  $81.00 @ 100
* Current Market for Legs is unchanged:
* Leg 1:  $8.00x1000 - $8.20x1000
* Leg 2:  $9.00x1000 - $9.10x1000
* Leg 3:  $10.10x1000 - $10.20x1000
* Leg 4:  $11.00x1000 - $11.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for Leg 1, 2, 3,  & 4 is clear: $0.00x0 - $0.00x0



3.24. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, COA Ends, Order Books, MM1 Updates Leg Quotes, Re-COA Starts, Product State Changes to Closed, Re-COA Ends Prematurely, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Set Trading Properties in SA GUI
TicksAwayForReCOA = 10
NumberOfAttemptsForReCOA = 3


3
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$81.00 @ Qty:100, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification


==>
* COA Auction ends
5
Check 'Market Display'
==>
* ORD1 is booked
* Current Market for Strategy is: $0.00x0 / -$81.00x100
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
6
MM1 updates Quote on Leg 1 & Leg 2
Leg 2: Ask: $9.10 x 1000
Leg 3:  Bid:  $10.10x1000
* Current Market for Leg 2 is: $9.00x1000 - $9.10x1000
* Current Market for Leg 3 is:  $10.10x1000 - $10.20x1000
* Derived Quote: Defined $81.20 / Opposite -$72.40
7
Check 'Auction Display' Window
==>
* Re-COA starts 
8
HD user Closes Strategy Product from SA GUI
==>
* Re-COA Auction ends prematurely
9
Check 'Market Display'
==>
* Strategy Product is in 'Closed' State
* ORD1 is booked
* Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.10x1000
* Leg 3:  $10.10x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
10
BD1 cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0
11
MM1 cancel quotes
==>
* Current Market for Leg 1, 2, 3,  & 4 is clear: $0.00x0 - $0.00x0



3.25. 4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Begins, COA Ends, Order Books, Cancel/Replace Order, Order Trades

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* MM1 receives Auction Notification
4
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order books at: $0.00x0 / -$73.00x10
5
BD1 enters Cancel/Replace on ORD1
ORD2:  -$86.00 @ Qty:10, Origin = 'C'
* ORD1 cancels
* COA Auction begins for ORD2
* MM1 receives Auction Notification
6
Check 'Market Display'
==>
* COA Auction ends with no responses
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$84.80x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x150
* MM2 receives quote fill for Option Leg 3: $10.00x210
* MM2 receives quote fill for Option Leg 4: $11.20x190
* Resulting Option Leg 1 market: $8.00x930 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x850
* Resulting Option Leg 3 market: $10.00x790 & $10.20x1000
* Resulting Option Leg 4 market: $11.00x1000 & $11.20x810
* Resulting spread market clear/empty
7
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Current Market for Leg 1, 2, 3,  & 4 is clear: $0.00x0 - $0.00x0



Section 5:  AIM

3.26. 4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, AIM auction ends, Order Trades With Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Paired AIM Order
ORD1:
PO Same:$73.00 @ Qty:10, Origin = 'C'
MO Opposite:-$73.00 @ Qty: 10, Origin = 'F'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* AIM Auction begins
* MM1 & MM2 receive Auction Notification
4
Check 'Status Window' & 'Market Display'
==>
* AIM Auction ends with no responses
* PO trades with MO
* BD1 receives fill notification for PO1: -$73.00x10
* BD1 receives fill notification for MO1: $73.00x10
* Leg 1 Current Market Unchanged: 8.00 x 1000 - 8.20 x 1000
* Leg 2 Current Market Unchanged: 9.00 x 1000 - 9.20 x 1000
* Leg 3 Current Market Unchanged: 10.00 x 1000 - 10.20 x 1000
* Leg 4 Current Market Unchanged: 11.00 x 1000 - 11.20 x 1000
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Current Market for Leg 1, 2, 3,  & 4 is clear: $0.00x0 - $0.00x0



3.27. 4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Auction Response, AIM auction ends, Auction Response Trades against Order

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 enters quote on Leg2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000
2
MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 enters AIM Order
ORD1:
PO-SAME:$73.00 @ Qty:100, Origin = 'C'
MO-OPPOSITE:-$73.00 @ Qty: 100, Origin = 'F'
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -9.10
5
MM2 enters Auction Response
ORD2: Origin = C, OPPOSITE 200 @ -73.00
AIM auction continues


==>
* MMs remain at original quote
* Auction ends normally at -73.00
* 100 contracts are traded at -73.00
6
Check Status Window
==>
* MO1 is CANCELLED
* ORD2 remaining 100 quantity is CANCELLED
* The auction trade allocation is as follows:
ORD2 = 100 @ +73.00
MO1 = 0
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with ORD2 for 100 @ -73.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000



3.28. 4-Leg Strategy, Setup Valid Leg Market, Enter AIM Order, AIM auction begins, MM2 Updates Quote on Legs, AIM auction ends prematurely, AIM order Trades

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 enters quote on Leg2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000
2
MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
MM2 enters AIM Order
ORD1:
PO-SAME:$73.00 @ Qty:10, Origin = 'C'
MO-OPPOSITE:-$73.00 @ Qty: 10, Origin = 'F'
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at -73.00
5
MM2 enters quote on Leg1
Bid: 8.10 x 1000
Ask: 8.20 x 1000
AIM auction prematurely ends


==>
* MMs remain at original quote
* Auction prematurely ends at -73.00
* 100 contracts are traded at -73.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +73.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -73.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
9
Check 'Market Display' Window of Legs
==>
* Incoming quote is updated after the AIM auction allocation ends
* Current Market for Leg2 is 8.10 x 100 - 8.20 x 200



3.29. 4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, MM2 enters Better-Priced AIM order on Strategy, AIM auction ends prematurely, ORD1 Trades, Second AIM Auction Starts and Ends, ORD2 Trades

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000
2
MM1 enters quote on Leg2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ MKT

MO1: Origin = F, OPPOSITE 100 @ -73.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at 73.00
5
MM2 enters AIM Order
PO2: Origin = C, SAME 100 @ MKT

MO2: Origin = F, OPPOSITE 100 @ -74.00
* The AIM Order is submitted
* First AIM auction prematurely ends


==>
* MMs remain at original quote
* First AIM Auction prematurely ends at -73.00
* 100 contracts are traded at -73.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +73.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -73.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
9
Check 'Auction Display' Window
==>
The second AIM auction is started at 74.00


==>
* MMs remain at original quote
* Second AIM Auction ends normally at -74.00
* 100 contracts are traded at -74.00
10
Check Status Window
==>
* The auction trade allocation is as follows:
MO2 = 100 @ +74.00
11
Check 'Market Display' Window of Strategy
==>
* PO2 trades with MO2 for 100 @ -74.00
* Current Market is 0.00 x 0 - 0.00 x 0
12
Check 'Market Display' Window of Legs
==>
Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000



3.30. 4-Leg Strategy, Setup Valid Leg Market, Enter Paired AIM order, AIM auction begins, Product moves to closed state, AIM auction ends prematurely, Order Trades at Ended Price

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.



In SA GUI set AuctionTimeToLive to 30000 for Internalization.


1
MM1 enters quote on Leg1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000
2
MM1 enters quote on Leg2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 enters AIM Order
PO1: Origin = C, SAME 100 @ MKT

MO1: Origin = F, OPPOSITE 100 @ -73.00
The AIM Order is submitted
4
Check 'Auction Display' Window
==>
The AIM auction is started at 73.00
5
In the 'Product State Maintenance' window, change the product state of Leg2 from Open to Closed
==>
AIM auction prematurely ends


==>
* MMs remain at original quote
* Auction prematurely ends at -73.00
* 100 contracts are traded at -73.00
6
Check Status Window
==>
* The auction trade allocation is as follows:
MO1 = 100 @ +73.00
7
Check 'Market Display' Window of Strategy
==>
* PO1 trades with MO1 for 100 @ -73.00
* Current Market is 0.00 x 0 - 0.00 x 0
8
Check 'Market Display' Window of Legs
==>
Current Market for Leg 1, 2, 3,  & 4 is unchanged:
* Leg 1: $8.00x1000 - $8.20x1000
* Leg 2: $9.00x1000 - $9.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4: $11.00x1000 - $11.20x1000
9
Check 'Market Display' Window of Legs
==>
* Leg2 product state changes to CLOSED
* Current Market for Leg2 is 0.00 x 0 - 0.00 x 0




Section 6:  Cross-Products  

3.31. Default Pre-test conditions
* Routing Properties: COA Enabled for Strategy
* Set "COA Eligible" to "True" and "OriginCode" to "[*]"

* Trading Properties:
* Auction Enabled for Strategy
* Set to "True"
* Auction Enabled for Internalization
* Set to "True"

* BD1 Create Strategy Product
* Stock Leg 1: Buy 700
* Option Leg 2: Sell 15
* Option Leg 3:  Buy 21
* Option Leg 4:  Sell 19
* Results:  Creation should be successful


3.32. 4-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, COA Ends, Order Routes to PAR

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
3
BD1 Enters Same Side Strategy Order
ORD1:  $56.40 @ Qty:1, Origin = 'C'
* COA Auction begins



* COA Auction ends with no responses
4
Check 'Order History'
==>
* Strategy Order routes to PAR
5
MM1 cancels quotes
==>
* Current Market for all Legs is Clear: $0.00x0 - $0.00x0
6
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



3.33. 4-leg Strategy, Setup Valid Leg Market, Enter Same-Side Strategy Order, COA Starts, COA Ends, Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
3
BD1 Enters Same Side Strategy Order
ORD1:  $52.40 @ Qty:1, Origin = 'C'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* COA Auction begins
4
Check 'Status Window'
==>
* COA Auction ends with no responses
* ORD1 trades with legs
* BD1 receives strategy order fill for the strategy order: $54.40x1
5
Check 'Market Display'
==>
* Current Market for L1 is: $10.00x10,00 & $10.20x9300
* Current Market for L2 is: $10.00x985 & $10.20x1000
* Current Market for L3 is: $10.00x1000 & $10.20x979
* Current Market for L4 is:  $10.00x981 & $10.20x1000
* Resulting spread market: $0.00x0 - $0.00x0
6
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty



3.34. 4-leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, COA Starts, MM2 Enters Auction Response, COA Ends, Order Trades With Auction Response

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
4
BD1 Enters Same Side Strategy Order
ORD1:  $52.40 @ Qty:1, Origin = 'C'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
MM2 Responds to Auction
Opposite Side: -$66.80 @ Qty: 1, Origin = 'C'
* Auction continues
6
Check 'Status Window' & 'Market Display'
==>
* Auction ends
* BD1 receives fill notification for ORD1: $66.48 @ 1
* MM2 receives fill notification for Auction Response:  -$66.48 @ 1
* Current Market for Legs is unchanged:
* Leg 1:  $10.00x10,000 - $10.20x10,000
* Leg 2:  $10.00x1000 - $10.20x1000
* Leg 3:  $10.00x1000 - $10.20x1000
* Leg 4:  $10.00x1000 - $10.20x1000
* Current Market for Strategy: $0.00x0 - $0.00x0
10
MM1 cancel quotes
==>
* Current Market for all Legs is clear



3.35. 4-leg Strategy, Setup Valid Leg Market, Enter Opposite-Side Strategy Order, COA Starts, During Auction Enter Subsequent Same-Side Strategy Order, COA Ends, Orders Trade with Each Other

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$68.80 @ Qty:1, Origin = 'C'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* COA Auction begins
4
BD2 Enters Same-Side Strategy Order
ORD2:  $52.40 @ Qty:1, Origin = 'C'
* COA Auction ends prematurely
* ORD2 trades with ORD1
* BD1 receives strategy order fill for the strategy order: -$55.02x1
* BD2 receives strategy order fill for the strategy order: $55.02x1
5
Check 'Status Window' & 'Market Display'
==>
* No Change to Leg 1 market: $10.00x10,000 & $10.20x10,000
* No Change to Leg 2 market: $10.00x1000 & $10.20x1000
* No Change to Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Leg 4 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $0.00x0
6
MM1 Cancels Quotes
==>
* Current Market for all Legs is clear



3.36. 4-leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Starts, Enter Same Side Order During Auction, Order Joins Auction, Auction Ends, Orders Trade

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$68.80 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
MM2 Enters Auction Response
Same-Side:  $52.40 @ 20, Origin = 'C'
* COA Auction continues
6
BD2 Enters Opposite-Side Strategy Order
ORD2:  -$68.80 @ Qty:5, Origin = 'C'
* ORD2 joins Auction
7
Check 'Auction Display'
==>
* COA Auction Ends
8
Check 'Status Window'
==>
* ORD1 trades with Auction Response -$55.02 @ 10
* ORD2 trades with Auction Response -$55.02 @ 5
* Remaining Auction Response quantity of 5 is cancelled
* Leg 1: $10.00x1000 - $10.20x1000
* Leg 2: $10.00x1000 - $10.20x1000
9
MM1 Cancels quotes on all Legs
==>
* Legs 1, 2, 3, & 4 Current Market: $0.00x0 - $0.00x0



3.37. 4-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, AIM Auction Ends, Orders Trade

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
4
BD1 Enters Paired AIM Order
ORD1:
PO Same:$52.40 @ Qty:1, Origin = 'C'
MO Opposite: MKT @ Qty: 1, Origin = 'F'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* AIM Auction begins
4
Check 'Status Window' & 'Market Display'
==>
* AIM Auction ends with no responses
* PO trades with MO
* BD1 receives fill notification for PO1: $55.02x1
* BD1 receives fill notification for MO1: -$55.02x1
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000
* Current Market for L2 is: $10.00x1000 - $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000
5
MM1 Cancels Quotes
==>
* Current Market for L1 is: $0.00x0 - $0.00x0
* Current Market for L2 is: $0.00x0 - $0.00x0
* Current Market for L3 is: $0.00x0 - $0.00x0
* Current Market for L4 is: $0.00x0 - $0.00x0



3.38. 4-leg Strategy, Setup Valid Leg Market, Enter Paired AIM Order, AIM Auction Begins, MM2 Enters Auction Response, AIM Auction Ends, Auction Response Trades against Order

#
Action
Input Values
Expected Results

Utilize strategy product created in pre-test setup.


1
In SA GUI set AuctionTimeToLive to 30000 for Internalization.


2
Check 'Market Display'
==>
* All Legs are in 'Open' state
* Strategy product is in 'On-Hold' state
3
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L2 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
4
BD1 Enters Paired AIM Order
ORD1:
PO Same:$60.60 @ Qty:10, Origin = 'C'
MO Opposite: -$60.60 @ Qty: 10, Origin = 'F'
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0

Check 'Auction Display'
==>
* AIM Auction begins
5
MM2 enters Auction Response
ORD2: Origin = F, OPPOSITE 10 @ -$60.60
* AIM auction continues
6
Check 'Status Window'
==>
* AIM Auction ends
* PO trades with MO and Auction Response
* BD1 receives fill notification for PO1: $60.60x10
* BD1 receives fill notification for MO1: -$60.60x5
* MM2 receives fill notification for Auction Response:  -$60.60x5
* MO1 remaining quantity of 5 is cancelled
* Auction Response remaining quantity of 5 is cancelled
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000
* Current Market for L2 is: $10.00x1000 - $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000
7
MM1 Cancels Quotes
==>
* Current Market for Legs is Clear: $0.00x0 - $0.00x0


3.39. 4-leg Strategy, Setup Valid Leg Market, Enter AON Orders on Both Legs, AON Orders Book, Enter Same-Side Strategy Order, COA Starts, COA Ends, Strategy Order Trades with AON Orders

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Stock Leg 1
Bid:  $10.00x1000
Ask:  $10.40x1000
Current Market is $10.00x1000 - $10.40x1000

MM1 Enters Quote on Option Leg 2
Bid:  $9.80x1000
Ask:  $10.20x1000
Current Market is $9.80x1000 - $10.20x1000

MM1 Enters Quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.40x1000
Current Market is $10.00x1000 - $10.40x1000

MM1 Enters Quote on Option Leg 4
Bid:  $9.80x1000
Ask:  $10.20x1000
Current Market is $9.80x1000 - $10.20x1000
3
BD1 Enters AON Order on Leg 1
ORD1:  Sell 700 @ $10.20, Contingency = AON
* Order books
* Current Market is $10.00x1000 - $10.20x700

BD1 Enters AON Order on Leg 2
ORD2:  Buy 15 @ $10.00, Contingency = AON
* Order books
* Current Market is $10.00x15 - $10.20x1000

BD1 Enters AON Order on Leg 3
ORD3:  Sell 21 @ $10.20, Contingency = AON
* Order books
* Current Market is $10.00x1000 - $10.20x21

BD1 Enters AON Order on Leg 4
ORD4:  Buy 19 @ $10.00, Contingency = AON
* Order books
* Current Market is $10.00x19 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
4
BD2 Enters Same-Side Order on Strategy Product
ORD5:  1 @ MKT, Origin='C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA Auction begins
* Auction subscribers receive Auction Notification
5
Check 'Status Window' & 'Market Display'
==>
* COA Auction ends with no responses
* ORD5 trades with ORD1 thru ORD4
* BD1 receives fill notification for ORD1: Sell 700 @ $10.20
* BD1 receives fill notification for ORD2: Buy 15 @ $10.00
* BD1 receives fill notification for ORD3:  Sell 21 @ $10.20
* BD1 receives fill notification for ORD4:  Buy 19 @ $10.00
* BD2 receives fill notification for ORD5:  Defined 1 @ $54.40
* Leg 1 Current Market: $10.00x1000-$10.40x1000
* Leg 2 Current Market: $9.80x1000-$10.20x1000
* Leg 3 Current Market: $10.00x1000-$10.40x1000
* Leg 4 Current Market:  $9.80x1000-$10.20x1000
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

3.40.  	4-Leg Strategy, Setup Valid Leg Market, Enter Opposite-Side IOC Contingency Strategy Order, COA Starts, COA Ends, Order Trades Partially, Remaining Quantity Cancels

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
3
MM1 enters quote on Stock Leg 1
Bid:  $10.00x10,000
Ask: $10.20x10,000
* Current Market for L1 is: $10.00x10,000 - $10.20x10,000

MM1 enters quote on Option Leg 2
Bid:  $10.00x100
Ask: $10.20x100
* Current Market for L2 is: $10.00x100 - $10.20x100

MM1 enters quote on Option Leg 3
Bid:  $10.00x1000
Ask:  $10.20x1000
* Current Market for L3 is: $10.00x1000 - $10.20x1000

MM1 enters quote on Option Leg 4
Bid:  $10.00x1000
Ask: $10.20x1000
* Current Market for L4 is: $10.00x1000 - $10.20x1000


==>
* Derived Quote for Strategy Product is:  Defined:  $66.80 / Opposite: -$54.40
* Strategy Product is in "Open" state
4
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$66.80 @ Qty:10, Origin = 'C', Contingency='IOC'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000

Check 'Auction Display'
==>
* COA auction begins
* MM1 receive Auction Notification
5
Check 'Status Window'
==>
* COA auction ends
* ORD1 Trades with Leg 1: Sell 4,200 IOC @ 10.00; leaves 2,800 
* ORD1 Trades with Leg 2: Buy 90 IOC @ 10.20; leaves 60
* ORD1 Trades with Leg 3: Sell 126 IOC @ 10.00; leaves 84
* ORD1 Trades with Leg 4: Buy 114 IOC @ 10.20; leaves 76
* Remaining ORD quantity for Leg 1 cancels: 2,800 cancelled
* Remaining ORD quantity for Leg 2 cancels:  60 cancelled
* Remaining ORD quantity for Leg 3 cancels:  84 cancelled
* Remaining ORD quantity for Leg 4 cancels:  76 cancelled
6
Check 'Market Display'
==>
* Current Market for Leg 1:  $10.00x5,800 - $10.20x10,000
* Current Market for Leg 2:  $10.00x100 - $10.20x10
* Current Market for Leg 3:  $10.00x874 - $10.20x1000
* Current Market for Leg 4:  $10.00x1000 - $10.20x886
* Current Market for Strategy:  $0.00x0 - $0.00x0
7
MM1 Cancels Quotes
==>
* Current Market for all legs is clear: $0.00x0 - $0.00x0

4. 
 	ONE_MAIN

Part One:  2-Leg Scenarios
4.1.  	Default Pre-test Conditions
* BD1 Create Strategy Product
* Option Leg 1: Buy 13
* Option Leg 2: Sell 7
* Results:  Creation should be successful


Section 1:  Defined Side
4.2.  	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  -$42.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0



4.3.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Market Display' for Strategy
==>
* Strategy Order books at: -$42.00x10 - $0.00x0
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



4.4.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$43.80 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$43.60x10
* MM1 receives quote fill for Option Leg 1: $8.20x130
* MM1 receives quote fill for Option Leg 2: $9.00x70
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x870
* Resulting Option Leg 1 market: $9.00x930 & $9.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


4.5.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$41.60 @ Qty:10, Origin = 'C'
* Strategy Order books at -$41.60x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: $41.60 @ Qty:5, Origin = 'C'

5
Check 'Status Window'
==>
* Strategy Order Trades with resting same-side order
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: -$41.60x5 - $0.00x0
7
BD1 Cancels ORD1 remaining quantity
==>
* ORD1 remaining quantity successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty




Section 2:  Opposite Side

4.6.  	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 - $39.50x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



4.7.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.80 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 - $39.80x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



4.8.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $39.60x10
* MM1 receives quote fill for Option Leg 1: $8.00x130
* MM1 receives quote fill for Option Leg 2: $9.20x70
* Resulting Option Leg 1 market: $8.00x8.70 & $8.20x1000
* Resulting Option Leg 1 market: $9.00x1000 & $9.20x930
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



4.9.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $41.60 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 - $41.60x10
4
BD2 Enter Same-Side Strategy Order
ORD2: -$43.50 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
7
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: $0.00x0 - $41.60x5
9
BD1 Cancels ORD1 remaining quantity
==>
* ORD1 remaining quantity successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty

Part Two:  3-leg Scenarios
4.10. Default Pre-Test Conditions
* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 13
* Option Leg 3:  Buy 19
* Result: Creation should be successful


Section 1: Defined Side

4.11.  3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  -$133.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


4.12. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>

2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: -$133.00x10 - $0.00x0
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


4.13. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$135.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$134.20x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x130
* MM1 receives quote fill for Option Leg 3: $10.20x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x870 & $9.20x1000
* Resulting Option Leg 3 market: $10.00x1000 $ $10.20x810
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


4.14. 	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$130.30 @ Qty:10, Origin = 'C'
* Strategy Order books at -$130.30x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: $128.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting same-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$130.30x5
* BD2 receives strategy order fill for the strategy order: $130.30x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 2 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: -$130.30x5 on Defined Side ($0.00x0 on the Opposite Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

Section 2:  Opposite Side

4.15. 3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 - $127.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0

 
4.16.  3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 - $127.00x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

4.17. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $125.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: $126.40x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x130
* MM1 receives quote fill for Option Leg 3:  $10.00x190
* Resulting Option Leg 1 market: $8.00x9.30 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x870
* Resulting Option Leg 3 market: $10.00x810 & $10.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


4.18. 3-Leg Strategy, Opposite Side Order, Valid Leg Market, Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 - $127.00x10
4
BD2 Enter Same-Side Strategy Order
ORD2: -$133.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$127.00x5
* BD2 receives strategy order fill for the strategy order: $127.00x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $127.00x5
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

Part Three: 4-leg Scenarios
4.19. Default Pre-Test Conditions
* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 15
* Option Leg 3:  Buy 21
* Option Leg 4:  Sell 19
* Result: Creation should be successful


Section 1: Defined Side

4.20.  4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $73.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


4.21.  4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $73.00x10 - $0.00x0
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


4.22.  4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $71.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs

4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: $72.40x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x150
* MM2 receives quote fill for Option Leg 3:  $10.20x210
* MM2 receives quote fill for Option Leg 4:  $11.00x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x850 & $9.20x1000
* Resulting Option Leg 3 market:  $10.00x1000 & $10.20x790
* Resulting Option Leg 4 market:  $11.00x810 & $11.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


4.23.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $73.00x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: -$82.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting same-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$73.00x5
* BD2 receives strategy order fill for the strategy order: $73.00x5
* BD1 & BD2 receive fill for Leg 1: 35 @ 8.19 
* BD1 & BD2 receive fill for Leg 2: 75 @ 9.01 
* BD1 & BD2 receive fill for Leg 3: 95 @ 10.19
* BD1 & BD2 receive fill for Leg 3: 10 @ 10.20 
* BD1 & BD2 receive fill for Leg 4: 95 @ 11.01
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: $73.00x5 on Defined Side ($0.00x0 on the Opposite Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
9
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

Section 2:  Opposite Side

4.24.  4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions

* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 / -$83.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0


4.25. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 / -$83.00x10
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

4.26.  4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM2 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$86.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' and 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$84.80x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x150
* MM2 receives quote fill for Option Leg 3:  $10.00x210
* MM2 receives quote fill for Option Leg 4:  $11.20x190
* Resulting Option Leg 1 market: $8.00x930 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x850
* Resulting Option Leg 3 market:  $10.00x790 & $10.20x1000
* Resulting Option Leg 4 market:  $11.00x1000 & $11.20x810
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

4.27. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 / -$83.10x10
4
BD2 Enter Same-Side Strategy Order
ORD2: $73.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
5
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$83.00x5
* BD2 receives strategy order fill for the strategy order: $83.00x5
* BD1 & BD2 receive fill for Leg 1: 35 @ 8.03 
* BD1 & BD2 receive fill for Leg 2: 75 @ 9.17
* BD1 & BD2 receive fill for Leg 3: 30 @ 10.02 
* BD1 & BD2 receive fill for Leg 3: 75 @ 10.03 
* BD1 & BD2 receive fill for Leg 4: 95 @ 11.17
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: -$83.00x5 on Opposite Side ($0.00x0 on the Same Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


5.  CFE_MAIN

Part One:  2-Leg Scenarios
5.1.  	Default Pre-test Conditions
* BD1 Create Strategy Product
* Option Leg 1: Buy 13
* Option Leg 2: Sell 7
* Results:  Creation should be successful


Section 1:  Defined Side
5.2.  	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  -$42.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0



5.3.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Market Display' for Strategy
==>
* Strategy Order books at: -$42.00x10 - $0.00x0
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



5.4.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$43.80 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$43.60x10
* MM1 receives quote fill for Option Leg 1: $8.20x130
* MM1 receives quote fill for Option Leg 2: $9.00x70
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x870
* Resulting Option Leg 1 market: $9.00x930 & $9.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


5.5.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$41.60 @ Qty:10, Origin = 'C'
* Strategy Order books at -$41.60x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: $41.60 @ Qty:5, Origin = 'C'

5
Check 'Status Window'
==>
* Strategy Order Trades with resting same-side order
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: -$41.60x5 - $0.00x0
7
BD1 Cancels ORD1 remaining quantity
==>
* ORD1 remaining quantity successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty




Section 2:  Opposite Side

5.6.  	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 - $39.50x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



5.7.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.80 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 - $39.80x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



5.8.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $39.60x10
* MM1 receives quote fill for Option Leg 1: $8.00x130
* MM1 receives quote fill for Option Leg 2: $9.20x70
* Resulting Option Leg 1 market: $8.00x8.70 & $8.20x1000
* Resulting Option Leg 1 market: $9.00x1000 & $9.20x930
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



5.9.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $41.60 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 - $41.60x10
4
BD2 Enter Same-Side Strategy Order
ORD2: -$43.50 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
7
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: $0.00x0 - $41.60x5
9
BD1 Cancels ORD1 remaining quantity
==>
* ORD1 remaining quantity successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty

Part Two:  3-leg Scenarios
5.10. Default Pre-Test Conditions
* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 13
* Option Leg 3:  Buy 19
* Result: Creation should be successful


Section 1: Defined Side

5.11.  3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  -$133.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


5.12. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>

2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: -$133.00x10 - $0.00x0
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


5.13. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$135.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$134.20x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x130
* MM1 receives quote fill for Option Leg 3: $10.20x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x870 & $9.20x1000
* Resulting Option Leg 3 market: $10.00x1000 $ $10.20x810
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


5.14. 	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$130.30 @ Qty:10, Origin = 'C'
* Strategy Order books at -$130.30x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: $128.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting same-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$130.30x5
* BD2 receives strategy order fill for the strategy order: $130.30x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 2 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: -$130.30x5 on Defined Side ($0.00x0 on the Opposite Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

Section 2:  Opposite Side

5.15. 3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $125.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 - $125.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0

 
5.16.  3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 - $127.00x10
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

5.17. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $125.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: $126.40x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x130
* MM1 receives quote fill for Option Leg 3:  $10.00x190
* Resulting Option Leg 1 market: $8.00x9.30 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x870
* Resulting Option Leg 3 market: $10.00x810 & $10.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


5.18. 3-Leg Strategy, Opposite Side Order, Valid Leg Market, Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 - $127.00x10
4
BD2 Enter Same-Side Strategy Order
ORD2: -$133.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$127.00x5
* BD2 receives strategy order fill for the strategy order: $127.00x5
* BD1 & BD2 receive fill for Leg 1: 35 @ 8.02 
* BD1 & BD2 receive fill for Leg 2: 65 @ 9.18 
* BD1 & BD2 receive fill for Leg 3: 90 @ 10.01 
* BD1 & BD2 receive fill for Leg 3: 5 @ 10.02
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $127.00x5
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

Part Three: 4-leg Scenarios
5.19. Default Pre-Test Conditions
* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 15
* Option Leg 3:  Buy 21
* Option Leg 4:  Sell 19
* Result: Creation should be successful


Section 1: Defined Side

5.20.  4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  $71.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $71.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


5.21.  4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $73.00x10 - $0.00x0
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


5.22.  4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $71.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs

4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: $72.40x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x150
* MM2 receives quote fill for Option Leg 3:  $10.20x210
* MM2 receives quote fill for Option Leg 4:  $11.00x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x850 & $9.20x1000
* Resulting Option Leg 3 market:  $10.00x1000 & $10.20x790
* Resulting Option Leg 4 market:  $11.00x810 & $11.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


5.23.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $73.00x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: -$82.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting same-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$73.00x5
* BD2 receives strategy order fill for the strategy order: $73.00x5
* BD1 & BD2 receive fill for Leg 1: 35 @ 8.19 
* BD1 & BD2 receive fill for Leg 2: 75 @ 9.01 
* BD1 & BD2 receive fill for Leg 3: 95 @ 10.19
* BD1 & BD2 receive fill for Leg 3: 10 @ 10.20 
* BD1 & BD2 receive fill for Leg 4: 95 @ 11.01
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: $73.00x5 on Defined Side ($0.00x0 on the Opposite Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
9
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

Section 2:  Opposite Side

5.24.  4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions

* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  -$86.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 / -$86.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0


5.25. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 / -$83.00x10
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

5.26.  4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM2 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$86.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' and 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$84.80x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x150
* MM2 receives quote fill for Option Leg 3:  $10.00x210
* MM2 receives quote fill for Option Leg 4:  $11.20x190
* Resulting Option Leg 1 market: $8.00x930 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x850
* Resulting Option Leg 3 market:  $10.00x790 & $10.20x1000
* Resulting Option Leg 4 market:  $11.00x1000 & $11.20x810
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

5.27. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 / -$83.10x10
4
BD2 Enter Same-Side Strategy Order
ORD2: $73.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
5
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$83.00x5
* BD2 receives strategy order fill for the strategy order: $83.00x5
* BD1 & BD2 receive fill for Leg 1: 35 @ 8.03 
* BD1 & BD2 receive fill for Leg 2: 75 @ 9.17
* BD1 & BD2 receive fill for Leg 3: 30 @ 10.02 
* BD1 & BD2 receive fill for Leg 3: 75 @ 10.03 
* BD1 & BD2 receive fill for Leg 4: 95 @ 11.17
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: -$83.00x5 on Opposite Side ($0.00x0 on the Same Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



6. 	COF_MAIN

Part One:  2-Leg Scenarios
6.1.  	Default Pre-test Conditions
* BD1 Create Strategy Product
* Option Leg 1: Buy 13
* Option Leg 2: Sell 7
* Results:  Creation should be successful


Section 1:  Defined Side
6.2.  	2-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$43.80 @ Qty:10, Origin = 'C'
* Strategy Order books at:  -$42.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0



6.3.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$42.00 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Market Display' for Strategy
==>
* Strategy Order books at: -$42.00x10 - $0.00x0
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



6.4.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$43.80 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: -$43.60x10
* MM1 receives quote fill for Option Leg 1: $8.20x130
* MM1 receives quote fill for Option Leg 2: $9.00x70
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x870
* Resulting Option Leg 1 market: $9.00x930 & $9.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


6.5.  	2-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Same Side Strategy Order
ORD1:  -$41.60 @ Qty:10, Origin = 'C'
* Strategy Order books at -$41.60x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: $41.60 @ Qty:5, Origin = 'C'

5
Check 'Status Window'
==>
* Strategy Order Trades with resting same-side order
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: -$41.60x5 - $0.00x0
7
BD1 Cancels ORD1 remaining quantity
==>
* ORD1 remaining quantity successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty




Section 2:  Opposite Side

6.6.  	2-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 - $39.50x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0



6.7.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.80 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 - $39.80x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



6.8.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $39.50 @ Qty:10, Origin = 'C'
Current Market for Strategy is 0.00 x 1000 - 0.00 x 1000
4
Check 'Status Window' & 'Market Display'
==>
* Strategy Order trades with quotes on legs
* BD1 receives strategy order fill for the strategy order: $39.60x10
* MM1 receives quote fill for Option Leg 1: $8.00x130
* MM1 receives quote fill for Option Leg 2: $9.20x70
* Resulting Option Leg 1 market: $8.00x8.70 & $8.20x1000
* Resulting Option Leg 1 market: $9.00x1000 & $9.20x930
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0



6.9.  	2-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, COA Begins, No Responses, COA Ends, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000


==>
Derived Quote:
Defined: -$39.60 / Opposite: $43.60
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $41.60 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 - $41.60x10
4
BD2 Enter Same-Side Strategy Order
ORD2: -$43.50 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
7
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$41.60x5
* BD2 receives strategy order fill for the strategy order: $41.60x5
8
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* Resulting spread market: $0.00x0 - $41.60x5
9
BD1 Cancels ORD1 remaining quantity
==>
* ORD1 remaining quantity successfully cancels, leaving spread market clear/empty
10
MM1 Cancels Quotes
==>
* Quote cancels successfully, leaving Option Leg 1 market clear/empty
* Quote cancels successfully, leaving Option Leg 2 market clear/empty

Part Two:  3-leg Scenarios
6.10. Default Pre-Test Conditions
* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 13
* Option Leg 3:  Buy 19
* Result: Creation should be successful


Section 1: Defined Side

6.11.  3-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  -$135.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  -$133.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


6.12. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>

2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$133.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: -$133.00x10 - $0.00x0
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


6.13. 3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$135.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$134.20x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x130
* MM1 receives quote fill for Option Leg 3: $10.20x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x870 & $9.20x1000
* Resulting Option Leg 3 market: $10.00x1000 $ $10.20x810
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


6.14. 	3-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books -- Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Same Side Strategy Order
ORD1:  -$130.30 @ Qty:10, Origin = 'C'
* Strategy Order books at -$130.30x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: $128.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting same-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$130.30x5
* BD2 receives strategy order fill for the strategy order: $130.30x5
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 2 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: -$130.30x5 on Defined Side ($0.00x0 on the Opposite Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

Section 2:  Opposite Side

6.15. 3-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  $125.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 - $127.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0

 
6.16.  3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 - $127.00x10
5
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

6.17. 3-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $125.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: $126.40x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x130
* MM1 receives quote fill for Option Leg 3:  $10.00x190
* Resulting Option Leg 1 market: $8.00x9.30 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x870
* Resulting Option Leg 3 market: $10.00x810 & $10.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0


6.18. 3-Leg Strategy, Opposite Side Order, Valid Leg Market, Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000


==>
Derived Quote:
Defined: -$126.40 / Opposite: $134.20
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  $127.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 - $127.00x10
4
BD2 Enter Same-Side Strategy Order
ORD2: -$133.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$127.00x5
* BD2 receives strategy order fill for the strategy order: $127.00x5
* BD1 & BD2 receive fill notification for Leg 1: 35 @ 8.01 
* BD1 & BD2 receive fill notification for Leg 2: 10 @ 9.18 
* BD1 & BD2 receive fill notification for Leg 2: 55 @ 9.19 
* BD1 & BD2 receive fill notification for Leg 3: 95 @ 10.02 
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* Resulting spread market: $0.00x0 - $127.00x5
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0

Part Three: 4-leg Scenarios
6.19. Default Pre-Test Conditions
* BD1 Create Strategy Product:
* Option Leg 1:  Buy 7
* Option Leg 2:  Sell 15
* Option Leg 3:  Buy 21
* Option Leg 4:  Sell 19
* Result: Creation should be successful


Section 1: Defined Side

6.20.  4-Leg Strategy, Setup No Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions
==>
* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Same Side Strategy Order
ORD1:  $71.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $73.00x10 - $0.00x0
3
BD1 Cancels ORD1
==>
Current Market for Strategy is $0.00x0 - $0.00x0


6.21.  4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $73.00x10 - $0.00x0
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


6.22.  4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $71.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs

4
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: $72.40x10
* MM1 receives quote fill for Option Leg 1: $8.20x70
* MM1 receives quote fill for Option Leg 2: $9.00x150
* MM2 receives quote fill for Option Leg 3:  $10.20x210
* MM2 receives quote fill for Option Leg 4:  $11.00x190
* Resulting Option Leg 1 market: $8.00x1000 & $8.20x930
* Resulting Option Leg 2 market: $9.00x850 & $9.20x1000
* Resulting Option Leg 3 market:  $10.00x1000 & $10.20x790
* Resulting Option Leg 4 market:  $11.00x810 & $11.20x1000
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0


6.23.  	4-Leg Strategy, Setup Valid Leg Market, Enter Same Side Strategy Order, Order Books, Enter Subsequent Opposite Side Order to Trade with the Resting Same Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Same Side Strategy Order
ORD1:  $73.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $73.00x10 - $0.00x0
4
BD2 Enter Opposite Side Strategy Order
ORD2: -$82.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting same-side order
5
Check 'Status Window'
==>
* BD1 receives strategy order fill for the strategy order: -$73.00x5
* BD2 receives strategy order fill for the strategy order: $73.00x5
* BD1 & BD2 receive fill for Leg 1: 25 @ 8.19 
* BD1 & BD2 receive fill for Leg 1: 10 @ 8.20 
* BD1 & BD2 receive fill for Leg 2: 75 @ 9.01 
* BD1 & BD2 receive fill for Leg 3: 105 @ 10.19
* BD1 & BD2 receive fill for Leg 4: 95 @ 11.01
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: $73.00x5 on Defined Side ($0.00x0 on the Opposite Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
9
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

Section 2:  Opposite Side

6.24.  4-Leg Strategy, Setup No Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions

* Strategy Leg Markets at 0x$0.00, Strategy product state should be "On Hold"
2
BD1 Enters Opposite Side Strategy Order
ORD1:  -$86.00 @ Qty:10, Origin = 'C'
* Strategy Order books at:  $0.00x0 / -$83.00x10
3
BD1 Cancels ORD1
==>
* Current Market for Strategy is $0.00x0 - $0.00x0


6.25. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at: $0.00x0 / -$83.00x10
4
BD1 Cancel ORD1
==>
* ORD1 is cancelled
* Current Market is $0.00 x 0 - $0.00 x 0
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

6.26.  4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Strategy Order Trades with Quotes on Legs

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM2 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM1 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$86.00 @ Qty:10, Origin = 'C'
* Strategy Order trades with quotes on legs
4
Check 'Status Window' and 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$84.80x10
* MM1 receives quote fill for Option Leg 1: $8.00x70
* MM1 receives quote fill for Option Leg 2: $9.20x150
* MM2 receives quote fill for Option Leg 3:  $10.00x210
* MM2 receives quote fill for Option Leg 4:  $11.20x190
* Resulting Option Leg 1 market: $8.00x930 & $8.20x1000
* Resulting Option Leg 2 market: $9.00x1000 & $9.20x850
* Resulting Option Leg 3 market:  $10.00x790 & $10.20x1000
* Resulting Option Leg 4 market:  $11.00x1000 & $11.20x810
* Resulting spread market clear/empty
5
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
6
MM2 Cancels Quotes
==>
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0

6.27. 4-Leg Strategy, Setup Valid Leg Market, Enter Opposite Side Strategy Order, Order Books -- Enter Subsequent Same Side Order to Trade with the Resting Opposite Side Order - Split Price

#
Action
Input Values
Expected Results
1
Utilize strategy product created in pre-test conditions


2
MM1 Enters Quote on Leg 1
Bid:  $8.00x1000
Ask:  $8.20x1000
Current Market is 8.00 x 1000 - 8.20 x 1000

MM1 Enters Quote on Leg 2
Bid:  $9.00x1000
Ask:  $9.20x1000
Current Market is 9.00 x 1000 - 9.20 x 1000

MM2 Enters Quote on Leg 3
Bid:  $10.00x1000
Ask: $10.20x1000
Current Market is 10.00 x 1000 - 10.20 x 1000

MM2 Enters Quote on Leg 4
Bid:  $11.00x1000
Ask: $11.20x1000
Current Market is 11.00 x 1000 - 11.20 x 1000


==>
Derived Quote:
Defined: $84.80 / Opposite: -$72.40
3
BD1 Enters Opposite-Side Strategy Order
ORD1:  -$83.00 @ Qty:10, Origin = 'C'
* Strategy Order books at $0.00x0 / -$83.10x10
4
BD2 Enter Same-Side Strategy Order
ORD2: $73.00 @ Qty:5, Origin = 'C'
* Strategy Order Trades with resting opposite-side order
5
Check 'Status Window' & 'Market Display'
==>
* BD1 receives strategy order fill for the strategy order: -$83.00x5
* BD2 receives strategy order fill for the strategy order: $83.00x5
* BD1 & BD2 receive fill for Leg 1: 30 @ 8.02 
* BD1 & BD2 receive fill for Leg 1: 5 @ 8.03
* BD1 & BD2 receive fill for Leg 2: 75 @ 9.17
* BD1 & BD2 receive fill for Leg 3: 105 @ 10.03 
* BD1 & BD2 receive fill for Leg 4: 95 @ 11.17
6
Check 'Market Display'
==>
* No Change to Option Leg 1 market: $8.00x1000 & $8.20x1000
* No Change to Option Leg 1 market: $9.00x1000 & $9.20x1000
* No Change to Option Leg 3 market: $10.00x1000 & $10.20x1000
* No Change to Option Leg 4 market:  $11.00x1000 & $11.20x1000
* Resulting spread market: -$83.00x5 on Opposite Side ($0.00x0 on the Same Side)
7
BD1 Cancels ORD1
==>
* Order successfully cancels, leaving spread market clear/empty
8
MM1 Cancels Quotes
MM2 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 3: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 4: Current Market is $0.00 x 0 - $0.00 x 0



7.  	Miscellaneous Checks
7.1.  	Creating a new strategy when there is an existing Strategy

#
Action
Input Values
Expected Results
1
BD1 Create Strategy Product
Option Leg 1:  Buy 7
Option Leg 2:  Sell 15
Option Leg 3:  Buy 21
Strategy product is created successfully
2
BD2 Create Strategy Product
Option Leg 1:  Buy 7
Option Leg 2:  Sell 15
Option Leg 3:  Buy 21
GUI highlights existing strategy product in Market Display window



7.2.  	Creating a new strategy of a higher-denomination when an existing Strategy of a lower-common-denominator exists

#
Action
Input Values
Expected Results
1
BD1 Create Strategy Product
Option Leg 1:  Buy 3
Option Leg 2:  Sell 6
Option Leg 3:  Buy 8
Strategy product is created successfully
2
BD2 Create Strategy Product
Option Leg 1:  Buy 6
Option Leg 2:  Sell 12
Option Leg 3:  Buy 16
GUI highlights existing strategy product with lower-common-denominator in Market Display window



7.3.  	Testing Leg Limits: Create an 8-leg strategy, Fill All Legs, Enter Same-Side Strategy MKT Order, Order is Rejected, Strategy Product Remains in "Closed" State

#
Action
Input Values
Expected Results
1
BD1 Create Strategy Product
Option Leg 1:  Buy 2
Option Leg 2:  Sell 4
Option Leg 3:  Buy 6
Option Leg 4:  Sell 8
Option Leg 5:  Buy 10
Option Leg 6:  Sell 12
Option Leg 7:  Buy 14
Option Leg 8:  Sell 16
* Strategy product is created successfully
2
MM1 Enters Same Quote on ALL Legs
Bid: 10.00x1000
Ask: 10.20x1000
* Current Market for ALL Legs is:  10.00x1000 - 10.20x1000
3
Check 'Market Display'
==>
* Strategy Product is in "Closed" State
4
MM1 Enter Same-Side Order on Strategy Product
ORD1:  MKT @ Qty: 10, Origin = 'C'
* ORD is rejected


7.4.  	Product States:  3-Leg Strategy, Product in Pre-Open State, Setup Valid Leg Market, Enter Same Side Order, Order Should Book

#
Action
Input Values
Expected Results
1
BD1 Create Strategy Product
Option Leg 1:  Buy 7
Option Leg 2:  Sell 12
Option Leg 3:  Buy 5
Strategy product is created successfully
2
HD user sets Option and Strategy product to "Pre-Open" State in SA GUI
==>
* Option and Strategy product are in "Pre-Open" state in Market Display
3
MM1 Enters Same Quote on ALL Legs
Bid: 10.00x1000
Ask: 10.20x1000
* Current Market for ALL Legs is:
             10.00x1000 - 10.20x1000
* Legs are in "Pre-Open" State
4
Check 'Market Display'
==>
Strategy Product is in "Pre-Open" State
5
BD1 Enter Same-Side Order on Strategy Product
ORD1:  MKT @ Qty: 10, Origin = 'C'
ORD1 is Booked.
6
BD1 cancels ORD1
==>
ORD1 is cancelled

7.5.  	Leg Testing:  4-Leg Strategy, Setup Valid Leg Market on 2 legs ONLY and No Market on Other 2 legs, Enter Same Side Order, Order Should Book

#
Action
Input Values
Expected Results
1
BD1 Create Strategy Product
Option Leg 1:  Buy 7
Option Leg 2:  Sell 12
Option Leg 3:  Buy 5
Option Leg 4:  Sell 23
Strategy product is created successfully
2
MM1 Enters Quote on Leg 1
Bid: 10.00x1000
Ask: 10.20x1000
Current Market for Leg 1 is:
10.00x1000 - 10.20x1000
3
MM1 Enters Quote on Leg 2
Bid:  11.00x1000
Ask: 11.20x1000
Current Market for Leg 2 is:
11.00x1000 - 11.20x1000
4
Check 'Market Display'
==>
* Current Market for Leg 3 is: 0.00x0 - 0.00x0
* Current Market for Leg 4 is: 0.00x0 - 0.00x0
5
BD1 Enters Same-Side Order on Strategy
ORD1: MKT @ Qty: 10, Origin = 'C'
Order Books
6
BD1 Cancels ORD1
==>
* Order is cancelled
7
MM1 Cancels Quotes
==>
* Current Market for Leg 1 is: 0.00x0 - 0.00x0
* Current Market for Leg 2 is: 0.00x0 - 0.00x0


7.6.  	Split-Pricing:  Strategy Order Fill with Split Pricing should NOT result in either Split Price being outside BBO

#
Action
Input Values
Expected Results
1
BD1 Create Strategy Product
Option Leg 1:  Sell 3
Option Leg 2:  Buy 8
Creation is successful
2
MM1 Enters Quote on Leg 1
Bid:  $2.27x100
Ask:  $2.30x100
Current Market is 2.27 x 100 - 2.30 x 100

MM1 Enters Quote on Leg 2
Bid:  $1.00x100
Ask:  $1.25x1000
Current Market is 1.00 x 100 - 1.25 x 100


==>
Derived Quote:
Defined: -$1.10 / Opposite: $3.19
3
BD1 Enters Same Side Strategy Order
ORD1:  -$3.05 @ Qty:100, Origin = 'C'
* COA auction begins
* MM1 & MM2 receive Auction Notification

Check 'Market Display'
==>
* COA auction ends
* ORD1 books
4
BD2 Enters Opposite Side Strategy Order
ORD2:  $3.05 @ Qty: 100, Origin = 'C'
* COA auction begins
* MM1 & MM2 receive Auction Notification


==>
* COA auction ends
5
Check 'Status Window'
==>
* ORD1 trades with ORD2
* BD1 receives fill notification for ORD1: 100 @ -$3.05
* BD2 receives fill notification for ORD2: 100 @ $3.05
* BD1 & BD2 receive fill notification for Leg 1:  300 @ $2.27
* BD1 & BD2 receive fill notification for Leg 2:  600 @ $1.23
* BD1 & BD2 receive notification for Leg 2:  200 @ $1.24
* Split-priced trade occurs within BBO
* Current Market for Strategy is $0.00 x 0 - $0.00 x 0
* Current Market for Legs is unchanged
6
MM1 Cancels Quotes
==>
* Leg 1: Current Market is $0.00 x 0 - $0.00 x 0
* Leg 2: Current Market is $0.00 x 0 - $0.00 x 0


CBOE Confidential and Proprietary	Page 2	11/7/2008


